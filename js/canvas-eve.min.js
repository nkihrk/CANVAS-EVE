!function(e){function t(t){for(var r,n,s=t[0],l=t[1],c=t[2],u=0,p=[];u<s.length;u++)n=s[u],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&p.push(a[n][0]),a[n]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);for(h&&h(t);p.length;)p.shift()();return o.push.apply(o,c||[]),i()}function i(){for(var e,t=0;t<o.length;t++){for(var i=o[t],r=!0,s=1;s<i.length;s++){var l=i[s];0!==a[l]&&(r=!1)}r&&(o.splice(t--,1),e=n(n.s=i[0]))}return e}var r={},a={0:0},o=[];function n(t){if(r[t])return r[t].exports;var i=r[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=r,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(i,r,function(t){return e[t]}.bind(null,r));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="";var s=window.webpackJsonp=window.webpackJsonp||[],l=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var h=l;o.push([24,1]),i()}([,function(e,t){let i;i=navigator.userAgent.toLowerCase().indexOf("firefox")>-1?"":"width .1s, height .1s, top .1s, left .1s";t.NEWFILE_ID=0,t.CURRENT_ID=0,t.HIGHEST_Z_INDEX=1,t.MOUSE_WHEEL_VAL=1,t.IS_TRANSITION=i,t.YOUTUBE_API_KEY=null},,,function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){},function(e,t,i){"use strict";i.r(t);i(4),i(5),i(6),i(7),i(8),i(9),i(10),i(11),i(12),i(13),i(14),i(15),i(16),i(17),i(18),i(19),i(20),i(21),i(22),i(23);var r=new((()=>{function e(){}function t(){e.call(this)}e.prototype={constructor:e,options:{},drawImage(e,t){const i=e.getContext("2d"),r=new Image;r.src=t,r.onload=()=>{i.drawImage(r,0,0)}},getBase64:e=>e.toDataURL(),resetCanvas(e,t){const i=e.getContext("2d");i.fillStyle=t,i.fillRect(0,0,e.width,e.height)}};const i={...e.prototype};return t.prototype=Object.assign(i,{constructor:t,options:{},rgb2hex:e=>`#${e.map(e=>`0${e.toString(16)}`.slice(-2)).join("")}`,hex2rgb:e=>("#"===e.slice(0,1)&&(e=e.slice(1)),3===e.length&&(e=e.slice(0,1)+e.slice(0,1)+e.slice(1,2)+e.slice(1,2)+e.slice(2,3)+e.slice(2,3)),[e.slice(0,2),e.slice(2,4),e.slice(4,6)].map(e=>parseInt(e,16))),hsl2rgb(e){let t,i,r;function a(e,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?e+6*(t-e)*i:i<.5?t:i<2/3?e+(t-e)*(2/3-i)*6:e}if(0===e[1])t=1,i=1,r=e[2];else{const o=e[2]<.5?e[2]*(1+e[1]):e[2]+e[1]-e[2]*e[1],n=2*e[2]-o;t=a(n,o,e[0]+1/3),i=a(n,o,e[0]),r=a(n,o,e[0]-1/3)}return[Math.min(Math.floor(256*t),255),Math.min(Math.floor(256*i),255),Math.min(Math.floor(256*r),255)]},copyTextToClipboard(e){const t=document.createElement("textarea");t.textContent=e;const i=document.getElementsByTagName("body")[0];i.appendChild(t),t.select();const r=document.execCommand("copy");return i.removeChild(t),r},str2node:e=>(new DOMParser).parseFromString(e,"text/html").body.children,transformValue(e){const t=e.split("(")[1].split(")")[0].split(", ");return{scaleX:t[0],rotateP:t[1],rotateM:t[2],scaleY:t[3],transformX:t[4],transformY:t[5]}},getDistance(e,t,i,r){let a=i-e,o=r-t;return a*=a,o*=o,Math.sqrt(a+o)},getRotationRad(e){let t;const i=getComputedStyle(e,null),r=i.getPropertyValue("-webkit-transform")||i.getPropertyValue("-moz-transform")||i.getPropertyValue("-ms-transform")||i.getPropertyValue("-o-transform")||i.getPropertyValue("transform");if("none"!==r){const e=r.split("(")[1].split(")")[0].split(","),i=e[0],a=e[1];t=Math.round(Math.atan2(a,i)*(180/Math.PI))}else t=0;return t<0?(t+360)/180*Math.PI:t/180*Math.PI},calcRadians:(e,t)=>(Math.atan2(t,e)/Math.PI*180+(Math.atan2(t,e)>0?0:360))/180*Math.PI,debugCircle(e,t,i,r){0===$(`#${e}`).length&&(r?$(`#${r}`).append(`<div id="${e}"></div>`):$("#canvas-eve-wrapper").append(`<div id="${e}"></div>`)),$(`#${e}`).css({left:`${i[0]}px`,top:`${i[1]}px`,width:"14px",height:"14px",background:t,"border-radius":"50%",position:"absolute","z-index":999,transform:"translateX(-50%) translateY(-50%)",opacity:.8})},iframePointerNone(){const e=document.querySelectorAll("iframe");for(let t=0;t<e.length;t++)e[t].style.pointerEvents="none"},iframePointerReset(){const e=document.querySelectorAll("iframe");for(let t=0;t<e.length;t++)e[t].style.pointerEvents=""},isString:e=>"string"==typeof e||e instanceof String,isNumber:e=>"number"==typeof e&&isFinite(e),isArray:e=>e&&"object"==typeof e,isFunction:e=>"function"==typeof e,isObject:e=>e&&"object"==typeof e,isElement:e=>e instanceof Element||e instanceof HTMLDocument,isNull:e=>null===e,isUndefined:e=>void 0===e,isBoolean:e=>"boolean"==typeof e,keysCount:e=>_.keys(e).length,keysInArray:e=>Object.keys(e),isFirefox:()=>navigator.userAgent.toLowerCase().indexOf("firefox")>-1}),t})());const a=(e=>{function t(){}function i(){}function o(){}function n(a){if(t.call(this),i.call(this),o.call(this),r.isArray(a)&&r.isElement(a[0])){for(let e=0;e<a.length;e++)this[e]=a[e];this.length=a.length}else if(r.isElement(a))this[0]=a,this.length=a?1:0;else if(r.isString(a)){const t=parseInt(a.split("#")[1],10);if(r.isNumber(t))this[0]=e.getElementById(t),this.length=this[0]?1:0;else{const t=e.querySelectorAll(a).length;for(let i=0;i<t;i++)this[i]=e.querySelectorAll(a)[i];this.length=t||0}}else this[0]=null,this.length=0}t.prototype={constructor:t,_ext:e=>new a(e)},i.prototype={constructor:i,ready(e){"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",e)}},o.prototype={constructor:o,fadeOut(e,t){const i=this.length;let r=this[0];if(1===i){const i=setInterval(()=>{r.style.opacity||(r.style.opacity=1),r.style.opacity>0?r.style.opacity-=.1:(clearInterval(i),t())},e/10)}else r=null}};const s={...t.prototype,...i.prototype,...o.prototype};return n.prototype=Object.assign(s,{constructor:n,parents(e){const t=[],i=void 0!==e;let r=this[0];for(;null!==(r=r.parentElement);)r.nodeType===Node.ELEMENT_NODE&&(i&&!r.matches(e)||t.push(r));return this._ext(t)},parent(){let e;return e=1===this.length?this[0].parentNode:null,this._ext(e)},children(e){let t;return 1===this.length?(t=this[0].children,e&&r.isString(e)&&r.isObject(t)&&(t=this[0].querySelector(e))):t=null,this._ext(t)},find(e){let t;return t=1===this.length?this[0].querySelector(e):null,this._ext(t)},addClass(e){const t=this.length;if(t>1)for(let i=0;i<t;i++)this[i].classList.add(e);else 1===t&&this[0].classList.add(e)},removeClass(e){const t=this.length;if(t>1)for(let i=0;i<t;i++)this[i].classList.remove(e);else 1===t&&this[0].classList.remove(e)},toggleClass(e){1===this.length&&this[0].classList.toggle(e)},hasClass(e){let t;return 1===this.length&&(t=this[0].classList.contains(e))},remove(){const e=this.length;if(e>1)for(let t=0;t<e;t++)this[t].parentNode.removeChild(this[t]);else 1===e&&this[0].parentNode.removeChild(this[0])},empty(){const e=this.length;if(e>1)for(let t=0;t<e;t++)for(;this[t].firstChild;)this[t].removeChild(this[t].firstChild);else if(1===e)for(;this[0].firstChild;)this[0].removeChild(this[0].firstChild)},prepend(e){const t=this.length;let i,a;if(t>1)for(let o=0;o<t;o++)if(r.isString(e)){a=(i=r.str2node(e)).length;for(let e=0;e<a;e++)this[o].insertBefore(i[a-e-1],this[o].firstChild)}else this[o].insertBefore(e,this[o].firstChild);else if(1===t)if(r.isString(e)){a=(i=r.str2node(e)).length;for(let e=0;e<a;e++)this[0].insertBefore(i[a-e-1],this[0].firstChild)}else this[0].insertBefore(e,this[0].firstChild)},append(e){const t=this.length;let i,a;if(t>1)for(let o=0;o<t;o++)if(r.isString(e)){a=(i=r.str2node(e)).length;for(let e=0;e<a;e++)this[o].appendChild(i[a-e-1])}else this[o].appendChild(e);else if(1===t)if(r.isString(e)){a=(i=r.str2node(e)).length;for(let e=0;e<a;e++)this[0].appendChild(i[a-e-1])}else this[0].appendChild(e)},css(e,t){function i(e,t,i){let a,o;a=e.match(/-/)?(o=e.split("-"))[0]+o[1][0].toUpperCase()+o[1].slice(1):e;const n=i.length,s=[];let l;if(n>1)for(let e=0;e<n;e++)i[e].style[a]=t,l=getComputedStyle(i[e]),s.push(l[a]);else if(1===n)return(r.isString(t)||r.isNumber(t))&&(i[0].style[a]=t),(l=getComputedStyle(i[0]))[a];return s}let a;if(r.isObject(e)){const t=r.keysInArray(e),a=t.length;let o,n;for(let r=0;r<a;r++)i(o=t[r],n=e[o],this)}else a=i(e,t,this);return a},attr(e,t){let i;return 1!==this.length?null:(r.isString(t)||r.isNumber(t)?(i=null,this[0].setAttribute(e,t)):i=this[0].getAttribute(e),i)},offset(){let t,i;return 1!==this.length?null:i={top:(t=this[0].getBoundingClientRect()).top+e.body.scrollTop,left:t.left+e.body.scrollLeft}},outerWidth(){let e;return 1!==this.length?null:e=this[0].offsetWidth},outerHeight(){let e;return 1!==this.length?null:e=this[0].offsetHeight},width(){let e;return 1!==this.length?null:e=parseFloat(getComputedStyle(this[0],null).width.replace("px",""))},height(){let e;return 1!==this.length?null:e=parseFloat(getComputedStyle(this[0],null).height.replace("px",""))},val(e){let t;return 1!==this.length?null:(r.isString(e)||r.isNumber(e)?this[0].value=e:t=this[0].value,t)}}),n})(document);var o=e=>new a(e),n=i(1),s=i.n(n);var l=new((()=>{function e(){this.config={only_draggable_flg:!1,no_zooming_flg:!1},this.ctxmenu={sub:{is_youtube_flg:!1}},this.canvas={multi_select_flg:!1,select:{is_multi_flg:!1},drag_flg:!1,rotate_flg:!1,resize_flg:!1,thumbtack_flg:!1,re:{left_top_flg:!1,right_top_flg:!1,right_bottom_flg:!1,left_bottom_flg:!1},ro:{left_top_flg:!1,right_top_flg:!1,right_bottom_flg:!1,left_bottom_flg:!1}},this.plain={active_mousewheel_flg:!1,tools:{is_active_flg:!1}},this.colpick={active_spuit_flg:!1,move_circle_flg:!1,tools:{is_active_flg:!1}},this.oekaki={move_wheelcircle_flg:!1,move_trianglecircle_flg:!1,tools:{is_active_flg:!1,brush_flg:!1,eraser_flg:!1}},this.ui={is_ui_flg:!1,toolbar:{is_active_flg:!1}}}return e.prototype={constructor:e,setFlgs(e){let t=o(e.target).parents(".file-wrap");0===t.length&&(t=o(e.target)),t.hasClass("file-wrap")&&(t.find(".only-draggable").length>0?this.config.only_draggable_flg=!0:this.config.only_draggable_flg=!1,t.children(".no-zooming").length>0?this.config.no_zooming_flg=!0:this.config.no_zooming_flg=!1,this.colpick.active_spuit_flg=!1,0===t.find("#toggle-colpick").length&&o("#toggle-colpick").hasClass("active")&&(this.colpick.active_spuit_flg=!0),this.canvas.thumbtack_flg=!1,t.find(".thumbtack-wrapper").hasClass("active")&&(this.canvas.thumbtack_flg=!0)),(e.target.closest(".re-left-top")||e.target.closest(".re-right-top")||e.target.closest(".re-right-bottom")||e.target.closest(".re-left-bottom"))&&(r.iframePointerNone(),this.canvas.resize_flg=!0,e.target.closest(".re-left-top")&&(this.canvas.re.left_top_flg=!0),e.target.closest(".re-right-top")&&(this.canvas.re.right_top_flg=!0),e.target.closest(".re-right-bottom")&&(this.canvas.re.right_bottom_flg=!0),e.target.closest(".re-left-bottom")&&(this.canvas.re.left_bottom_flg=!0)),(e.target.closest(".ro-left-top")||e.target.closest(".ro-right-top")||e.target.closest(".ro-right-bottom")||e.target.closest(".ro-left-bottom"))&&(r.iframePointerNone(),this.canvas.rotate_flg=!0,e.target.closest(".ro-left-top")&&(this.canvas.ro.left_top_flg=!0),e.target.closest(".ro-right-top")&&(this.canvas.ro.right_top_flg=!0),e.target.closest(".ro-right-bottom")&&(this.canvas.ro.right_bottom_flg=!0),e.target.closest(".ro-left-bottom")&&(this.canvas.ro.left_bottom_flg=!0)),(e.target.closest("#red-cir-colpick")||e.target.closest("#green-cir-colpick")||e.target.closest("#blue-cir-colpick"))&&(this.colpick.move_circle_flg=!0)},resetFlgs(){r.iframePointerReset(),!0===this.colpick.move_circle_flg&&(this.colpick.move_circle_flg=!1),!0===this.canvas.drag_flg&&(this.canvas.drag_flg=!1),!0===this.canvas.mousedown_flg&&(this.canvas.mousedown_flg=!1),!0===this.canvas.resize_flg&&(this.canvas.resize_flg=!1),!0===this.canvas.re.left_top_flg&&(this.canvas.re.left_top_flg=!1),!0===this.canvas.re.right_top_flg&&(this.canvas.re.right_top_flg=!1),!0===this.canvas.re.right_bottom_flg&&(this.canvas.re.right_bottom_flg=!1),!0===this.canvas.re.left_bottom_flg&&(this.canvas.re.left_bottom_flg=!1),!0===this.canvas.rotate_flg&&(this.canvas.rotate_flg=!1),!0===this.canvas.ro.left_top_flg&&(this.canvas.ro.left_top_flg=!1),!0===this.canvas.ro.right_top_flg&&(this.canvas.ro.right_top_flg=!1),!0===this.canvas.ro.right_bottom_flg&&(this.canvas.ro.right_bottom_flg=!1),!0===this.canvas.ro.left_bottom_flg&&(this.canvas.ro.left_bottom_flg=!1)}},e})());var c=(()=>{function e(e){this.$plain=o(e),this.$canvasEve=o("#canvas-eve"),this.param={pos:{left:0,top:0},relPos:{left:0,top:0}},this.flgs={mousewheel_avail_flg:!1}}return e.prototype=Object.assign({},{constructor:e,options:{BUTTON_FOR_LEFT:0,BUTTON_FOR_MIDDLE:1},load(){this.$plain.css("transition",s.a.IS_TRANSITION)},mouseDownEvent(e){this._setFlgs(e)},mouseUpEvent(){this._resetFlgs()},mouseMoveEvent(e){this._handleEvents(e)},_setFlgs(e){const{$plain:t}=this,i=e.button===this.options.BUTTON_FOR_LEFT&&!0===l.plain.tools.is_active_flg;this.param.relPos.left=e.clientX-t.offset().left,this.param.relPos.top=e.clientY-t.offset().top,!1!==l.ui.is_ui_flg||!i&&e.button!==this.options.BUTTON_FOR_MIDDLE||(l.plain.active_mousewheel_flg=!0)},_resetFlgs(){!0===l.plain.active_mousewheel_flg&&(r.iframePointerReset(),l.plain.active_mousewheel_flg=!1,o("#canvas-eve").removeClass("active-grabbing-mousewheel"))},_handleEvents(e){const{$plain:t}=this,{$canvasEve:i}=this;!0===l.plain.active_mousewheel_flg&&(r.iframePointerNone(),t.css({left:`${e.clientX-this.param.relPos.left}px`,top:`${e.clientY-this.param.relPos.top}px`}),i.addClass("active-grabbing-mousewheel"))}}),e})();var h=(e=>{function t(e){this.$zoom=o(e),this.i=1,this.xLast=0,this.yLast=0,this.xScreen=0,this.yScreen=0,this.xNew=0,this.yNew=0,this.xImage=0,this.yImage=0}return t.prototype=Object.assign({},{constructor:t,options:{},load(){this._init()},mouseWheelEvent(e){!1===l.ui.is_ui_flg&&this._setZoom(e)},_init(){const t={clientX:e.innerWidth/2,clientY:e.innerHeight/2};this._setZoom(t)},_setZoom(e){this.xScreen=e.clientX-o("#plain").offset().left,this.yScreen=e.clientY-o("#plain").offset().top,this.xImage+=(this.xScreen-this.xLast)/this.i,this.yImage+=(this.yScreen-this.yLast)/this.i,e.deltaY>0?this.i>10?(this.i=10,this.i-=.9):this.i>9?this.i-=.9:this.i>8?this.i-=.8:this.i>7?this.i-=.7:this.i>6?this.i-=.6:this.i>5?this.i-=.5:this.i>4?this.i-=.4:this.i>3?this.i-=.3:this.i>2?this.i-=.2:this.i>1?this.i-=.1:this.i>.9?this.i-=.09:this.i>.8?this.i-=.08:this.i>.7?this.i-=.07:this.i>.6?this.i-=.06:this.i>.5?this.i-=.05:this.i>.4?this.i-=.04:this.i>.3?this.i-=.03:this.i>.2?this.i-=.02:this.i>=.1?this.i-=.01:this.i=.09:this.i>10?this.i=10.9:this.i>9?this.i+=.9:this.i>8?this.i+=.8:this.i>7?this.i+=.7:this.i>6?this.i+=.6:this.i>5?this.i+=.5:this.i>4?this.i+=.4:this.i>3?this.i+=.3:this.i>2?this.i+=.2:this.i>1?this.i+=.1:this.i>.9?this.i+=.09:this.i>.8?this.i+=.08:this.i>.7?this.i+=.07:this.i>.6?this.i+=.06:this.i>.5?this.i+=.05:this.i>.4?this.i+=.04:this.i>.3?this.i+=.03:this.i>.2?this.i+=.02:this.i>.1?this.i+=.01:(this.i=.1,this.i+=.01),this.xNew=(this.xScreen-this.xImage)/this.i,this.yNew=(this.yScreen-this.yImage)/this.i,this.xLast=this.xScreen,this.yLast=this.yScreen,s.a.MOUSE_WHEEL_VAL=1/this.i,this.$zoom.css({transform:`scale(${this.i}) translate(${this.xNew}px, ${this.yNew}px)`,"transform-origin":`${this.xImage}px ${this.yImage}px`})}}),t})(window);var u=((e,t,i)=>{function a(e){const r=e.clientWidth,a=r/2,n=r/2*.15,s=a-n,l=.9*(a-n),u=o(e).offset().left+r/2,p=o(e).offset().top+r/2;this.Plain=new c(t.getElementById("c-oekaki-plain")),this.Zoom=new h(t.getElementById("c-oekaki-zoom")),this.$cOekaki=o("#c-oekaki"),this.$cOekaki.css({width:`${this.options.CANVAS_SIZE}px`,height:`${this.options.CANVAS_SIZE}px`}),this.$cOekakiPlain=o("#c-oekaki-plain"),this.$plain=o("#plain"),this.$cursorOekaki=o("#cursor-oekaki"),this.param={container:e,size:r,centerPos:{x:u,y:p},color:{hue:this.options.HUE,rgb:this.options.RGB}},this.colorWheel={radius:a,innerRadius:s,thickness:n},this.colorTriangle={radius:l,circlePos:{x:i.cos(2*i.PI/3)*l+r/2,y:i.sin(2*i.PI/3)*l+r/2}},this.oekakiParam={lastBrushPos:{x:0,y:0},isDrawing:!1,useTilt:!1,EPenButton:{tip:1,barrel:2,middle:4,eraser:32}},this.flgs={cOekaki:{draw_canvas_avail_flg:!1},oekaki:{move_wheelcircle_flg:!1,move_trianglecircle_flg:!1}},this.drawPointerEvents=["pointerdown","pointerup","pointercancel","pointermove","pointerover","pointerout","pointerenter","pointerleave","gotpointercapture","lostpointercapture"]}return a.prototype=Object.assign({},{constructor:a,options:{HUE:0,RGB:[0,0,0],THETA:0,BRUSH_SIZE:2,ERASER_SIZE:15,CANVAS_SIZE:1e4,CANVAS_RESOLUTION:5e3,CANVAS_RATIO:2,CANVAS_COLOR:"#32303f",CURSOR_COLOR:"#939399",CREATE_CANVAS_DELAY:200,BUTTON_FOR_LEFT:1,BUTTON_FOR_MIDDLE:4,BUTTON_FOR_RIGHT:2},load(){this.Plain.load(),this.Zoom.load(),this.drawWheel(),this.drawTriangle(),this.drawEvent()},mouseDownEvent(e){this.Plain.mouseDownEvent(e),this._setFlgs(e),this._handleEventMouseDown(e)},mouseUpEvent(){this.Plain.mouseUpEvent(),this._resetFlgs()},mouseMoveEvent(e){this.Plain.mouseMoveEvent(e),this._handleEventMouseMove(e),this._drawCursor(e)},mouseWheelEvent(e){this.Zoom.mouseWheelEvent(e),r.isFirefox()||!1!==l.ui.is_ui_flg||this._magicFix(e),this._drawCursor(e)},drawEvent(){if(e.PointerEvent)for(let e=0;e<this.drawPointerEvents.length;e++)t.addEventListener(this.drawPointerEvents[e],e=>{this._drawPointerEvents(e)},!1)},_setFlgs(e){if(e.target.closest("#color-oekaki")){const t=this._isWheelArea(e),i=this._isTriangleArea(e);t&&(this.flgs.oekaki.move_wheelcircle_flg=!0),i&&(this.flgs.oekaki.move_trianglecircle_flg=!0)}e.target.closest("#color-wheel-circle")&&(this.flgs.oekaki.move_wheelcircle_flg=!0),e.target.closest("#color-triangle-circle")&&(this.flgs.oekaki.move_trianglecircle_flg=!0)},_resetFlgs(){!0===this.flgs.oekaki.move_wheelcircle_flg&&(this.flgs.oekaki.move_wheelcircle_flg=!1),!0===this.flgs.oekaki.move_trianglecircle_flg&&(this.flgs.oekaki.move_trianglecircle_flg=!1)},_handleEventMouseDown(e){e.target.closest("#color-oekaki")&&e.buttons===this.options.BUTTON_FOR_LEFT&&(this._colorWheelArea(e),this._colorTriangleArea(e))},_handleEventMouseMove(e){const t=o(this.param.container).offset().left,i=o(this.param.container).offset().top,r=t+this.param.size/2,a=i+this.param.size/2;this.param.centerPos.x=r,this.param.centerPos.y=a,e.buttons===this.options.BUTTON_FOR_LEFT&&(!0===this.flgs.oekaki.move_wheelcircle_flg&&this._updateWheelCircle(e),!0===this.flgs.oekaki.move_trianglecircle_flg&&this._updateTriangleCircle(e))},_drawPointerEvents(e){if(!0===l.oekaki.tools.brush_flg||!0===l.oekaki.tools.eraser_flg){const t=this.$cOekaki;this._drawCanvasPointer(t,e)}},_drawEvents(e){if((!0===l.oekaki.tools.brush_flg||!0===l.oekaki.tools.eraser_flg)&&(e.target.closest(".oekaki-canvas")||e.target.closest(".selected"))){const t=o(e.target).parents(".file-wrap").find("canvas");this._drawCanvas(t,e)}},drawWheel(){const e=100-this.colorWheel.thickness/this.colorWheel.radius*100,i=t.getElementById("color-wheel");this._createWheelCircle(),this._generateConicGradiant(100,1,i),this._generateOverlay(100,e,i)},_generateOverlay(e,i,r){const a=t.createElementNS("http://www.w3.org/2000/svg","circle");a.setAttribute("cx",e),a.setAttribute("cy",e),a.setAttribute("r",i),a.setAttribute("fill",this.options.CANVAS_COLOR),r.appendChild(a)},_generateConicGradiant(e,i,r){for(let a=0;a<360*i;a++){const o=t.createElementNS("http://www.w3.org/2000/svg","path");o.setAttribute("d",this._describeArc(e,e,e,a/i,(a+2)/i)),o.setAttribute("fill",`hsl(${a/i}, 100%, 50%)`),r.appendChild(o)}},_describeArc(e,t,i,r,a){const o=this._polar2Cartesian(e,t,i,a),n=this._polar2Cartesian(e,t,i,r),s=a-r<=180?"0":"1";return["M",o.x,o.y,"A",i,i,0,s,0,n.x,n.y,"L",e,t,"L",o.x,o.y].join(" ")},_polar2Cartesian(e,t,r,a){const o=(a-90)*i.PI/180;return{x:e+r*i.cos(o),y:t+r*i.sin(o)}},_createWheelCircle(){const e=t.createElement("div"),r=this.colorWheel.innerRadius+this.colorWheel.thickness/2,a=r*i.cos(this.options.THETA+1.5*i.PI)+this.param.size/2,o=r*i.sin(this.options.THETA+1.5*i.PI)+this.param.size/2;e.id="color-wheel-circle",e.style.left=`${a}px`,e.style.top=`${o}px`,e.style.backgroundColor=`hsla(${i.round(this.options.HUE)}, 100%, 50%, 1)`,this.wheelCircle=e,this.param.container.appendChild(e)},_colorWheelArea(e){this._isWheelArea(e)&&this._updateWheelCircle(e)},_isWheelArea(e){const t=this.colorWheel.innerRadius,i=this.colorWheel.radius,a=r.getDistance(this.param.centerPos.x,this.param.centerPos.y,e.clientX,e.clientY);return a>t&&i>a},_updateWheelCircle(e){const t=this.wheelCircle,r=this.colorWheel.innerRadius+this.colorWheel.thickness/2,a=this._calculateTheta(e),n=r*i.cos(a)+this.param.size/2,s=r*i.sin(a)+this.param.size/2;t.style.left=`${n}px`,t.style.top=`${s}px`;const l=this._calculateHue(e);this.param.color.hue=l,this._updateTriangle(e),o("#color-wheel-circle").css("background-color",`hsla(${i.round(this.param.color.hue)}, 100%, 50%, 1)`)},_calculateTheta(e){return(i.atan2(e.clientY-this.param.centerPos.y,e.clientX-this.param.centerPos.x)/i.PI*180+(i.atan2(e.clientY-this.param.centerPos.y,e.clientX-this.param.centerPos.x)>0?0:360))/180*i.PI},_calculateHue(e){return i.atan2(e.clientY-this.param.centerPos.y,e.clientX-this.param.centerPos.x)/i.PI*180+90+(i.atan2(e.clientY-this.param.centerPos.y,e.clientX-this.param.centerPos.x)/i.PI*180+90>0?0:360)},drawTriangle(){this._createTriangle(),this._createTriangleCircle(),this._initTriangle(),this._getTriangleColor()},_initTriangle(){const e=this.triangleCtx,t=i.cos(2*i.PI/3)*this.colorTriangle.radius,r=i.sin(2*i.PI/3)*this.colorTriangle.radius;e.clearRect(0,0,this.param.size,this.param.size),e.save(),e.translate(this.colorWheel.radius,this.colorWheel.radius),e.beginPath(),e.moveTo(t,r),e.lineTo(this.colorTriangle.radius,0),e.lineTo(t,-r),e.closePath(),e.stroke(),e.clip(),e.fillRect(-this.colorWheel.radius,-this.colorWheel.radius,this.param.size,this.param.size);const a=e.createLinearGradient(this.colorTriangle.radius,0,t,0),o=`hsla(${i.round(this.param.color.hue)}, 100%, 50%, `;a.addColorStop(0,`${o}1)`),a.addColorStop(1,`${o}0)`),e.fillStyle=a,e.fillRect(-this.colorWheel.radius,-this.colorWheel.radius,this.param.size,this.param.size);const n=e.createLinearGradient(t,-r,(t+this.colorTriangle.radius)/2,r/2);n.addColorStop(0,"rgba(255, 255, 255, 1)"),n.addColorStop(1,"rgba(255, 255, 255, 0)"),e.globalCompositeOperation="lighter",e.fillStyle=n,e.fillRect(-this.colorWheel.radius,-this.colorWheel.radius,this.param.size,this.param.size),e.restore()},_updateTriangle(){this._initTriangle(),this._setRgb("#color-triangle-circle")},_createTriangle(){const e=t.createElement("canvas");e.id="color-triangle",e.width=this.param.size,e.height=this.param.size;const i=e.getContext("2d");this.triangleCtx=i,this.param.container.appendChild(e)},_createTriangleCircle(){const e=t.createElement("div");e.id="color-triangle-circle",e.style.left=`${this.colorTriangle.circlePos.x}px`,e.style.top=`${this.colorTriangle.circlePos.y}px`,this.triangleCircle=e,this.param.container.appendChild(e),this._setRgb("#color-triangle-circle")},_colorTriangleArea(e){this._isTriangleArea(e)&&this._updateTriangleCircle(e)},_isTriangleArea(e){const t=e.clientX-this.param.centerPos.x,r=e.clientY-this.param.centerPos.y,a=i.cos(2*i.PI/3)*this.colorTriangle.radius,o=this.colorTriangle.radius,n=(-t+o)/i.sqrt(3);return t>a&&o>t&&i.abs(r)>=0&&n>=i.abs(r)},_updateTriangleCircle(e){const t=e.clientX-this.param.centerPos.x,r=e.clientY-this.param.centerPos.y,a=i.cos(2*i.PI/3)*this.colorTriangle.radius,n=this.colorTriangle.radius;let s=(t-n)/i.sqrt(3),l=(-t+n)/i.sqrt(3);s=t<=a?-i.sin(2*i.PI/3)*this.colorTriangle.radius:s,l=t<=a?i.sin(2*i.PI/3)*this.colorTriangle.radius:l;const c=this.triangleCircle,h=o(this.param.container),u=h.offset().left,p=h.offset().top,d=e.clientX-u,f=e.clientY-p;a<t&&t<n?(c.style.left=`${d}px`,c.style.top=r>=l?`${l+this.param.size/2}px`:s>=r?`${s+this.param.size/2}px`:`${f}px`):t<=a?(c.style.left=`${a+this.param.size/2}px`,c.style.top=l<=r?`${l+this.param.size/2}px`:r<=s?`${s+this.param.size/2}px`:`${f}px`):n<=t&&(c.style.left=`${n+this.param.size/2}px`,c.style.top=`${this.param.size/2}px`),this.colorTriangle.circlePos.x=c.style.left.replace("px",""),this.colorTriangle.circlePos.y=c.style.top.replace("px",""),this._setRgb("#color-triangle-circle")},_setRgb(e){const t=this._getTriangleColor(),i=t[0],r=t[1],a=t[2];this.param.color.rgb=[i,r,a],o(e).css("background-color",`rgb(${i},${r},${a})`)},_getRgba(e,t){const i=this.triangleCtx.getImageData(e,t,1,1);return[i.data[0],i.data[1],i.data[2],i.data[3]]},_getTriangleColor(){const e=this.colorTriangle.circlePos.x-this.param.size/2,t=this.colorTriangle.circlePos.y-this.param.size/2,a=i.cos(2*i.PI/3)*this.colorTriangle.radius,o=i.sin(2*i.PI/3)*this.colorTriangle.radius,n=-i.tan(i.PI/6)*e-t-o+i.tan(i.PI/6)*a,s=i.abs(n)*i.sin(i.PI/3),l=3*this.colorTriangle.radius/2,c=[this.param.color.hue/360,1,.5],h=r.hsl2rgb(c),u=[255,255,255],p=[];let d;for(let t=0;t<3;t++)d=u[t]*(l-s)/l+h[t]*(l-(this.colorTriangle.radius-e))/l,d=i.abs(i.round(d)),p.push(d);return p},_drawCanvasPointer(e,t){const r=e[0].getContext("2d"),a=e[0].getBoundingClientRect();!1===this.flgs.cOekaki.draw_canvas_avail_flg&&(this._initCanvas(r),this.flgs.cOekaki.draw_canvas_avail_flg=!0);const o=t.clientX,n=t.clientY,c={x:i.floor((o-a.left)*s.a.MOUSE_WHEEL_VAL/this.options.CANVAS_RATIO),y:i.floor((n-a.top)*s.a.MOUSE_WHEEL_VAL/this.options.CANVAS_RATIO)};let h=this.options.BRUSH_SIZE;const u=`rgba(${this.param.color.rgb[0]},${this.param.color.rgb[1]},${this.param.color.rgb[2]},1.0)`;if(t.pointerType){switch(t.pointerType){case"touch":case"pen":r.strokeStyle=u,r.lineWidth=h;break;case"mouse":r.strokeStyle=u,r.lineWidth=h,t.buttons!==this.oekakiParam.EPenButton.barrel&&t.buttons!==this.oekakiParam.EPenButton.middle||(h=0,r.lineWidth=0)}switch(!0===l.oekaki.tools.eraser_flg||t.buttons===this.oekakiParam.EPenButton.eraser?(r.lineWidth=this.options.ERASER_SIZE,r.globalCompositeOperation="destination-out"):r.globalCompositeOperation="source-over",t.type){case"pointerdown":t.target.closest("#reset-res")?this.oekakiParam.isDrawing=!0:this.oekakiParam.isDrawing=!1,this.oekakiParam.lastBrushPos=c;break;case"pointerup":this.oekakiParam.isDrawing=!1;break;case"pointermove":if(!this.oekakiParam.isDrawing)return;if(h>0){r.beginPath(),r.lineCap="round",r.moveTo(this.oekakiParam.lastBrushPos.x,this.oekakiParam.lastBrushPos.y);const e=this._midPointBetween(this.oekakiParam.lastBrushPos,c);r.quadraticCurveTo(this.oekakiParam.lastBrushPos.x,this.oekakiParam.lastBrushPos.y,e.x,e.y),r.lineTo(c.x,c.y),r.stroke()}this.oekakiParam.lastBrushPos=c}}},_drawCanvas(e,t){const i=e[0].getContext("2d"),r=e.getBoundingClientRect(),a=t.clientX,o=t.clientY,n={x:(a-r.left)*s.a.MOUSE_WHEEL_VAL/this.options.CANVAS_RATIO,y:(o-r.top)*s.a.MOUSE_WHEEL_VAL/this.options.CANVAS_RATIO};if(void 0===n.x||void 0===n.y)return void console.log("WARNING: undefined position");const l=this.options.BRUSH_SIZE;switch(t.type){case"mousedown":case"MSPointerDown":case"touchStart":this.oekakiParam.isDrawing=!0,this.oekakiParam.lastBrushPos=n;break;case"mouseup":case"MSPointerUp":case"touchEnd":this.oekakiParam.isDrawing=!1;break;case"mousemove":case"MSPointerMove":case"touchmove":if(this.oekakiParam.isDrawing){i.lineWidth=l,i.beginPath(),i.lineCap="round",i.moveTo(this.oekakiParam.lastBrushPos.x,this.oekakiParam.lastBrushPos.y);const{midPoint:e}=this._midPointBetween(this.oekakiParam.lastBrushPos,n);i.quadraticCurveTo(this.oekakiParam.lastBrushPos.x,this.oekakiParam.lastBrushPos.y,e.x,e.y),i.lineTo(n.x,n.y),i.stroke()}this.oekakiParam.lastBrushPos=n}},_initCanvas(e){const t=this.options.CANVAS_RESOLUTION,i=this.options.CANVAS_RESOLUTION;e.canvas.width=t,e.canvas.height=i},_magicFix(e){const{left:t}=this.$cOekakiPlain.offset(),{top:i}=this.$cOekakiPlain.offset(),r=e.deltaY;s.a.MOUSE_WHEEL_VAL>.092&&s.a.MOUSE_WHEEL_VAL<11&&(r>0?(this.$cOekakiPlain.css({left:`${t-.5}px`,top:`${i-.5}px`}),this.$plain.css({left:`${t-.5}px`,top:`${i-.5}px`})):(this.$cOekakiPlain.css({left:`${t+.5}px`,top:`${i+.5}px`}),this.$plain.css({left:`${t+.5}px`,top:`${i+.5}px`})))},_midPointBetween:(e,t)=>({x:e.x+(t.x-e.x)/2,y:e.y+(t.y-e.y)/2}),_drawCursor(t){const{$cursorOekaki:r}=this,a=r[0].getContext("2d"),o=r[0].getBoundingClientRect(),n=t.clientX,c=t.clientY,h={x:n-o.left,y:c-o.top};a.canvas.width=e.innerWidth,a.canvas.height=e.innerHeight,a.clearRect(0,0,e.innerWidth,e.innerHeight),!0===l.oekaki.tools.is_active_flg&&t.buttons!==this.options.BUTTON_FOR_MIDDLE&&(a.beginPath(),!0===l.oekaki.tools.brush_flg?a.arc(h.x,h.y,this.options.BRUSH_SIZE/s.a.MOUSE_WHEEL_VAL,0,2*i.PI):!0===l.oekaki.tools.eraser_flg&&a.arc(h.x,h.y,this.options.ERASER_SIZE/s.a.MOUSE_WHEEL_VAL,0,2*i.PI),a.strokeStyle=this.options.CURSOR_COLOR,a.stroke())}}),a})(window,document,Math),p=i(0),d=i(2),f=function(e,t){var i,r,a,o,n;this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new p.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:p.MOUSE.ROTATE,MIDDLE:p.MOUSE.DOLLY,RIGHT:p.MOUSE.PAN},this.touches={ONE:p.TOUCH.ROTATE,TWO:p.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return g.phi},this.getAzimuthalAngle=function(){return g.theta},this.saveState=function(){s.target0.copy(s.target),s.position0.copy(s.object.position),s.zoom0=s.object.zoom},this.reset=function(){s.target.copy(s.target0),s.object.position.copy(s.position0),s.object.zoom=s.zoom0,s.object.updateProjectionMatrix(),s.dispatchEvent(l),s.update(),d=u.NONE},this.update=(i=new p.Vector3,r=(new p.Quaternion).setFromUnitVectors(e.up,new p.Vector3(0,1,0)),a=r.clone().inverse(),o=new p.Vector3,n=new p.Quaternion,function(){var e=s.object.position;return i.copy(e).sub(s.target),i.applyQuaternion(r),g.setFromVector3(i),s.autoRotate&&d===u.NONE&&C(2*Math.PI/60/60*s.autoRotateSpeed),s.enableDamping?(g.theta+=m.theta*s.dampingFactor,g.phi+=m.phi*s.dampingFactor):(g.theta+=m.theta,g.phi+=m.phi),g.theta=Math.max(s.minAzimuthAngle,Math.min(s.maxAzimuthAngle,g.theta)),g.phi=Math.max(s.minPolarAngle,Math.min(s.maxPolarAngle,g.phi)),g.makeSafe(),g.radius*=v,g.radius=Math.max(s.minDistance,Math.min(s.maxDistance,g.radius)),!0===s.enableDamping?s.target.addScaledVector(y,s.dampingFactor):s.target.add(y),i.setFromSpherical(g),i.applyQuaternion(a),e.copy(s.target).add(i),s.object.lookAt(s.target),!0===s.enableDamping?(m.theta*=1-s.dampingFactor,m.phi*=1-s.dampingFactor,y.multiplyScalar(1-s.dampingFactor)):(m.set(0,0,0),y.set(0,0,0)),v=1,!!(_||o.distanceToSquared(s.object.position)>f||8*(1-n.dot(s.object.quaternion))>f)&&(s.dispatchEvent(l),o.copy(s.object.position),n.copy(s.object.quaternion),_=!1,!0)}),this.dispose=function(){s.domElement.removeEventListener("contextmenu",ee,!1),s.domElement.removeEventListener("mousedown",G,!1),s.domElement.removeEventListener("wheel",K,!1),s.domElement.removeEventListener("touchstart",Q,!1),s.domElement.removeEventListener("touchend",J,!1),s.domElement.removeEventListener("touchmove",q,!1),document.removeEventListener("mousemove",X,!1),document.removeEventListener("mouseup",Y,!1),window.removeEventListener("keydown",Z,!1)};var s=this,l={type:"change"},c={type:"start"},h={type:"end"},u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},d=u.NONE,f=1e-6,g=new p.Spherical,m=new p.Spherical,v=1,y=new p.Vector3,_=!1,b=new p.Vector2,A=new p.Vector2,E=new p.Vector2,w=new p.Vector2,x=new p.Vector2,T=new p.Vector2,I=new p.Vector2,L=new p.Vector2,S=new p.Vector2;function M(){return Math.pow(.95,s.zoomSpeed)}function C(e){m.theta-=e}function k(e){m.phi-=e}var R,P=(R=new p.Vector3,function(e,t){R.setFromMatrixColumn(t,0),R.multiplyScalar(-e),y.add(R)}),O=function(){var e=new p.Vector3;return function(t,i){!0===s.screenSpacePanning?e.setFromMatrixColumn(i,1):(e.setFromMatrixColumn(i,0),e.crossVectors(s.object.up,e)),e.multiplyScalar(t),y.add(e)}}(),U=function(){var e=new p.Vector3;return function(t,i){var r=s.domElement===document?s.domElement.body:s.domElement;if(s.object.isPerspectiveCamera){var a=s.object.position;e.copy(a).sub(s.target);var o=e.length();o*=Math.tan(s.object.fov/2*Math.PI/180),P(2*t*o/r.clientHeight,s.object.matrix),O(2*i*o/r.clientHeight,s.object.matrix)}else s.object.isOrthographicCamera?(P(t*(s.object.right-s.object.left)/s.object.zoom/r.clientWidth,s.object.matrix),O(i*(s.object.top-s.object.bottom)/s.object.zoom/r.clientHeight,s.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),s.enablePan=!1)}}();function F(e){s.object.isPerspectiveCamera?v/=e:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom*e)),s.object.updateProjectionMatrix(),_=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function D(e){s.object.isPerspectiveCamera?v*=e:s.object.isOrthographicCamera?(s.object.zoom=Math.max(s.minZoom,Math.min(s.maxZoom,s.object.zoom/e)),s.object.updateProjectionMatrix(),_=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),s.enableZoom=!1)}function B(e){b.set(e.clientX,e.clientY)}function N(e){w.set(e.clientX,e.clientY)}function H(e){if(1==e.touches.length)b.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);b.set(t,i)}}function V(e){if(1==e.touches.length)w.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);w.set(t,i)}}function $(e){var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+i*i);I.set(0,r)}function W(e){if(1==e.touches.length)A.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);A.set(t,i)}E.subVectors(A,b).multiplyScalar(s.rotateSpeed);var r=s.domElement===document?s.domElement.body:s.domElement;C(2*Math.PI*E.x/r.clientHeight),k(2*Math.PI*E.y/r.clientHeight),b.copy(A)}function z(e){if(1==e.touches.length)x.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),i=.5*(e.touches[0].pageY+e.touches[1].pageY);x.set(t,i)}T.subVectors(x,w).multiplyScalar(s.panSpeed),U(T.x,T.y),w.copy(x)}function j(e){var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+i*i);L.set(0,r),S.set(0,Math.pow(L.y/I.y,s.zoomSpeed)),F(S.y),I.copy(L)}function G(e){if(!1!==s.enabled){switch(e.preventDefault(),s.domElement.focus?s.domElement.focus():window.focus(),e.button){case 0:switch(s.mouseButtons.LEFT){case p.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===s.enablePan)return;N(e),d=u.PAN}else{if(!1===s.enableRotate)return;B(e),d=u.ROTATE}break;case p.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===s.enableRotate)return;B(e),d=u.ROTATE}else{if(!1===s.enablePan)return;N(e),d=u.PAN}break;default:d=u.NONE}break;case 1:switch(s.mouseButtons.MIDDLE){case p.MOUSE.DOLLY:if(!1===s.enableZoom)return;d=u.NONE;break;default:d=u.NONE}break;case 2:switch(s.mouseButtons.RIGHT){case p.MOUSE.ROTATE:if(!1===s.enableRotate)return;B(e),d=u.ROTATE;break;case p.MOUSE.PAN:if(!1===s.enablePan)return;N(e),d=u.PAN;break;default:d=u.NONE}}d!==u.NONE&&(document.addEventListener("mousemove",X,!1),document.addEventListener("mouseup",Y,!1),s.dispatchEvent(c))}}function X(e){if(!1!==s.enabled)switch(e.preventDefault(),d){case u.ROTATE:if(!1===s.enableRotate)return;!function(e){A.set(e.clientX,e.clientY),E.subVectors(A,b).multiplyScalar(s.rotateSpeed);var t=s.domElement===document?s.domElement.body:s.domElement;C(2*Math.PI*E.x/t.clientHeight),k(2*Math.PI*E.y/t.clientHeight),b.copy(A),s.update()}(e);break;case u.DOLLY:if(!1===s.enableZoom)return;!function(e){L.set(e.clientX,e.clientY),S.subVectors(L,I),S.y>0?F(M()):S.y<0&&D(M()),I.copy(L),s.update()}(e);break;case u.PAN:if(!1===s.enablePan)return;!function(e){x.set(e.clientX,e.clientY),T.subVectors(x,w).multiplyScalar(s.panSpeed),U(T.x,T.y),w.copy(x),s.update()}(e)}}function Y(e){!1!==s.enabled&&(document.removeEventListener("mousemove",X,!1),document.removeEventListener("mouseup",Y,!1),s.dispatchEvent(h),d=u.NONE)}function K(e){!1===s.enabled||!1===s.enableZoom||d!==u.NONE&&d!==u.ROTATE||(e.preventDefault(),e.stopPropagation(),s.dispatchEvent(c),function(e){e.deltaY<0?D(M()):e.deltaY>0&&F(M()),s.update()}(e),s.dispatchEvent(h))}function Z(e){!1!==s.enabled&&!1!==s.enableKeys&&!1!==s.enablePan&&function(e){var t=!1;switch(e.keyCode){case s.keys.UP:U(0,s.keyPanSpeed),t=!0;break;case s.keys.BOTTOM:U(0,-s.keyPanSpeed),t=!0;break;case s.keys.LEFT:U(s.keyPanSpeed,0),t=!0;break;case s.keys.RIGHT:U(-s.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),s.update())}(e)}function Q(e){if(!1!==s.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(s.touches.ONE){case p.TOUCH.ROTATE:if(!1===s.enableRotate)return;H(e),d=u.TOUCH_ROTATE;break;case p.TOUCH.PAN:if(!1===s.enablePan)return;V(e),d=u.TOUCH_PAN;break;default:d=u.NONE}break;case 2:switch(s.touches.TWO){case p.TOUCH.DOLLY_PAN:if(!1===s.enableZoom&&!1===s.enablePan)return;!function(e){s.enableZoom&&$(e),s.enablePan&&V(e)}(e),d=u.TOUCH_DOLLY_PAN;break;case p.TOUCH.DOLLY_ROTATE:if(!1===s.enableZoom&&!1===s.enableRotate)return;!function(e){s.enableZoom&&$(e),s.enableRotate&&H(e)}(e),d=u.TOUCH_DOLLY_ROTATE;break;default:d=u.NONE}break;default:d=u.NONE}d!==u.NONE&&s.dispatchEvent(c)}}function q(e){if(!1!==s.enabled)switch(e.preventDefault(),e.stopPropagation(),d){case u.TOUCH_ROTATE:if(!1===s.enableRotate)return;W(e),s.update();break;case u.TOUCH_PAN:if(!1===s.enablePan)return;z(e),s.update();break;case u.TOUCH_DOLLY_PAN:if(!1===s.enableZoom&&!1===s.enablePan)return;!function(e){s.enableZoom&&j(e),s.enablePan&&z(e)}(e),s.update();break;case u.TOUCH_DOLLY_ROTATE:if(!1===s.enableZoom&&!1===s.enableRotate)return;!function(e){s.enableZoom&&j(e),s.enableRotate&&W(e)}(e),s.update();break;default:d=u.NONE}}function J(e){!1!==s.enabled&&(s.dispatchEvent(h),d=u.NONE)}function ee(e){!1!==s.enabled&&e.preventDefault()}s.domElement.addEventListener("contextmenu",ee,!1),s.domElement.addEventListener("mousedown",G,!1),s.domElement.addEventListener("wheel",K,!1),s.domElement.addEventListener("touchstart",Q,!1),s.domElement.addEventListener("touchend",J,!1),s.domElement.addEventListener("touchmove",q,!1),window.addEventListener("keydown",Z,!1),this.update()};(f.prototype=Object.create(p.EventDispatcher.prototype)).constructor=f;var g=function(e,t){f.call(this,e,t),this.mouseButtons.LEFT=p.MOUSE.PAN,this.mouseButtons.RIGHT=p.MOUSE.ROTATE,this.touches.ONE=p.TOUCH.PAN,this.touches.TWO=p.TOUCH.DOLLY_ROTATE};(g.prototype=Object.create(p.EventDispatcher.prototype)).constructor=g;
/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */
var m={},v=void 0,y=m;function b(e,t){var i,r=e.split("."),a=y;!(r[0]in a)&&a.execScript&&a.execScript("var "+r[0]);for(;r.length&&(i=r.shift());)r.length||t===v?a=a[i]?a[i]:a[i]={}:a[i]=t}var A="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function E(e){var t,i,r,a,o,n,s,l,c,h,u=e.length,p=0,d=Number.POSITIVE_INFINITY;for(l=0;l<u;++l)e[l]>p&&(p=e[l]),e[l]<d&&(d=e[l]);for(t=1<<p,i=new(A?Uint32Array:Array)(t),r=1,a=0,o=2;r<=p;){for(l=0;l<u;++l)if(e[l]===r){for(n=0,s=a,c=0;c<r;++c)n=n<<1|1&s,s>>=1;for(h=r<<16|l,c=n;c<t;c+=o)i[c]=h;++a}++r,a<<=1,o<<=1}return[i,p,d]}function w(e,t){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=A?new Uint8Array(e):e,this.m=!1,this.i=T,this.r=!1,!t&&(t={})||(t.index&&(this.a=t.index),t.bufferSize&&(this.h=t.bufferSize),t.bufferType&&(this.i=t.bufferType),t.resize&&(this.r=t.resize)),this.i){case x:this.b=32768,this.c=new(A?Uint8Array:Array)(32768+this.h+258);break;case T:this.b=0,this.c=new(A?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var x=0,T=1,I={t:x,s:T};w.prototype.k=function(){for(;!this.m;){var e=G(this,3);switch(1&e&&(this.m=!0),e>>>=1){case 0:var t=this.input,i=this.a,r=this.c,a=this.b,o=t.length,n=v,s=r.length,l=v;if(this.d=this.f=0,i+1>=o)throw Error("invalid uncompressed block header: LEN");if(n=t[i++]|t[i++]<<8,i+1>=o)throw Error("invalid uncompressed block header: NLEN");if(n===~(t[i++]|t[i++]<<8))throw Error("invalid uncompressed block header: length verify");if(i+n>t.length)throw Error("input buffer is broken");switch(this.i){case x:for(;a+n>r.length;){if(n-=l=s-a,A)r.set(t.subarray(i,i+l),a),a+=l,i+=l;else for(;l--;)r[a++]=t[i++];this.b=a,r=this.e(),a=this.b}break;case T:for(;a+n>r.length;)r=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(A)r.set(t.subarray(i,i+n),a),a+=n,i+=n;else for(;n--;)r[a++]=t[i++];this.a=i,this.b=a,this.c=r;break;case 1:this.j(W,j);break;case 2:var c,h,u,p,d=G(this,5)+257,f=G(this,5)+1,g=G(this,4)+4,m=new(A?Uint8Array:Array)(C.length),y=v,_=v,b=v,w=v,I=v;for(I=0;I<g;++I)m[C[I]]=G(this,3);if(!A)for(I=g,g=m.length;I<g;++I)m[C[I]]=0;for(c=E(m),y=new(A?Uint8Array:Array)(d+f),I=0,p=d+f;I<p;)switch(_=X(this,c),_){case 16:for(w=3+G(this,2);w--;)y[I++]=b;break;case 17:for(w=3+G(this,3);w--;)y[I++]=0;b=0;break;case 18:for(w=11+G(this,7);w--;)y[I++]=0;b=0;break;default:b=y[I++]=_}h=E(A?y.subarray(0,d):y.slice(0,d)),u=E(A?y.subarray(d):y.slice(d)),this.j(h,u);break;default:throw Error("unknown BTYPE: "+e)}}return this.n()};var L,S,M=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],C=A?new Uint16Array(M):M,k=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],R=A?new Uint16Array(k):k,P=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],O=A?new Uint8Array(P):P,U=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],F=A?new Uint16Array(U):U,D=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=A?new Uint8Array(D):D,N=new(A?Uint8Array:Array)(288);for(L=0,S=N.length;L<S;++L)N[L]=143>=L?8:255>=L?9:279>=L?7:8;var H,V,W=E(N),z=new(A?Uint8Array:Array)(30);for(H=0,V=z.length;H<V;++H)z[H]=5;var j=E(z);function G(e,t){for(var i,r=e.f,a=e.d,o=e.input,n=e.a,s=o.length;a<t;){if(n>=s)throw Error("input buffer is broken");r|=o[n++]<<a,a+=8}return i=r&(1<<t)-1,e.f=r>>>t,e.d=a-t,e.a=n,i}function X(e,t){for(var i,r,a=e.f,o=e.d,n=e.input,s=e.a,l=n.length,c=t[0],h=t[1];o<h&&!(s>=l);)a|=n[s++]<<o,o+=8;if((r=(i=c[a&(1<<h)-1])>>>16)>o)throw Error("invalid code length: "+r);return e.f=a>>r,e.d=o-r,e.a=s,65535&i}function Y(e,t){var i,r;switch(this.input=e,this.a=0,!t&&(t={})||(t.index&&(this.a=t.index),t.verify&&(this.A=t.verify)),i=e[this.a++],r=e[this.a++],15&i){case K:this.method=K;break;default:throw Error("unsupported compression method")}if(0!=((i<<8)+r)%31)throw Error("invalid fcheck flag:"+((i<<8)+r)%31);if(32&r)throw Error("fdict flag is not supported");this.q=new w(e,{index:this.a,bufferSize:t.bufferSize,bufferType:t.bufferType,resize:t.resize})}w.prototype.j=function(e,t){var i=this.c,r=this.b;this.o=e;for(var a,o,n,s,l=i.length-258;256!==(a=X(this,e));)if(256>a)r>=l&&(this.b=r,i=this.e(),r=this.b),i[r++]=a;else for(s=R[o=a-257],0<O[o]&&(s+=G(this,O[o])),a=X(this,t),n=F[a],0<B[a]&&(n+=G(this,B[a])),r>=l&&(this.b=r,i=this.e(),r=this.b);s--;)i[r]=i[r++-n];for(;8<=this.d;)this.d-=8,this.a--;this.b=r},w.prototype.w=function(e,t){var i=this.c,r=this.b;this.o=e;for(var a,o,n,s,l=i.length;256!==(a=X(this,e));)if(256>a)r>=l&&(l=(i=this.e()).length),i[r++]=a;else for(s=R[o=a-257],0<O[o]&&(s+=G(this,O[o])),a=X(this,t),n=F[a],0<B[a]&&(n+=G(this,B[a])),r+s>l&&(l=(i=this.e()).length);s--;)i[r]=i[r++-n];for(;8<=this.d;)this.d-=8,this.a--;this.b=r},w.prototype.e=function(){var e,t,i=new(A?Uint8Array:Array)(this.b-32768),r=this.b-32768,a=this.c;if(A)i.set(a.subarray(32768,i.length));else for(e=0,t=i.length;e<t;++e)i[e]=a[e+32768];if(this.g.push(i),this.l+=i.length,A)a.set(a.subarray(r,r+32768));else for(e=0;32768>e;++e)a[e]=a[r+e];return this.b=32768,a},w.prototype.z=function(e){var t,i,r,a=this.input.length/this.a+1|0,o=this.input,n=this.c;return e&&("number"==typeof e.p&&(a=e.p),"number"==typeof e.u&&(a+=e.u)),2>a?i=(r=(o.length-this.a)/this.o[2]/2*258|0)<n.length?n.length+r:n.length<<1:i=n.length*a,A?(t=new Uint8Array(i)).set(n):t=n,this.c=t},w.prototype.n=function(){var e,t,i,r,a,o=0,n=this.c,s=this.g,l=new(A?Uint8Array:Array)(this.l+(this.b-32768));if(0===s.length)return A?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(t=0,i=s.length;t<i;++t)for(r=0,a=(e=s[t]).length;r<a;++r)l[o++]=e[r];for(t=32768,i=this.b;t<i;++t)l[o++]=n[t];return this.g=[],this.buffer=l},w.prototype.v=function(){var e,t=this.b;return A?this.r?(e=new Uint8Array(t)).set(this.c.subarray(0,t)):e=this.c.subarray(0,t):(this.c.length>t&&(this.c.length=t),e=this.c),this.buffer=e},Y.prototype.k=function(){var e,t,i=this.input;if(e=this.q.k(),this.a=this.q.a,this.A){t=(i[this.a++]<<24|i[this.a++]<<16|i[this.a++]<<8|i[this.a++])>>>0;var r=e;if("string"==typeof r){var a,o,n=r.split("");for(a=0,o=n.length;a<o;a++)n[a]=(255&n[a].charCodeAt(0))>>>0;r=n}for(var s,l=1,c=0,h=r.length,u=0;0<h;){h-=s=1024<h?1024:h;do{c+=l+=r[u++]}while(--s);l%=65521,c%=65521}if(t!==(c<<16|l)>>>0)throw Error("invalid adler-32 checksum")}return e};var K=8;b("Zlib.Inflate",Y),b("Zlib.Inflate.prototype.decompress",Y.prototype.k);var Z,Q,q,J,ee={ADAPTIVE:I.s,BLOCK:I.t};if(Object.keys)Z=Object.keys(ee);else for(Q in Z=[],q=0,ee)Z[q++]=Q;for(q=0,J=Z.length;q<J;++q)b("Zlib.Inflate.BufferType."+(Q=Z[q]),ee[Q]);var te=m.Zlib,ie={findSpan:function(e,t,i){var r=i.length-e-1;if(t>=i[r])return r-1;if(t<=i[e])return e;for(var a=e,o=r,n=Math.floor((a+o)/2);t<i[n]||t>=i[n+1];)t<i[n]?o=n:a=n,n=Math.floor((a+o)/2);return n},calcBasisFunctions:function(e,t,i,r){var a=[],o=[],n=[];a[0]=1;for(var s=1;s<=i;++s){o[s]=t-r[e+1-s],n[s]=r[e+s]-t;for(var l=0,c=0;c<s;++c){var h=n[c+1],u=o[s-c],p=a[c]/(h+u);a[c]=l+h*p,l=u*p}a[s]=l}return a},calcBSplinePoint:function(e,t,i,r){for(var a=this.findSpan(e,r,t),o=this.calcBasisFunctions(a,r,e,t),n=new p.Vector4(0,0,0,0),s=0;s<=e;++s){var l=i[a-e+s],c=o[s],h=l.w*c;n.x+=l.x*h,n.y+=l.y*h,n.z+=l.z*h,n.w+=l.w*c}return n},calcBasisFunctionDerivatives:function(e,t,i,r,a){for(var o=[],n=0;n<=i;++n)o[n]=0;var s=[];for(n=0;n<=r;++n)s[n]=o.slice(0);var l=[];for(n=0;n<=i;++n)l[n]=o.slice(0);l[0][0]=1;for(var c=o.slice(0),h=o.slice(0),u=1;u<=i;++u){c[u]=t-a[e+1-u],h[u]=a[e+u]-t;for(var p=0,d=0;d<u;++d){var f=h[d+1],g=c[u-d];l[u][d]=f+g;var m=l[d][u-1]/l[u][d];l[d][u]=p+f*m,p=g*m}l[u][u]=p}for(u=0;u<=i;++u)s[0][u]=l[u][i];for(d=0;d<=i;++d){var v=0,y=1,_=[];for(n=0;n<=i;++n)_[n]=o.slice(0);_[0][0]=1;for(var b=1;b<=r;++b){var A=0,E=d-b,w=i-b;d>=b&&(_[y][0]=_[v][0]/l[w+1][E],A=_[y][0]*l[E][w]);var x=d-1<=w?b-1:i-d;for(u=E>=-1?1:-E;u<=x;++u)_[y][u]=(_[v][u]-_[v][u-1])/l[w+1][E+u],A+=_[y][u]*l[E+u][w];d<=w&&(_[y][b]=-_[v][b-1]/l[w+1][d],A+=_[y][b]*l[d][w]),s[b][d]=A;u=v;v=y,y=u}}for(d=i,b=1;b<=r;++b){for(u=0;u<=i;++u)s[b][u]*=d;d*=i-b}return s},calcBSplineDerivatives:function(e,t,i,r,a){for(var o=a<e?a:e,n=[],s=this.findSpan(e,r,t),l=this.calcBasisFunctionDerivatives(s,r,e,o,t),c=[],h=0;h<i.length;++h){var u=(f=i[h].clone()).w;f.x*=u,f.y*=u,f.z*=u,c[h]=f}for(var d=0;d<=o;++d){for(var f=c[s-e].clone().multiplyScalar(l[d][0]),g=1;g<=e;++g)f.add(c[s-e+g].clone().multiplyScalar(l[d][g]));n[d]=f}for(d=o+1;d<=a+1;++d)n[d]=new p.Vector4(0,0,0);return n},calcKoverI:function(e,t){for(var i=1,r=2;r<=e;++r)i*=r;var a=1;for(r=2;r<=t;++r)a*=r;for(r=2;r<=e-t;++r)a*=r;return i/a},calcRationalCurveDerivatives:function(e){for(var t=e.length,i=[],r=[],a=0;a<t;++a){var o=e[a];i[a]=new p.Vector3(o.x,o.y,o.z),r[a]=o.w}for(var n=[],s=0;s<t;++s){var l=i[s].clone();for(a=1;a<=s;++a)l.sub(n[s-a].clone().multiplyScalar(this.calcKoverI(s,a)*r[a]));n[s]=l.divideScalar(r[0])}return n},calcNURBSDerivatives:function(e,t,i,r,a){var o=this.calcBSplineDerivatives(e,t,i,r,a);return this.calcRationalCurveDerivatives(o)},calcSurfacePoint:function(e,t,i,r,a,o,n,s){for(var l=this.findSpan(e,o,i),c=this.findSpan(t,n,r),h=this.calcBasisFunctions(l,o,e,i),u=this.calcBasisFunctions(c,n,t,r),d=[],f=0;f<=t;++f){d[f]=new p.Vector4(0,0,0,0);for(var g=0;g<=e;++g){var m=a[l-e+g][c-t+f].clone(),v=m.w;m.x*=v,m.y*=v,m.z*=v,d[f].add(m.multiplyScalar(h[g]))}}var y=new p.Vector4(0,0,0,0);for(f=0;f<=t;++f)y.add(d[f].multiplyScalar(u[f]));y.divideScalar(y.w),s.set(y.x,y.y,y.z)}},re=function(e,t,i,r,a){p.Curve.call(this),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=r||0,this.endKnot=a||this.knots.length-1;for(var o=0;o<i.length;++o){var n=i[o];this.controlPoints[o]=new p.Vector4(n.x,n.y,n.z,n.w)}};(re.prototype=Object.create(p.Curve.prototype)).constructor=re,re.prototype.getPoint=function(e){var t=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),i=ie.calcBSplinePoint(this.degree,this.knots,this.controlPoints,t);return 1!=i.w&&i.divideScalar(i.w),new p.Vector3(i.x,i.y,i.z)},re.prototype.getTangent=function(e){var t=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),i=ie.calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,t,1)[1].clone();return i.normalize(),i};var ae=function(e){p.Loader.call(this,e)};ae.prototype=Object.assign(Object.create(p.Loader.prototype),{constructor:ae,load:function(e,t,i,r){var a=this,o=new p.Texture,n=new p.FileLoader(this.manager);return n.setResponseType("arraybuffer"),n.setPath(this.path),n.load(e,(function(e){o.image=a.parse(e),o.needsUpdate=!0,void 0!==t&&t(o)}),i,r),o},parse:function(e){var t=0,i=1,r=2,a=3,o=9,n=10,s=11,l=48,c=4,h=0,u=1,p=2,d=3;e.length<19&&console.error("THREE.TGALoader: Not enough data to contain header.");var f=new Uint8Array(e),g=0,m={id_length:f[g++],colormap_type:f[g++],image_type:f[g++],colormap_index:f[g++]|f[g++]<<8,colormap_length:f[g++]|f[g++]<<8,colormap_size:f[g++],origin:[f[g++]|f[g++]<<8,f[g++]|f[g++]<<8],width:f[g++]|f[g++]<<8,height:f[g++]|f[g++]<<8,pixel_size:f[g++],flags:f[g++]};!function(e){switch(e.image_type){case i:case o:(e.colormap_length>256||24!==e.colormap_size||1!==e.colormap_type)&&console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case r:case a:case n:case s:e.colormap_type&&console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case t:console.error("THREE.TGALoader: No data.");default:console.error('THREE.TGALoader: Invalid type "%s".',e.image_type)}(e.width<=0||e.height<=0)&&console.error("THREE.TGALoader: Invalid image size."),8!==e.pixel_size&&16!==e.pixel_size&&24!==e.pixel_size&&32!==e.pixel_size&&console.error('THREE.TGALoader: Invalid pixel size "%s".',e.pixel_size)}(m),m.id_length+g>e.length&&console.error("THREE.TGALoader: No data."),g+=m.id_length;var v=!1,y=!1,_=!1;switch(m.image_type){case o:v=!0,y=!0;break;case i:y=!0;break;case n:v=!0;break;case r:break;case s:v=!0,_=!0;break;case a:_=!0}var b="undefined"!=typeof OffscreenCanvas,A=b?new OffscreenCanvas(m.width,m.height):document.createElement("canvas");A.width=m.width,A.height=m.height;var E=A.getContext("2d"),w=E.createImageData(m.width,m.height),x=function(e,t,i,r,a){var o,n,s,l;if(n=i.pixel_size>>3,s=i.width*i.height*n,t&&(l=a.subarray(r,r+=i.colormap_length*(i.colormap_size>>3))),e){var c,h,u;o=new Uint8Array(s);for(var p=0,d=new Uint8Array(n);p<s;)if(h=1+(127&(c=a[r++])),128&c){for(u=0;u<n;++u)d[u]=a[r++];for(u=0;u<h;++u)o.set(d,p+u*n);p+=n*h}else{for(h*=n,u=0;u<h;++u)o[p+u]=a[r++];p+=h}}else o=a.subarray(r,r+=t?i.width*i.height:s);return{pixel_data:o,palettes:l}}(v,y,m,g,f);!function(e,t,i,r,a){var o,n,s,f,g,v;switch((m.flags&l)>>c){default:case p:o=0,s=1,g=t,n=0,f=1,v=i;break;case h:o=0,s=1,g=t,n=i-1,f=-1,v=-1;break;case d:o=t-1,s=-1,g=-1,n=0,f=1,v=i;break;case u:o=t-1,s=-1,g=-1,n=i-1,f=-1,v=-1}if(_)switch(m.pixel_size){case 8:!function(e,t,i,r,a,o,n,s){var l,c,h,u=0,p=m.width;for(h=t;h!==r;h+=i)for(c=a;c!==n;c+=o,u++)l=s[u],e[4*(c+p*h)+0]=l,e[4*(c+p*h)+1]=l,e[4*(c+p*h)+2]=l,e[4*(c+p*h)+3]=255}(e,n,f,v,o,s,g,r);break;case 16:!function(e,t,i,r,a,o,n,s){var l,c,h=0,u=m.width;for(c=t;c!==r;c+=i)for(l=a;l!==n;l+=o,h+=2)e[4*(l+u*c)+0]=s[h+0],e[4*(l+u*c)+1]=s[h+0],e[4*(l+u*c)+2]=s[h+0],e[4*(l+u*c)+3]=s[h+1]}(e,n,f,v,o,s,g,r);break;default:console.error("THREE.TGALoader: Format not supported.")}else switch(m.pixel_size){case 8:!function(e,t,i,r,a,o,n,s,l){var c,h,u,p=l,d=0,f=m.width;for(u=t;u!==r;u+=i)for(h=a;h!==n;h+=o,d++)c=s[d],e[4*(h+f*u)+3]=255,e[4*(h+f*u)+2]=p[3*c+0],e[4*(h+f*u)+1]=p[3*c+1],e[4*(h+f*u)+0]=p[3*c+2]}(e,n,f,v,o,s,g,r,a);break;case 16:!function(e,t,i,r,a,o,n,s){var l,c,h,u=0,p=m.width;for(h=t;h!==r;h+=i)for(c=a;c!==n;c+=o,u+=2)l=s[u+0]+(s[u+1]<<8),e[4*(c+p*h)+0]=(31744&l)>>7,e[4*(c+p*h)+1]=(992&l)>>2,e[4*(c+p*h)+2]=(31&l)>>3,e[4*(c+p*h)+3]=32768&l?0:255}(e,n,f,v,o,s,g,r);break;case 24:!function(e,t,i,r,a,o,n,s){var l,c,h=0,u=m.width;for(c=t;c!==r;c+=i)for(l=a;l!==n;l+=o,h+=3)e[4*(l+u*c)+3]=255,e[4*(l+u*c)+2]=s[h+0],e[4*(l+u*c)+1]=s[h+1],e[4*(l+u*c)+0]=s[h+2]}(e,n,f,v,o,s,g,r);break;case 32:!function(e,t,i,r,a,o,n,s){var l,c,h=0,u=m.width;for(c=t;c!==r;c+=i)for(l=a;l!==n;l+=o,h+=4)e[4*(l+u*c)+2]=s[h+0],e[4*(l+u*c)+1]=s[h+1],e[4*(l+u*c)+0]=s[h+2],e[4*(l+u*c)+3]=s[h+3]}(e,n,f,v,o,s,g,r);break;default:console.error("THREE.TGALoader: Format not supported.")}}(w.data,m.width,m.height,x.pixel_data,x.palettes);return E.putImageData(w,0,0),b?A.transferToImageBitmap():A}});var oe=function(){var e,t,i;function r(e){p.Loader.call(this,e)}function a(e,t){this.textureLoader=e,this.manager=t}function o(){}function n(){}function s(){}function l(){}function c(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t}function h(){}function u(e){var t=e.match(/FBXVersion: (\d+)/);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function d(e){return e/46186158e3}r.prototype=Object.assign(Object.create(p.Loader.prototype),{constructor:r,load:function(e,t,i,r){var a=this,o=""===a.path?p.LoaderUtils.extractUrlBase(e):a.path,n=new p.FileLoader(this.manager);n.setPath(a.path),n.setResponseType("arraybuffer"),n.load(e,(function(i){try{t(a.parse(i,o))}catch(t){setTimeout((function(){r&&r(t),a.manager.itemError(e)}),0)}}),i,r)},parse:function(t,i){if(n="Kaydara FBX Binary  \0",(o=t).byteLength>=n.length&&n===A(o,0,n.length))e=(new l).parse(t);else{var r=A(t);if(!function(e){var t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],i=0;for(var r=0;r<t.length;++r){if((o=void 0,o=e[(a=1)-1],e=e.slice(i+a),i++,o)===t[r])return!1}var a,o;return!0}(r))throw new Error("THREE.FBXLoader: Unknown format.");if(u(r)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+u(r));e=(new s).parse(r)}var o,n;return console.log(e),new a(new p.TextureLoader(this.manager).setPath(this.resourcePath||i).setCrossOrigin(this.crossOrigin),this.manager).parse(e)}}),a.prototype={constructor:a,parse:function(){t=this.parseConnections();var e=this.parseImages(),r=this.parseTextures(e),a=this.parseMaterials(r),n=this.parseDeformers(),s=(new o).parse(n);return this.parseScene(n,s,a),i},parseConnections:function(){var t=new Map;"Connections"in e&&e.Connections.connections.forEach((function(e){var i=e[0],r=e[1],a=e[2];t.has(i)||t.set(i,{parents:[],children:[]});var o={ID:r,relationship:a};t.get(i).parents.push(o),t.has(r)||t.set(r,{parents:[],children:[]});var n={ID:i,relationship:a};t.get(r).children.push(n)}));return t},parseImages:function(){var t={},i={};if("Video"in e.Objects){var r=e.Objects.Video;for(var a in r){var o=r[a];if(t[c=parseInt(a)]=o.RelativeFilename||o.Filename,console.log("images[id]",t[c]),"Content"in o){var n=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,s="string"==typeof o.Content&&""!==o.Content;if(n||s){var l=this.parseImage(r[a]);i[o.RelativeFilename||o.Filename]=l}}}}for(var c in t){var h=t[c];void 0!==i[h]?t[c]=i[h]:t[c]=t[c].split("\\").pop()}return console.log("images",t),t},parseImage:function(e){var t,i=e.Content,r=e.RelativeFilename||e.Filename,a=r.slice(r.lastIndexOf(".")+1).toLowerCase();switch(a){case"bmp":t="image/bmp";break;case"jpg":case"jpeg":t="image/jpeg";break;case"png":t="image/png";break;case"tif":t="image/tiff";break;case"tga":t="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+a+'" is not supported.')}if("string"==typeof i)return"data:"+t+";base64,"+i;var o=new Uint8Array(i);return window.URL.createObjectURL(new Blob([o],{type:t}))},parseTextures:function(t){var i=new Map;if("Texture"in e.Objects){var r=e.Objects.Texture;for(var a in r){var o=this.parseTexture(r[a],t);i.set(parseInt(a),o)}}return i},parseTexture:function(e,t){var i=this.loadTexture(e,t);i.ID=e.id,i.name=e.attrName;var r=e.WrapModeU,a=e.WrapModeV,o=void 0!==r?r.value:0,n=void 0!==a?a.value:0;if(i.wrapS=0===o?p.RepeatWrapping:p.ClampToEdgeWrapping,i.wrapT=0===n?p.RepeatWrapping:p.ClampToEdgeWrapping,"Scaling"in e){var s=e.Scaling.value;i.repeat.x=s[0],i.repeat.y=s[1]}return i},loadTexture:function(e,i){var r,a,o=this.textureLoader.path,n=t.get(e.id).children;void 0!==n&&n.length>0&&void 0!==i[n[0].ID]&&(r=i[n[0].ID],console.log("fileName",r),0!==r.indexOf("blob:")&&0!==r.indexOf("data:")||this.textureLoader.setPath(void 0));var s=e.FileName.slice(-3).toLowerCase();"tga"===s?(console.log("fileName",r,"extension",s),a=new ae(this.manager).load(r)):"psd"===s?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),a=new p.Texture):a=this.textureLoader.load(r);return this.textureLoader.setPath(o),a},parseMaterials:function(t){var i=new Map;if("Material"in e.Objects){var r=e.Objects.Material;for(var a in r){var o=this.parseMaterial(r[a],t);null!==o&&i.set(parseInt(a),o)}}return i},parseMaterial:function(e,i){var r=e.id,a=e.attrName,o=e.ShadingModel;if("object"==typeof o&&(o=o.value),!t.has(r))return null;var n,s=this.parseParameters(e,i,r);switch(o.toLowerCase()){case"phong":n=new p.MeshPhongMaterial;break;case"lambert":n=new p.MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',o),n=new p.MeshPhongMaterial}return n.setValues(s),n.name=a,n},parseParameters:function(e,i,r){var a={};e.BumpFactor&&(a.bumpScale=e.BumpFactor.value),e.Diffuse?a.color=(new p.Color).fromArray(e.Diffuse.value):e.DiffuseColor&&"Color"===e.DiffuseColor.type&&(a.color=(new p.Color).fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(a.displacementScale=e.DisplacementFactor.value),e.Emissive?a.emissive=(new p.Color).fromArray(e.Emissive.value):e.EmissiveColor&&"Color"===e.EmissiveColor.type&&(a.emissive=(new p.Color).fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(a.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(a.opacity=parseFloat(e.Opacity.value)),a.opacity<1&&(a.transparent=!0),e.ReflectionFactor&&(a.reflectivity=e.ReflectionFactor.value),e.Shininess&&(a.shininess=e.Shininess.value),e.Specular?a.specular=(new p.Color).fromArray(e.Specular.value):e.SpecularColor&&"Color"===e.SpecularColor.type&&(a.specular=(new p.Color).fromArray(e.SpecularColor.value));var o=this;return t.get(r).children.forEach((function(e){var t=e.relationship;switch(t){case"Bump":a.bumpMap=o.getTexture(i,e.ID);break;case"Maya|TEX_ao_map":a.aoMap=o.getTexture(i,e.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":a.map=o.getTexture(i,e.ID),a.map.encoding=p.sRGBEncoding;break;case"DisplacementColor":a.displacementMap=o.getTexture(i,e.ID);break;case"EmissiveColor":a.emissiveMap=o.getTexture(i,e.ID),a.emissiveMap.encoding=p.sRGBEncoding;break;case"NormalMap":case"Maya|TEX_normal_map":a.normalMap=o.getTexture(i,e.ID);break;case"ReflectionColor":a.envMap=o.getTexture(i,e.ID),a.envMap.mapping=p.EquirectangularReflectionMapping,a.envMap.encoding=p.sRGBEncoding;break;case"SpecularColor":a.specularMap=o.getTexture(i,e.ID),a.specularMap.encoding=p.sRGBEncoding;break;case"TransparentColor":a.alphaMap=o.getTexture(i,e.ID),a.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",t)}})),a},getTexture:function(i,r){return"LayeredTexture"in e.Objects&&r in e.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),r=t.get(r).children[0].ID),i.get(r)},parseDeformers:function(){var i={},r={};if("Deformer"in e.Objects){var a=e.Objects.Deformer;for(var o in a){var n=a[o],s=t.get(parseInt(o));if("Skin"===n.attrType){var l=this.parseSkeleton(s,a);l.ID=o,s.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),l.geometryID=s.parents[0].ID,i[o]=l}else if("BlendShape"===n.attrType){var c={id:o};c.rawTargets=this.parseMorphTargets(s,a),c.id=o,s.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),r[o]=c}}}return{skeletons:i,morphTargets:r}},parseSkeleton:function(e,t){var i=[];return e.children.forEach((function(e){var r=t[e.ID];if("Cluster"===r.attrType){var a={ID:e.ID,indices:[],weights:[],transformLink:(new p.Matrix4).fromArray(r.TransformLink.a)};"Indexes"in r&&(a.indices=r.Indexes.a,a.weights=r.Weights.a),i.push(a)}})),{rawBones:i,bones:[]}},parseMorphTargets:function(e,i){for(var r=[],a=0;a<e.children.length;a++){var o=e.children[a],n=i[o.ID],s={name:n.attrName,initialWeight:n.DeformPercent,id:n.id,fullWeights:n.FullWeights.a};if("BlendShapeChannel"!==n.attrType)return;s.geoID=t.get(parseInt(o.ID)).children.filter((function(e){return void 0===e.relationship}))[0].ID,r.push(s)}return r},parseScene:function(r,a,o){i=new p.Group;var s=this.parseModels(r.skeletons,a,o),l=e.Objects.Model,c=this;s.forEach((function(e){var r=l[e.ID];c.setLookAtProperties(e,r),t.get(e.ID).parents.forEach((function(t){var i=s.get(t.ID);void 0!==i&&i.add(e)})),null===e.parent&&i.add(e)})),this.bindSkeleton(r.skeletons,a,s),this.createAmbientLight(),this.setupMorphMaterials(),i.traverse((function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrixWorld=e.parent.matrix);var t=y(e.userData.transformData);e.applyMatrix(t)}}));var h=(new n).parse();1===i.children.length&&i.children[0].isGroup&&(i.children[0].animations=h,i=i.children[0]),i.animations=h},parseModels:function(i,r,a){var o=new Map,n=e.Objects.Model;for(var s in n){var l=parseInt(s),c=n[s],h=t.get(l),u=this.buildSkeleton(h,i,l,c.attrName);if(!u){switch(c.attrType){case"Camera":u=this.createCamera(h);break;case"Light":u=this.createLight(h);break;case"Mesh":u=this.createMesh(h,r,a);break;case"NurbsCurve":u=this.createCurve(h,r);break;case"LimbNode":case"Root":u=new p.Bone;break;case"Null":default:u=new p.Group}u.name=p.PropertyBinding.sanitizeNodeName(c.attrName),u.ID=l}this.getTransformData(u,c),o.set(l,u)}return o},buildSkeleton:function(e,t,i,r){var a=null;return e.parents.forEach((function(e){for(var o in t){var n=t[o];n.rawBones.forEach((function(t,o){if(t.ID===e.ID){var s=a;(a=new p.Bone).matrixWorld.copy(t.transformLink),a.name=p.PropertyBinding.sanitizeNodeName(r),a.ID=i,n.bones[o]=a,null!==s&&a.add(s)}}))}})),a},createCamera:function(t){var i,r;if(t.children.forEach((function(t){var i=e.Objects.NodeAttribute[t.ID];void 0!==i&&(r=i)})),void 0===r)i=new p.Object3D;else{var a=0;void 0!==r.CameraProjectionType&&1===r.CameraProjectionType.value&&(a=1);var o=1;void 0!==r.NearPlane&&(o=r.NearPlane.value/1e3);var n=1e3;void 0!==r.FarPlane&&(n=r.FarPlane.value/1e3);var s=window.innerWidth,l=window.innerHeight;void 0!==r.AspectWidth&&void 0!==r.AspectHeight&&(s=r.AspectWidth.value,l=r.AspectHeight.value);var c=s/l,h=45;void 0!==r.FieldOfView&&(h=r.FieldOfView.value);var u=r.FocalLength?r.FocalLength.value:null;switch(a){case 0:i=new p.PerspectiveCamera(h,c,o,n),null!==u&&i.setFocalLength(u);break;case 1:i=new p.OrthographicCamera(-s/2,s/2,l/2,-l/2,o,n);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+a+"."),i=new p.Object3D}}return i},createLight:function(t){var i,r;if(t.children.forEach((function(t){var i=e.Objects.NodeAttribute[t.ID];void 0!==i&&(r=i)})),void 0===r)i=new p.Object3D;else{var a;a=void 0===r.LightType?0:r.LightType.value;var o=16777215;void 0!==r.Color&&(o=(new p.Color).fromArray(r.Color.value));var n=void 0===r.Intensity?1:r.Intensity.value/100;void 0!==r.CastLightOnObject&&0===r.CastLightOnObject.value&&(n=0);var s=0;void 0!==r.FarAttenuationEnd&&(s=void 0!==r.EnableFarAttenuation&&0===r.EnableFarAttenuation.value?0:r.FarAttenuationEnd.value);switch(a){case 0:i=new p.PointLight(o,n,s,1);break;case 1:i=new p.DirectionalLight(o,n);break;case 2:var l=Math.PI/3;void 0!==r.InnerAngle&&(l=p.Math.degToRad(r.InnerAngle.value));var c=0;void 0!==r.OuterAngle&&(c=p.Math.degToRad(r.OuterAngle.value),c=Math.max(c,1)),i=new p.SpotLight(o,n,s,l,c,1);break;default:console.warn("THREE.FBXLoader: Unknown light type "+r.LightType.value+", defaulting to a PointLight."),i=new p.PointLight(o,n)}void 0!==r.CastShadows&&1===r.CastShadows.value&&(i.castShadow=!0)}return i},createMesh:function(e,t,i){var r,a=null,o=null,n=[];return e.children.forEach((function(e){t.has(e.ID)&&(a=t.get(e.ID)),i.has(e.ID)&&n.push(i.get(e.ID))})),n.length>1?o=n:n.length>0?o=n[0]:(o=new p.MeshPhongMaterial({color:13421772}),n.push(o)),"color"in a.attributes&&n.forEach((function(e){e.vertexColors=p.VertexColors})),a.FBX_Deformer?(n.forEach((function(e){e.skinning=!0})),(r=new p.SkinnedMesh(a,o)).normalizeSkinWeights()):r=new p.Mesh(a,o),r},createCurve:function(e,t){var i=e.children.reduce((function(e,i){return t.has(i.ID)&&(e=t.get(i.ID)),e}),null),r=new p.LineBasicMaterial({color:3342591,linewidth:1});return new p.Line(i,r)},getTransformData:function(e,t){var i={};"InheritType"in t&&(i.inheritType=parseInt(t.InheritType.value)),i.eulerOrder="RotationOrder"in t?_(t.RotationOrder.value):"ZYX","Lcl_Translation"in t&&(i.translation=t.Lcl_Translation.value),"PreRotation"in t&&(i.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(i.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(i.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(i.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(i.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(i.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(i.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(i.rotationPivot=t.RotationPivot.value),e.userData.transformData=i},setLookAtProperties:function(r,a){"LookAtProperty"in a&&t.get(r.ID).children.forEach((function(t){if("LookAtProperty"===t.relationship){var a=e.Objects.Model[t.ID];if("Lcl_Translation"in a){var o=a.Lcl_Translation.value;void 0!==r.target?(r.target.position.fromArray(o),i.add(r.target)):r.lookAt((new p.Vector3).fromArray(o))}}}))},bindSkeleton:function(e,i,r){var a=this.parsePoseNodes();for(var o in e){var n=e[o];t.get(parseInt(n.ID)).parents.forEach((function(e){if(i.has(e.ID)){var o=e.ID;t.get(o).parents.forEach((function(e){r.has(e.ID)&&r.get(e.ID).bind(new p.Skeleton(n.bones),a[e.ID])}))}}))}},parsePoseNodes:function(){var t={};if("Pose"in e.Objects){var i=e.Objects.Pose;for(var r in i)if("BindPose"===i[r].attrType){var a=i[r].PoseNode;Array.isArray(a)?a.forEach((function(e){t[e.Node]=(new p.Matrix4).fromArray(e.Matrix.a)})):t[a.Node]=(new p.Matrix4).fromArray(a.Matrix.a)}}return t},createAmbientLight:function(){if("GlobalSettings"in e&&"AmbientColor"in e.GlobalSettings){var t=e.GlobalSettings.AmbientColor.value,r=t[0],a=t[1],o=t[2];if(0!==r||0!==a||0!==o){var n=new p.Color(r,a,o);i.add(new p.AmbientLight(n,1))}}},setupMorphMaterials:function(){var e=this;i.traverse((function(t){t.isMesh&&t.geometry.morphAttributes.position&&t.geometry.morphAttributes.position.length&&(Array.isArray(t.material)?t.material.forEach((function(i,r){e.setupMorphMaterial(t,i,r)})):e.setupMorphMaterial(t,t.material))}))},setupMorphMaterial:function(e,t,r){var a=e.uuid,o=t.uuid,n=!1;if(i.traverse((function(e){e.isMesh&&(Array.isArray(e.material)?e.material.forEach((function(t){t.uuid===o&&e.uuid!==a&&(n=!0)})):e.material.uuid===o&&e.uuid!==a&&(n=!0))})),!0===n){var s=t.clone();s.morphTargets=!0,void 0===r?e.material=s:e.material[r]=s}else t.morphTargets=!0}},o.prototype={constructor:o,parse:function(i){var r=new Map;if("Geometry"in e.Objects){var a=e.Objects.Geometry;for(var o in a){var n=t.get(parseInt(o)),s=this.parseGeometry(n,a[o],i);r.set(parseInt(o),s)}}return r},parseGeometry:function(e,t,i){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,i);case"NurbsCurve":return this.parseNurbsGeometry(t)}},parseMeshGeometry:function(t,i,r){var a=r.skeletons,o=r.morphTargets,n=t.parents.map((function(t){return e.Objects.Model[t.ID]}));if(0!==n.length){var s=t.children.reduce((function(e,t){return void 0!==a[t.ID]&&(e=a[t.ID]),e}),null),l=t.children.reduce((function(e,t){return void 0!==o[t.ID]&&(e=o[t.ID]),e}),null),c=n[0],h={};"RotationOrder"in c&&(h.eulerOrder=_(c.RotationOrder.value)),"InheritType"in c&&(h.inheritType=parseInt(c.InheritType.value)),"GeometricTranslation"in c&&(h.translation=c.GeometricTranslation.value),"GeometricRotation"in c&&(h.rotation=c.GeometricRotation.value),"GeometricScaling"in c&&(h.scale=c.GeometricScaling.value);var u=y(h);return this.genGeometry(i,s,l,u)}},genGeometry:function(e,t,i,r){var a=new p.BufferGeometry;e.attrName&&(a.name=e.attrName);var o=this.parseGeoNode(e,t),n=this.genBuffers(o),s=new p.Float32BufferAttribute(n.vertex,3);if(r.applyToBufferAttribute(s),a.addAttribute("position",s),n.colors.length>0&&a.addAttribute("color",new p.Float32BufferAttribute(n.colors,3)),t&&(a.addAttribute("skinIndex",new p.Uint16BufferAttribute(n.weightsIndices,4)),a.addAttribute("skinWeight",new p.Float32BufferAttribute(n.vertexWeights,4)),a.FBX_Deformer=t),n.normal.length>0){var l=new p.Float32BufferAttribute(n.normal,3);(new p.Matrix3).getNormalMatrix(r).applyToBufferAttribute(l),a.addAttribute("normal",l)}if(n.uvs.forEach((function(e,t){var i="uv"+(t+1).toString();0===t&&(i="uv"),a.addAttribute(i,new p.Float32BufferAttribute(n.uvs[t],2))})),o.material&&"AllSame"!==o.material.mappingType){var c=n.materialIndex[0],h=0;if(n.materialIndex.forEach((function(e,t){e!==c&&(a.addGroup(h,t-h,c),c=e,h=t)})),a.groups.length>0){var u=a.groups[a.groups.length-1],d=u.start+u.count;d!==n.materialIndex.length&&a.addGroup(d,n.materialIndex.length-d,c)}0===a.groups.length&&a.addGroup(0,n.materialIndex.length,n.materialIndex[0])}return this.addMorphTargets(a,e,i,r),a},parseGeoNode:function(e,t){var i={};if(i.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],i.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(i.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(i.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(i.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){i.uv=[];for(var r=0;e.LayerElementUV[r];)i.uv.push(this.parseUVs(e.LayerElementUV[r])),r++}return i.weightTable={},null!==t&&(i.skeleton=t,t.rawBones.forEach((function(e,t){e.indices.forEach((function(r,a){void 0===i.weightTable[r]&&(i.weightTable[r]=[]),i.weightTable[r].push({id:t,weight:e.weights[a]})}))}))),i},genBuffers:function(e){var t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},i=0,r=0,a=!1,o=[],n=[],s=[],l=[],c=[],h=[],u=this;return e.vertexIndices.forEach((function(p,d){var f=!1;p<0&&(p^=-1,f=!0);var m=[],v=[];if(o.push(3*p,3*p+1,3*p+2),e.color){var y=g(d,i,p,e.color);s.push(y[0],y[1],y[2])}if(e.skeleton){if(void 0!==e.weightTable[p]&&e.weightTable[p].forEach((function(e){v.push(e.weight),m.push(e.id)})),v.length>4){a||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),a=!0);var _=[0,0,0,0],b=[0,0,0,0];v.forEach((function(e,t){var i=e,r=m[t];b.forEach((function(e,t,a){if(i>e){a[t]=i,i=e;var o=_[t];_[t]=r,r=o}}))})),m=_,v=b}for(;v.length<4;)v.push(0),m.push(0);for(var A=0;A<4;++A)c.push(v[A]),h.push(m[A])}if(e.normal){y=g(d,i,p,e.normal);n.push(y[0],y[1],y[2])}if(e.material&&"AllSame"!==e.material.mappingType)var E=g(d,i,p,e.material)[0];e.uv&&e.uv.forEach((function(e,t){var r=g(d,i,p,e);void 0===l[t]&&(l[t]=[]),l[t].push(r[0]),l[t].push(r[1])})),r++,f&&(u.genFace(t,e,o,E,n,s,l,c,h,r),i++,r=0,o=[],n=[],s=[],l=[],c=[],h=[])})),t},genFace:function(e,t,i,r,a,o,n,s,l,c){for(var h=2;h<c;h++)e.vertex.push(t.vertexPositions[i[0]]),e.vertex.push(t.vertexPositions[i[1]]),e.vertex.push(t.vertexPositions[i[2]]),e.vertex.push(t.vertexPositions[i[3*(h-1)]]),e.vertex.push(t.vertexPositions[i[3*(h-1)+1]]),e.vertex.push(t.vertexPositions[i[3*(h-1)+2]]),e.vertex.push(t.vertexPositions[i[3*h]]),e.vertex.push(t.vertexPositions[i[3*h+1]]),e.vertex.push(t.vertexPositions[i[3*h+2]]),t.skeleton&&(e.vertexWeights.push(s[0]),e.vertexWeights.push(s[1]),e.vertexWeights.push(s[2]),e.vertexWeights.push(s[3]),e.vertexWeights.push(s[4*(h-1)]),e.vertexWeights.push(s[4*(h-1)+1]),e.vertexWeights.push(s[4*(h-1)+2]),e.vertexWeights.push(s[4*(h-1)+3]),e.vertexWeights.push(s[4*h]),e.vertexWeights.push(s[4*h+1]),e.vertexWeights.push(s[4*h+2]),e.vertexWeights.push(s[4*h+3]),e.weightsIndices.push(l[0]),e.weightsIndices.push(l[1]),e.weightsIndices.push(l[2]),e.weightsIndices.push(l[3]),e.weightsIndices.push(l[4*(h-1)]),e.weightsIndices.push(l[4*(h-1)+1]),e.weightsIndices.push(l[4*(h-1)+2]),e.weightsIndices.push(l[4*(h-1)+3]),e.weightsIndices.push(l[4*h]),e.weightsIndices.push(l[4*h+1]),e.weightsIndices.push(l[4*h+2]),e.weightsIndices.push(l[4*h+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[3*(h-1)]),e.colors.push(o[3*(h-1)+1]),e.colors.push(o[3*(h-1)+2]),e.colors.push(o[3*h]),e.colors.push(o[3*h+1]),e.colors.push(o[3*h+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(a[0]),e.normal.push(a[1]),e.normal.push(a[2]),e.normal.push(a[3*(h-1)]),e.normal.push(a[3*(h-1)+1]),e.normal.push(a[3*(h-1)+2]),e.normal.push(a[3*h]),e.normal.push(a[3*h+1]),e.normal.push(a[3*h+2])),t.uv&&t.uv.forEach((function(t,i){void 0===e.uvs[i]&&(e.uvs[i]=[]),e.uvs[i].push(n[i][0]),e.uvs[i].push(n[i][1]),e.uvs[i].push(n[i][2*(h-1)]),e.uvs[i].push(n[i][2*(h-1)+1]),e.uvs[i].push(n[i][2*h]),e.uvs[i].push(n[i][2*h+1])}))},addMorphTargets:function(t,i,r,a){if(null!==r){t.morphAttributes.position=[];var o=this;r.rawTargets.forEach((function(r){var n=e.Objects.Geometry[r.geoID];void 0!==n&&o.genMorphGeometry(t,i,n,a,r.name)}))}},genMorphGeometry:function(e,t,i,r,a){var o=new p.BufferGeometry;i.attrName&&(o.name=i.attrName);for(var n=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],s=void 0!==t.Vertices?t.Vertices.a.slice():[],l=void 0!==i.Vertices?i.Vertices.a:[],c=void 0!==i.Indexes?i.Indexes.a:[],h=0;h<c.length;h++){var u=3*c[h];s[u]+=l[3*h],s[u+1]+=l[3*h+1],s[u+2]+=l[3*h+2]}var d={vertexIndices:n,vertexPositions:s},f=this.genBuffers(d),g=new p.Float32BufferAttribute(f.vertex,3);g.name=a||i.attrName,r.applyToBufferAttribute(g),e.morphAttributes.position.push(g)},parseNormals:function(e){var t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Normals.a,a=[];return"IndexToDirect"===i&&("NormalIndex"in e?a=e.NormalIndex.a:"NormalsIndex"in e&&(a=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:a,mappingType:t,referenceType:i}},parseUVs:function(e){var t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.UV.a,a=[];return"IndexToDirect"===i&&(a=e.UVIndex.a),{dataSize:2,buffer:r,indices:a,mappingType:t,referenceType:i}},parseVertexColors:function(e){var t=e.MappingInformationType,i=e.ReferenceInformationType,r=e.Colors.a,a=[];return"IndexToDirect"===i&&(a=e.ColorIndex.a),{dataSize:4,buffer:r,indices:a,mappingType:t,referenceType:i}},parseMaterialIndices:function(e){var t=e.MappingInformationType,i=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};for(var r=e.Materials.a,a=[],o=0;o<r.length;++o)a.push(o);return{dataSize:1,buffer:r,indices:a,mappingType:t,referenceType:i}},parseNurbsGeometry:function(e){if(void 0===re)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new p.BufferGeometry;var t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new p.BufferGeometry;for(var i,r,a=t-1,o=e.KnotVector.a,n=[],s=e.Points.a,l=0,c=s.length;l<c;l+=4)n.push((new p.Vector4).fromArray(s,l));if("Closed"===e.Form)n.push(n[0]);else if("Periodic"===e.Form){i=a,r=o.length-1-i;for(l=0;l<a;++l)n.push(n[l])}var h=new re(a,o,n,i,r).getPoints(7*n.length),u=new Float32Array(3*h.length);h.forEach((function(e,t){e.toArray(u,3*t)}));var d=new p.BufferGeometry;return d.addAttribute("position",new p.BufferAttribute(u,3)),d}},n.prototype={constructor:n,parse:function(){var e=[],t=this.parseClips();if(void 0!==t)for(var i in t){var r=t[i],a=this.addClip(r);e.push(a)}return e},parseClips:function(){if(void 0!==e.Objects.AnimationCurve){var t=this.parseAnimationCurveNodes();this.parseAnimationCurves(t);var i=this.parseAnimationLayers(t);return this.parseAnimStacks(i)}},parseAnimationCurveNodes:function(){var t=e.Objects.AnimationCurveNode,i=new Map;for(var r in t){var a=t[r];if(null!==a.attrName.match(/S|R|T|DeformPercent/)){var o={id:a.id,attr:a.attrName,curves:{}};i.set(o.id,o)}}return i},parseAnimationCurves:function(i){var r=e.Objects.AnimationCurve;for(var a in r){var o={id:r[a].id,times:r[a].KeyTime.a.map(d),values:r[a].KeyValueFloat.a},n=t.get(o.id);if(void 0!==n){var s=n.parents[0].ID,l=n.parents[0].relationship;l.match(/X/)?i.get(s).curves.x=o:l.match(/Y/)?i.get(s).curves.y=o:l.match(/Z/)?i.get(s).curves.z=o:l.match(/d|DeformPercent/)&&i.has(s)&&(i.get(s).curves.morph=o)}}},parseAnimationLayers:function(r){var a=e.Objects.AnimationLayer,o=new Map;for(var n in a){var s=[],l=t.get(parseInt(n));if(void 0!==l)l.children.forEach((function(a,o){if(r.has(a.ID)){var n=r.get(a.ID);if(void 0!==n.curves.x||void 0!==n.curves.y||void 0!==n.curves.z){if(void 0===s[o])if(void 0!==(f=t.get(a.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID)){var l=e.Objects.Model[f.toString()],c={modelName:p.PropertyBinding.sanitizeNodeName(l.attrName),ID:l.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};i.traverse((function(e){e.ID===l.id&&(c.transform=e.matrix,e.userData.transformData&&(c.eulerOrder=e.userData.transformData.eulerOrder))})),c.transform||(c.transform=new p.Matrix4),"PreRotation"in l&&(c.preRotation=l.PreRotation.value),"PostRotation"in l&&(c.postRotation=l.PostRotation.value),s[o]=c}s[o]&&(s[o][n.attr]=n)}else if(void 0!==n.curves.morph){if(void 0===s[o]){var h=t.get(a.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID,u=t.get(h).parents[0].ID,d=t.get(u).parents[0].ID,f=t.get(d).parents[0].ID;l=e.Objects.Model[f],c={modelName:p.PropertyBinding.sanitizeNodeName(l.attrName),morphName:e.Objects.Deformer[h].attrName};s[o]=c}s[o][n.attr]=n}}})),o.set(parseInt(n),s)}return o},parseAnimStacks:function(i){var r=e.Objects.AnimationStack,a={};for(var o in r){var n=t.get(parseInt(o)).children;n.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var s=i.get(n[0].ID);a[o]={name:r[o].attrName,layer:s}}return a},addClip:function(e){var t=[],i=this;return e.layer.forEach((function(e){t=t.concat(i.generateTracks(e))})),new p.AnimationClip(e.name,-1,t)},generateTracks:function(e){var t=[],i=new p.Vector3,r=new p.Quaternion,a=new p.Vector3;if(e.transform&&e.transform.decompose(i,r,a),i=i.toArray(),r=(new p.Euler).setFromQuaternion(r,e.eulerOrder).toArray(),a=a.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){var o=this.generateVectorTrack(e.modelName,e.T.curves,i,"position");void 0!==o&&t.push(o)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){var n=this.generateRotationTrack(e.modelName,e.R.curves,r,e.preRotation,e.postRotation,e.eulerOrder);void 0!==n&&t.push(n)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){var s=this.generateVectorTrack(e.modelName,e.S.curves,a,"scale");void 0!==s&&t.push(s)}if(void 0!==e.DeformPercent){var l=this.generateMorphTrack(e);void 0!==l&&t.push(l)}return t},generateVectorTrack:function(e,t,i,r){var a=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(a,t,i);return new p.VectorKeyframeTrack(e+"."+r,a,o)},generateRotationTrack:function(e,t,i,r,a,o){void 0!==t.x&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(p.Math.degToRad)),void 0!==t.y&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(p.Math.degToRad)),void 0!==t.z&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(p.Math.degToRad));var n=this.getTimesForAllAxes(t),s=this.getKeyframeTrackValues(n,t,i);void 0!==r&&((r=r.map(p.Math.degToRad)).push(o),r=(new p.Euler).fromArray(r),r=(new p.Quaternion).setFromEuler(r)),void 0!==a&&((a=a.map(p.Math.degToRad)).push(o),a=(new p.Euler).fromArray(a),a=(new p.Quaternion).setFromEuler(a).inverse());for(var l=new p.Quaternion,c=new p.Euler,h=[],u=0;u<s.length;u+=3)c.set(s[u],s[u+1],s[u+2],o),l.setFromEuler(c),void 0!==r&&l.premultiply(r),void 0!==a&&l.multiply(a),l.toArray(h,u/3*4);return new p.QuaternionKeyframeTrack(e+".quaternion",n,h)},generateMorphTrack:function(e){var t=e.DeformPercent.curves.morph,r=t.values.map((function(e){return e/100})),a=i.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new p.NumberKeyframeTrack(e.modelName+".morphTargetInfluences["+a+"]",t.times,r)},getTimesForAllAxes:function(e){var t=[];return void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort((function(e,t){return e-t})).filter((function(e,t,i){return i.indexOf(e)==t}))},getKeyframeTrackValues:function(e,t,i){var r=i,a=[],o=-1,n=-1,s=-1;return e.forEach((function(e){if(t.x&&(o=t.x.times.indexOf(e)),t.y&&(n=t.y.times.indexOf(e)),t.z&&(s=t.z.times.indexOf(e)),-1!==o){var i=t.x.values[o];a.push(i),r[0]=i}else a.push(r[0]);if(-1!==n){var l=t.y.values[n];a.push(l),r[1]=l}else a.push(r[1]);if(-1!==s){var c=t.z.values[s];a.push(c),r[2]=c}else a.push(r[2])})),a},interpolateRotations:function(e){for(var t=1;t<e.values.length;t++){var i=e.values[t-1],r=e.values[t]-i,a=Math.abs(r);if(a>=180){for(var o=a/180,n=r/o,s=i+n,l=e.times[t-1],c=(e.times[t]-l)/o,h=l+c,u=[],p=[];h<e.times[t];)u.push(h),h+=c,p.push(s),s+=n;e.times=E(e.times,t,u),e.values=E(e.values,t,p)}}}},s.prototype={constructor:s,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(e){this.nodeStack.push(e),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(e,t){this.currentProp=e,this.currentPropName=t},parse:function(e){this.currentIndent=0,this.allNodes=new h,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var t=this,i=e.split(/[\r\n]+/);return i.forEach((function(e,r){var a=e.match(/^[\s\t]*;/),o=e.match(/^[\s\t]*$/);if(!a&&!o){var n=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),s=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),l=e.match("^\\t{"+(t.currentIndent-1)+"}}");n?t.parseNodeBegin(e,n):s?t.parseNodeProperty(e,s,i[++r]):l?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)}})),this.allNodes},parseNodeBegin:function(e,t){var i=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map((function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")})),a={name:i},o=this.parseNodeAttr(r),n=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(i,a):i in n?("PoseNode"===i?n.PoseNode.push(a):void 0!==n[i].id&&(n[i]={},n[i][n[i].id]=n[i]),""!==o.id&&(n[i][o.id]=a)):"number"==typeof o.id?(n[i]={},n[i][o.id]=a):"Properties70"!==i&&(n[i]="PoseNode"===i?[a]:a),"number"==typeof o.id&&(a.id=o.id),""!==o.name&&(a.attrName=o.name),""!==o.type&&(a.attrType=o.type),this.pushStack(a)},parseNodeAttr:function(e){var t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));var i="",r="";return e.length>1&&(i=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:i,type:r}},parseNodeProperty:function(e,t,i){var r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),a=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===r&&","===a&&(a=i.replace(/"/g,"").replace(/,$/,"").trim());var o=this.getCurrentNode();if("Properties70"!==o.name){if("C"===r){var n=a.split(",").slice(1),s=parseInt(n[0]),l=parseInt(n[1]),c=a.split(",").slice(3);r="connections",function(e,t){for(var i=0,r=e.length,a=t.length;i<a;i++,r++)e[r]=t[i]}(a=[s,l],c=c.map((function(e){return e.trim().replace(/^"/,"")}))),void 0===o[r]&&(o[r]=[])}"Node"===r&&(o.id=a),r in o&&Array.isArray(o[r])?o[r].push(a):"a"!==r?o[r]=a:o.a=a,this.setCurrentProp(o,r),"a"===r&&","!==a.slice(-1)&&(o.a=b(a))}else this.parseNodeSpecialProperty(e,r,a)},parseNodePropertyContinued:function(e){var t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=b(t.a))},parseNodeSpecialProperty:function(e,t,i){var r=i.split('",').map((function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")})),a=r[0],o=r[1],n=r[2],s=r[3],l=r[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=b(l)}this.getPrevNode()[a]={type:o,type2:n,flag:s,value:l},this.setCurrentProp(this.getPrevNode(),a)}},l.prototype={constructor:l,parse:function(e){var t=new c(e);t.skip(23);var i=t.getUint32();console.log("THREE.FBXLoader: FBX binary version: "+i);for(var r=new h;!this.endOfContent(t);){var a=this.parseNode(t,i);null!==a&&r.add(a.name,a)}return r},endOfContent:function(e){return e.size()%16==0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()},parseNode:function(e,t){var i={},r=t>=7500?e.getUint64():e.getUint32(),a=t>=7500?e.getUint64():e.getUint32(),o=(t>=7500?e.getUint64():e.getUint32(),e.getUint8()),n=e.getString(o);if(0===r)return null;for(var s=[],l=0;l<a;l++)s.push(this.parseProperty(e));var c=s.length>0?s[0]:"",h=s.length>1?s[1]:"",u=s.length>2?s[2]:"";for(i.singleProperty=1===a&&e.getOffset()===r;r>e.getOffset();){var p=this.parseNode(e,t);null!==p&&this.parseSubNode(n,i,p)}return i.propertyList=s,"number"==typeof c&&(i.id=c),""!==h&&(i.attrName=h),""!==u&&(i.attrType=u),""!==n&&(i.name=n),i},parseSubNode:function(e,t,i){if(!0===i.singleProperty){var r=i.propertyList[0];Array.isArray(r)?(t[i.name]=i,i.a=r):t[i.name]=r}else if("Connections"===e&&"C"===i.name){var a=[];i.propertyList.forEach((function(e,t){0!==t&&a.push(e)})),void 0===t.connections&&(t.connections=[]),t.connections.push(a)}else if("Properties70"===i.name){Object.keys(i).forEach((function(e){t[e]=i[e]}))}else if("Properties70"===e&&"P"===i.name){var o,n=i.propertyList[0],s=i.propertyList[1],l=i.propertyList[2],c=i.propertyList[3];0===n.indexOf("Lcl ")&&(n=n.replace("Lcl ","Lcl_")),0===s.indexOf("Lcl ")&&(s=s.replace("Lcl ","Lcl_")),o="Color"===s||"ColorRGB"===s||"Vector"===s||"Vector3D"===s||0===s.indexOf("Lcl_")?[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:i.propertyList[4],t[n]={type:s,type2:l,flag:c,value:o}}else void 0===t[i.name]?"number"==typeof i.id?(t[i.name]={},t[i.name][i.id]=i):t[i.name]=i:"PoseNode"===i.name?(Array.isArray(t[i.name])||(t[i.name]=[t[i.name]]),t[i.name].push(i)):void 0===t[i.name][i.id]&&(t[i.name][i.id]=i)},parseProperty:function(e){var t=e.getString(1);switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":var i=e.getUint32();return e.getArrayBuffer(i);case"S":i=e.getUint32();return e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var r=e.getUint32(),a=e.getUint32(),o=e.getUint32();if(0===a)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}void 0===te&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var n=new c(new te.Inflate(new Uint8Array(e.getArrayBuffer(o))).decompress().buffer);switch(t){case"b":case"c":return n.getBooleanArray(r);case"d":return n.getFloat64Array(r);case"f":return n.getFloat32Array(r);case"i":return n.getInt32Array(r);case"l":return n.getInt64Array(r)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}},c.prototype={constructor:c,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(e){this.offset+=e},getBoolean:function(){return 1==(1&this.getUint8())},getBooleanArray:function(e){for(var t=[],i=0;i<e;i++)t.push(this.getBoolean());return t},getUint8:function(){var e=this.dv.getUint8(this.offset);return this.offset+=1,e},getInt16:function(){var e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e},getInt32:function(){var e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e},getInt32Array:function(e){for(var t=[],i=0;i<e;i++)t.push(this.getInt32());return t},getUint32:function(){var e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e},getInt64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,4294967295===(e=4294967295&~e)&&(t=t+1&4294967295),-(4294967296*t+(e=e+1&4294967295))):4294967296*t+e},getInt64Array:function(e){for(var t=[],i=0;i<e;i++)t.push(this.getInt64());return t},getUint64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e},getFloat32:function(){var e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e},getFloat32Array:function(e){for(var t=[],i=0;i<e;i++)t.push(this.getFloat32());return t},getFloat64:function(){var e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e},getFloat64Array:function(e){for(var t=[],i=0;i<e;i++)t.push(this.getFloat64());return t},getArrayBuffer:function(e){var t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t},getString:function(e){for(var t=[],i=0;i<e;i++)t[i]=this.getUint8();var r=t.indexOf(0);return r>=0&&(t=t.slice(0,r)),p.LoaderUtils.decodeText(new Uint8Array(t))}},h.prototype={constructor:h,add:function(e,t){this[e]=t}};var f=[];function g(e,t,i,r){var a;switch(r.mappingType){case"ByPolygonVertex":a=e;break;case"ByPolygon":a=t;break;case"ByVertice":a=i;break;case"AllSame":a=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}"IndexToDirect"===r.referenceType&&(a=r.indices[a]);var o=a*r.dataSize,n=o+r.dataSize;return function(e,t,i,r){for(var a=i,o=0;a<r;a++,o++)e[o]=t[a];return e}(f,r.buffer,o,n)}var m=new p.Euler,v=new p.Vector3;function y(e){var t,i=new p.Matrix4,r=new p.Matrix4,a=new p.Matrix4,o=new p.Matrix4,n=new p.Matrix4,s=new p.Matrix4,l=new p.Matrix4,c=new p.Matrix4,h=new p.Matrix4,u=new p.Matrix4,d=new p.Matrix4,f=e.inheritType?e.inheritType:0;(e.translation&&i.setPosition(v.fromArray(e.translation)),e.preRotation)&&((t=e.preRotation.map(p.Math.degToRad)).push(e.eulerOrder),r.makeRotationFromEuler(m.fromArray(t)));e.rotation&&((t=e.rotation.map(p.Math.degToRad)).push(e.eulerOrder),a.makeRotationFromEuler(m.fromArray(t)));e.postRotation&&((t=e.postRotation.map(p.Math.degToRad)).push(e.eulerOrder),o.makeRotationFromEuler(m.fromArray(t)));e.scale&&n.scale(v.fromArray(e.scale)),e.scalingOffset&&l.setPosition(v.fromArray(e.scalingOffset)),e.scalingPivot&&s.setPosition(v.fromArray(e.scalingPivot)),e.rotationOffset&&c.setPosition(v.fromArray(e.rotationOffset)),e.rotationPivot&&h.setPosition(v.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(u=e.parentMatrixWorld);var g=r.multiply(a).multiply(o),y=new p.Matrix4;u.extractRotation(y);var _,b,A,E,w=new p.Matrix4;if(w.copyPosition(u),A=w.getInverse(w).multiply(u),b=y.getInverse(y).multiply(A),_=n,0===f)E=y.multiply(g).multiply(b).multiply(_);else if(1===f)E=y.multiply(b).multiply(g).multiply(_);else{var x=(new p.Matrix4).copy(n),T=b.multiply(x.getInverse(x));E=y.multiply(g).multiply(T).multiply(_)}var I=i.multiply(c).multiply(h).multiply(r).multiply(a).multiply(o).multiply(h.getInverse(h)).multiply(l).multiply(s).multiply(n).multiply(s.getInverse(s)),L=(new p.Matrix4).copyPosition(I),S=u.multiply(L);return d.copyPosition(S),I=d.multiply(E)}function _(e){var t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(e=e||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function b(e){return e.split(",").map((function(e){return parseFloat(e)}))}function A(e,t,i){return void 0===t&&(t=0),void 0===i&&(i=e.byteLength),p.LoaderUtils.decodeText(new Uint8Array(e,t,i))}function E(e,t,i){return e.slice(0,t).concat(i).concat(e.slice(t))}return r}(),ne=function(e){p.Loader.call(this,e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}};ne.prototype=Object.assign(Object.create(p.Loader.prototype),{constructor:ne,setDecoderPath:function(e){return this.decoderPath=e,this},setDecoderConfig:function(e){return this.decoderConfig=e,this},setWorkerLimit:function(e){return this.workerLimit=e,this},setVerbosity:function(){console.warn("THREE.DRACOLoader: The .setVerbosity() method has been removed.")},setDrawMode:function(){console.warn("THREE.DRACOLoader: The .setDrawMode() method has been removed.")},setSkipDequantization:function(){console.warn("THREE.DRACOLoader: The .setSkipDequantization() method has been removed.")},load:function(e,t,i,r){var a=new p.FileLoader(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),"use-credentials"===this.crossOrigin&&a.setWithCredentials(!0),a.load(e,e=>{var i={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes};this.decodeGeometry(e,i).then(t).catch(r)},i,r)},decodeDracoFile:function(e,t,i,r){var a={attributeIDs:i||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes};this.decodeGeometry(e,a).then(t)},decodeGeometry:function(e,t){var i,r=this.workerNextTaskID++,a=e.byteLength;for(var o in t.attributeTypes){var n=t.attributeTypes[o];void 0!==n.BYTES_PER_ELEMENT&&(t.attributeTypes[o]=n.name)}var s=this._getWorker(r,a).then(a=>(i=a,new Promise((a,o)=>{i._callbacks[r]={resolve:a,reject:o},i.postMessage({type:"decode",id:r,taskConfig:t,buffer:e},[e])}))).then(e=>this._createGeometry(e.geometry));return s.finally(()=>{i&&r&&this._releaseTask(i,r)}),s},_createGeometry:function(e){var t=new p.BufferGeometry;e.index&&t.setIndex(new p.BufferAttribute(e.index.array,1));for(var i=0;i<e.attributes.length;i++){var r=e.attributes[i],a=r.name,o=r.array,n=r.itemSize;t.addAttribute(a,new p.BufferAttribute(o,n))}return t},_loadLibrary:function(e,t){var i=new p.FileLoader(this.manager);return i.setPath(this.decoderPath),i.setResponseType(t),new Promise((t,r)=>{i.load(e,t,void 0,r)})},_initDecoder:function(){if(this.decoderPending)return this.decoderPending;var e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(t=>{var i=t[0];e||(this.decoderConfig.wasmBinary=t[1]);var r=ne.DRACOWorker.toString(),a=["/* draco decoder */",i,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending},_getWorker:function(e,t){return this._initDecoder().then(()=>{var i;this.workerPool.length<this.workerLimit?((i=new Worker(this.workerSourceURL))._callbacks={},i._taskCosts={},i._taskLoad=0,i.postMessage({type:"init",decoderConfig:this.decoderConfig}),i.onmessage=function(e){var t=e.data;switch(t.type){case"decode":i._callbacks[t.id].resolve(t);break;case"error":i._callbacks[t.id].reject(t);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+t.type+'"')}},this.workerPool.push(i)):this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));return(i=this.workerPool[this.workerPool.length-1])._taskCosts[e]=t,i._taskLoad+=t,i})},_releaseTask:function(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]},debug:function(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))},dispose:function(){for(var e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}),ne.DRACOWorker=function(){var e,t;function i(e,t,i,r,a,o){var n,s,l=o.num_components(),c=i.num_points()*l;switch(a){case Float32Array:n=new e.DracoFloat32Array,t.GetAttributeFloatForAllPoints(i,o,n),s=new Float32Array(c);break;case Int8Array:n=new e.DracoInt8Array,t.GetAttributeInt8ForAllPoints(i,o,n),s=new Int8Array(c);break;case Int16Array:n=new e.DracoInt16Array,t.GetAttributeInt16ForAllPoints(i,o,n),s=new Int16Array(c);break;case Int32Array:n=new e.DracoInt32Array,t.GetAttributeInt32ForAllPoints(i,o,n),s=new Int32Array(c);break;case Uint8Array:n=new e.DracoUInt8Array,t.GetAttributeUInt8ForAllPoints(i,o,n),s=new Uint8Array(c);break;case Uint16Array:n=new e.DracoUInt16Array,t.GetAttributeUInt16ForAllPoints(i,o,n),s=new Uint16Array(c);break;case Uint32Array:n=new e.DracoUInt32Array,t.GetAttributeUInt32ForAllPoints(i,o,n),s=new Uint32Array(c);break;default:throw new Error("THREE.DRACOLoader: Unexpected attribute type.")}for(var h=0;h<c;h++)s[h]=n.GetValue(h);return e.destroy(n),{name:r,array:s,itemSize:l}}onmessage=function(r){var a=r.data;switch(a.type){case"init":e=a.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":var o=a.buffer,n=a.taskConfig;t.then(e=>{var t=e.draco,r=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(o),o.byteLength);try{var l=function(e,t,r,a){var o,n,s=a.attributeIDs,l=a.attributeTypes,c=t.GetEncodedGeometryType(r);if(c===e.TRIANGULAR_MESH)o=new e.Mesh,n=t.DecodeBufferToMesh(r,o);else{if(c!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");o=new e.PointCloud,n=t.DecodeBufferToPointCloud(r,o)}if(!n.ok()||0===o.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+n.error_msg());var h={index:null,attributes:[]};for(var u in s){var p=self[l[u]],d=s[u],f=t.GetAttributeByUniqueId(o,d);h.attributes.push(i(e,t,o,u,p,f))}if(c===e.TRIANGULAR_MESH){for(var g=o.num_faces(),m=new Uint32Array(3*g),v=new e.DracoInt32Array,y=0;y<g;++y){t.GetFaceFromMesh(o,y,v);for(var _=0;_<3;++_)m[3*y+_]=v.GetValue(_)}h.index={array:m,itemSize:1},e.destroy(v)}return e.destroy(o),h}(t,r,s,n),c=l.attributes.map(e=>e.array.buffer);l.index&&c.push(l.index.array.buffer),self.postMessage({type:"decode",id:a.id,geometry:l},c)}catch(e){console.error(e),self.postMessage({type:"error",id:a.id,error:e.message})}finally{t.destroy(s),t.destroy(r)}})}}},ne.setDecoderPath=function(){console.warn("THREE.DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods.")},ne.setDecoderConfig=function(){console.warn("THREE.DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods.")},ne.releaseDecoderModule=function(){console.warn("THREE.DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods.")},ne.getDecoderModule=function(){console.warn("THREE.DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods.")};var se=function(){function e(e){p.Loader.call(this,e),this.dracoLoader=null,this.ddsLoader=null}function t(){var e={};return{get:function(t){return e[t]},add:function(t,i){e[t]=i},remove:function(t){delete e[t]},removeAll:function(){e={}}}}e.prototype=Object.assign(Object.create(p.Loader.prototype),{constructor:e,load:function(e,t,i,r){var a,o=this;a=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:p.LoaderUtils.extractUrlBase(e),o.manager.itemStart(e);var n=function(t){r?r(t):console.error(t),o.manager.itemError(e),o.manager.itemEnd(e)},s=new p.FileLoader(o.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),"use-credentials"===o.crossOrigin&&s.setWithCredentials(!0),s.load(e,(function(i){try{o.parse(i,a,(function(i){t(i),o.manager.itemEnd(e)}),n)}catch(e){n(e)}}),i,n)},setDRACOLoader:function(e){return this.dracoLoader=e,this},setDDSLoader:function(e){return this.ddsLoader=e,this},parse:function(e,t,s,l){var f,g={};if("string"==typeof e)f=e;else if(p.LoaderUtils.decodeText(new Uint8Array(e,0,4))===n){try{g[i.KHR_BINARY_GLTF]=new c(e)}catch(e){return void(l&&l(e))}f=g[i.KHR_BINARY_GLTF].content}else f=p.LoaderUtils.decodeText(new Uint8Array(e));var m=JSON.parse(f);if(void 0===m.asset||m.asset.version[0]<2)l&&l(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported. Use LegacyGLTFLoader instead."));else{if(m.extensionsUsed)for(var v=0;v<m.extensionsUsed.length;++v){var y=m.extensionsUsed[v],_=m.extensionsRequired||[];switch(y){case i.KHR_LIGHTS_PUNCTUAL:g[y]=new a(m);break;case i.KHR_MATERIALS_UNLIT:g[y]=new o;break;case i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:g[y]=new d;break;case i.KHR_DRACO_MESH_COMPRESSION:g[y]=new h(m,this.dracoLoader);break;case i.MSFT_TEXTURE_DDS:g[i.MSFT_TEXTURE_DDS]=new r(this.ddsLoader);break;case i.KHR_TEXTURE_TRANSFORM:g[i.KHR_TEXTURE_TRANSFORM]=new u;break;default:_.indexOf(y)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+y+'".')}}new H(m,g,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager}).parse(s,l)}}});var i={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function r(e){if(!e)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=i.MSFT_TEXTURE_DDS,this.ddsLoader=e}function a(e){this.name=i.KHR_LIGHTS_PUNCTUAL;var t=e.extensions&&e.extensions[i.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=t.lights||[]}function o(){this.name=i.KHR_MATERIALS_UNLIT}a.prototype.loadLight=function(e){var t,i=this.lightDefs[e],r=new p.Color(16777215);void 0!==i.color&&r.fromArray(i.color);var a=void 0!==i.range?i.range:0;switch(i.type){case"directional":(t=new p.DirectionalLight(r)).target.position.set(0,0,-1),t.add(t.target);break;case"point":(t=new p.PointLight(r)).distance=a;break;case"spot":(t=new p.SpotLight(r)).distance=a,i.spot=i.spot||{},i.spot.innerConeAngle=void 0!==i.spot.innerConeAngle?i.spot.innerConeAngle:0,i.spot.outerConeAngle=void 0!==i.spot.outerConeAngle?i.spot.outerConeAngle:Math.PI/4,t.angle=i.spot.outerConeAngle,t.penumbra=1-i.spot.innerConeAngle/i.spot.outerConeAngle,t.target.position.set(0,0,-1),t.add(t.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+i.type+'".')}return t.position.set(0,0,0),t.decay=2,void 0!==i.intensity&&(t.intensity=i.intensity),t.name=i.name||"light_"+e,Promise.resolve(t)},o.prototype.getMaterialType=function(){return p.MeshBasicMaterial},o.prototype.extendParams=function(e,t,i){var r=[];e.color=new p.Color(1,1,1),e.opacity=1;var a=t.pbrMetallicRoughness;if(a){if(Array.isArray(a.baseColorFactor)){var o=a.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}void 0!==a.baseColorTexture&&r.push(i.assignTexture(e,"map",a.baseColorTexture))}return Promise.all(r)};var n="glTF",s=12,l={JSON:1313821514,BIN:5130562};function c(e){this.name=i.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,s);if(this.header={magic:p.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==n)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected. Use LegacyGLTFLoader instead.");for(var r=new DataView(e,s),a=0;a<r.byteLength;){var o=r.getUint32(a,!0);a+=4;var c=r.getUint32(a,!0);if(a+=4,c===l.JSON){var h=new Uint8Array(e,s+a,o);this.content=p.LoaderUtils.decodeText(h)}else if(c===l.BIN){var u=s+a;this.body=e.slice(u,u+o)}a+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function h(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=i.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t}function u(){this.name=i.KHR_TEXTURE_TRANSFORM}function d(){return{name:i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return p.ShaderMaterial},extendParams:function(e,t,i){var r=t.extensions[this.name],a=p.ShaderLib.standard,o=p.UniformsUtils.clone(a.uniforms),n=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),s=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),l=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),c=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),h=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","material.specularRoughness = clamp( 1.0 - glossinessFactor, 0.04, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),u=a.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",n).replace("#include <metalnessmap_pars_fragment>",s).replace("#include <roughnessmap_fragment>",l).replace("#include <metalnessmap_fragment>",c).replace("#include <lights_physical_fragment>",h);delete o.roughness,delete o.metalness,delete o.roughnessMap,delete o.metalnessMap,o.specular={value:(new p.Color).setHex(1118481)},o.glossiness={value:.5},o.specularMap={value:null},o.glossinessMap={value:null},e.vertexShader=a.vertexShader,e.fragmentShader=u,e.uniforms=o,e.defines={STANDARD:""},e.color=new p.Color(1,1,1),e.opacity=1;var d=[];if(Array.isArray(r.diffuseFactor)){var f=r.diffuseFactor;e.color.fromArray(f),e.opacity=f[3]}if(void 0!==r.diffuseTexture&&d.push(i.assignTexture(e,"map",r.diffuseTexture)),e.emissive=new p.Color(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new p.Color(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var g=r.specularGlossinessTexture;d.push(i.assignTexture(e,"glossinessMap",g)),d.push(i.assignTexture(e,"specularMap",g))}return Promise.all(d)},createMaterial:function(e){var t=new p.ShaderMaterial({defines:e.defines,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,fog:!0,lights:!0,opacity:e.opacity,transparent:e.transparent});return t.isGLTFSpecularGlossinessMaterial=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t.extensions.derivatives=!0,t},cloneMaterial:function(e){var t=e.clone();t.isGLTFSpecularGlossinessMaterial=!0;for(var i=this.specularGlossinessParams,r=0,a=i.length;r<a;r++){var o=e[i[r]];t[i[r]]=o&&o.isColor?o.clone():o}return t},refreshUniforms:function(e,t,i,r,a){if(!0===a.isGLTFSpecularGlossinessMaterial){var o,n=a.uniforms,s=a.defines;n.opacity.value=a.opacity,n.diffuse.value.copy(a.color),n.emissive.value.copy(a.emissive).multiplyScalar(a.emissiveIntensity),n.map.value=a.map,n.specularMap.value=a.specularMap,n.alphaMap.value=a.alphaMap,n.lightMap.value=a.lightMap,n.lightMapIntensity.value=a.lightMapIntensity,n.aoMap.value=a.aoMap,n.aoMapIntensity.value=a.aoMapIntensity,a.map?o=a.map:a.specularMap?o=a.specularMap:a.displacementMap?o=a.displacementMap:a.normalMap?o=a.normalMap:a.bumpMap?o=a.bumpMap:a.glossinessMap?o=a.glossinessMap:a.alphaMap?o=a.alphaMap:a.emissiveMap&&(o=a.emissiveMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),n.uvTransform.value.copy(o.matrix)),a.envMap&&(n.envMap.value=a.envMap,n.envMapIntensity.value=a.envMapIntensity,n.flipEnvMap.value=a.envMap.isCubeTexture?-1:1,n.reflectivity.value=a.reflectivity,n.refractionRatio.value=a.refractionRatio,n.maxMipLevel.value=e.properties.get(a.envMap).__maxMipLevel),n.specular.value.copy(a.specular),n.glossiness.value=a.glossiness,n.glossinessMap.value=a.glossinessMap,n.emissiveMap.value=a.emissiveMap,n.bumpMap.value=a.bumpMap,n.normalMap.value=a.normalMap,n.displacementMap.value=a.displacementMap,n.displacementScale.value=a.displacementScale,n.displacementBias.value=a.displacementBias,null!==n.glossinessMap.value&&void 0===s.USE_GLOSSINESSMAP&&(s.USE_GLOSSINESSMAP="",s.USE_ROUGHNESSMAP=""),null===n.glossinessMap.value&&void 0!==s.USE_GLOSSINESSMAP&&(delete s.USE_GLOSSINESSMAP,delete s.USE_ROUGHNESSMAP)}}}}function f(e,t,i,r){p.Interpolant.call(this,e,t,i,r)}h.prototype.decodePrimitive=function(e,t){var i=this.json,r=this.dracoLoader,a=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,n={},s={},l={};for(var c in o){var h=L[c]||c.toLowerCase();n[h]=o[c]}for(c in e.attributes){h=L[c]||c.toLowerCase();if(void 0!==o[c]){var u=i.accessors[e.attributes[c]],p=w[u.componentType];l[h]=p,s[h]=!0===u.normalized}}return t.getDependency("bufferView",a).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(var i in e.attributes){var r=e.attributes[i],a=s[i];void 0!==a&&(r.normalized=a)}t(e)}),n,l)}))}))},u.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e},f.prototype=Object.create(p.Interpolant.prototype),f.prototype.constructor=f,f.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,a=e*r*3+r,o=0;o!==r;o++)t[o]=i[a+o];return t},f.prototype.beforeStart_=f.prototype.copySampleValue_,f.prototype.afterEnd_=f.prototype.copySampleValue_,f.prototype.interpolate_=function(e,t,i,r){for(var a=this.resultBuffer,o=this.sampleValues,n=this.valueSize,s=2*n,l=3*n,c=r-t,h=(i-t)/c,u=h*h,p=u*h,d=e*l,f=d-l,g=-2*p+3*u,m=p-u,v=1-g,y=m-u+h,_=0;_!==n;_++){var b=o[f+_+n],A=o[f+_+s]*c,E=o[d+_+n],w=o[d+_]*c;a[_]=v*b+y*A+g*E+m*w}return a};var g,m=0,v=1,y=2,_=3,b=4,A=5,E=6,w={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},x={9728:p.NearestFilter,9729:p.LinearFilter,9984:p.NearestMipmapNearestFilter,9985:p.LinearMipmapNearestFilter,9986:p.NearestMipmapLinearFilter,9987:p.LinearMipmapLinearFilter},T={33071:p.ClampToEdgeWrapping,33648:p.MirroredRepeatWrapping,10497:p.RepeatWrapping},I={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},L={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},S={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},M={CUBICSPLINE:void 0,LINEAR:p.InterpolateLinear,STEP:p.InterpolateDiscrete},C="OPAQUE",k="MASK",R="BLEND",P={"image/png":p.RGBAFormat,"image/jpeg":p.RGBFormat};function O(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)?e:/^data:.*,.*$/i.test(e)?e:/^blob:.*$/i.test(e)?e:t+e)}function U(e,t,i){for(var r in i.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=i.extensions[r])}function F(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function D(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var i=0,r=t.weights.length;i<r;i++)e.morphTargetInfluences[i]=t.weights[i];if(t.extras&&Array.isArray(t.extras.targetNames)){var a=t.extras.targetNames;if(e.morphTargetInfluences.length===a.length){e.morphTargetDictionary={};for(i=0,r=a.length;i<r;i++)e.morphTargetDictionary[a[i]]=i}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function B(e){for(var t="",i=Object.keys(e).sort(),r=0,a=i.length;r<a;r++)t+=i[r]+":"+e[i[r]]+";";return t}function N(e){if(e.isInterleavedBufferAttribute){for(var t=e.count,i=e.itemSize,r=e.array.slice(0,t*i),a=0,o=0;a<t;++a)r[o++]=e.getX(a),i>=2&&(r[o++]=e.getY(a)),i>=3&&(r[o++]=e.getZ(a)),i>=4&&(r[o++]=e.getW(a));return new p.BufferAttribute(r,i,e.normalized)}return e.clone()}function H(e,i,r){this.json=e||{},this.extensions=i||{},this.options=r||{},this.cache=new t,this.primitiveCache={},this.textureLoader=new p.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new p.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function V(e,t,i){var r=t.attributes,a=[];function o(t,r){return i.getDependency("accessor",t).then((function(t){e.addAttribute(r,t)}))}for(var n in r){var s=L[n]||n.toLowerCase();s in e.attributes||a.push(o(r[n],s))}if(void 0!==t.indices&&!e.index){var l=i.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));a.push(l)}return F(e,t),Promise.all(a).then((function(){return void 0!==t.targets?function(e,t,i){for(var r=!1,a=!1,o=0,n=t.length;o<n;o++){if(void 0!==(c=t[o]).POSITION&&(r=!0),void 0!==c.NORMAL&&(a=!0),r&&a)break}if(!r&&!a)return Promise.resolve(e);var s=[],l=[];for(o=0,n=t.length;o<n;o++){var c=t[o];if(r){var h=void 0!==c.POSITION?i.getDependency("accessor",c.POSITION):e.attributes.position;s.push(h)}if(a){h=void 0!==c.NORMAL?i.getDependency("accessor",c.NORMAL):e.attributes.normal;l.push(h)}}return Promise.all([Promise.all(s),Promise.all(l)]).then((function(i){for(var o=i[0],n=i[1],s=0,l=o.length;s<l;s++)e.attributes.position!==o[s]&&(o[s]=N(o[s]));for(s=0,l=n.length;s<l;s++)e.attributes.normal!==n[s]&&(n[s]=N(n[s]));for(s=0,l=t.length;s<l;s++){var c=t[s],h="morphTarget"+s;if(r&&void 0!==c.POSITION){var u=o[s];u.name=h;for(var p=e.attributes.position,d=0,f=u.count;d<f;d++)u.setXYZ(d,u.getX(d)+p.getX(d),u.getY(d)+p.getY(d),u.getZ(d)+p.getZ(d))}if(a&&void 0!==c.NORMAL){var g=n[s];g.name=h;var m=e.attributes.normal;for(d=0,f=g.count;d<f;d++)g.setXYZ(d,g.getX(d)+m.getX(d),g.getY(d)+m.getY(d),g.getZ(d)+m.getZ(d))}}return r&&(e.morphAttributes.position=o),a&&(e.morphAttributes.normal=n),e}))}(e,t.targets,i):e}))}return H.prototype.parse=function(e,t){var i=this,r=this.json,a=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then((function(t){var o={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:i,userData:{}};U(a,o,r),F(o,r),e(o)})).catch(t)},H.prototype.markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],i=this.json.meshes||[],r={},a={},o=0,n=t.length;o<n;o++)for(var s=t[o].joints,l=0,c=s.length;l<c;l++)e[s[l]].isBone=!0;for(var h=0,u=e.length;h<u;h++){var p=e[h];void 0!==p.mesh&&(void 0===r[p.mesh]&&(r[p.mesh]=a[p.mesh]=0),r[p.mesh]++,void 0!==p.skin&&(i[p.mesh].isSkinnedMesh=!0))}this.json.meshReferences=r,this.json.meshUses=a},H.prototype.getDependency=function(e,t){var r=e+":"+t,a=this.cache.get(r);if(!a){switch(e){case"scene":a=this.loadScene(t);break;case"node":a=this.loadNode(t);break;case"mesh":a=this.loadMesh(t);break;case"accessor":a=this.loadAccessor(t);break;case"bufferView":a=this.loadBufferView(t);break;case"buffer":a=this.loadBuffer(t);break;case"material":a=this.loadMaterial(t);break;case"texture":a=this.loadTexture(t);break;case"skin":a=this.loadSkin(t);break;case"animation":a=this.loadAnimation(t);break;case"camera":a=this.loadCamera(t);break;case"light":a=this.extensions[i.KHR_LIGHTS_PUNCTUAL].loadLight(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(r,a)}return a},H.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var i=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return i.getDependency(e,r)}))),this.cache.add(e,t)}return t},H.prototype.loadBuffer=function(e){var t=this.json.buffers[e],r=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[i.KHR_BINARY_GLTF].body);var a=this.options;return new Promise((function(e,i){r.load(O(t.uri,a.path),e,void 0,(function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))},H.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var i=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+i)}))},H.prototype.loadAccessor=function(e){var t=this,i=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);var a=[];return void 0!==r.bufferView?a.push(this.getDependency("bufferView",r.bufferView)):a.push(null),void 0!==r.sparse&&(a.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),a.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(a).then((function(e){var a,o,n=e[0],s=I[r.type],l=w[r.componentType],c=l.BYTES_PER_ELEMENT,h=c*s,u=r.byteOffset||0,d=void 0!==r.bufferView?i.bufferViews[r.bufferView].byteStride:void 0,f=!0===r.normalized;if(d&&d!==h){var g=Math.floor(u/d),m="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+g+":"+r.count,v=t.cache.get(m);v||(a=new l(n,g*d,r.count*d/c),v=new p.InterleavedBuffer(a,d/c),t.cache.add(m,v)),o=new p.InterleavedBufferAttribute(v,s,u%d/c,f)}else a=null===n?new l(r.count*s):new l(n,u,r.count*s),o=new p.BufferAttribute(a,s,f);if(void 0!==r.sparse){var y=I.SCALAR,_=w[r.sparse.indices.componentType],b=r.sparse.indices.byteOffset||0,A=r.sparse.values.byteOffset||0,E=new _(e[1],b,r.sparse.count*y),x=new l(e[2],A,r.sparse.count*s);null!==n&&(o=new p.BufferAttribute(o.array.slice(),o.itemSize,o.normalized));for(var T=0,L=E.length;T<L;T++){var S=E[T];if(o.setX(S,x[T*s]),s>=2&&o.setY(S,x[T*s+1]),s>=3&&o.setZ(S,x[T*s+2]),s>=4&&o.setW(S,x[T*s+3]),s>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return o}))},H.prototype.loadTexture=function(e){var t,r=this,a=this.json,o=this.options,n=this.textureLoader,s=window.URL||window.webkitURL,l=a.textures[e],c=l.extensions||{},h=(t=c[i.MSFT_TEXTURE_DDS]?a.images[c[i.MSFT_TEXTURE_DDS].source]:a.images[l.source]).uri,u=!1;return void 0!==t.bufferView&&(h=r.getDependency("bufferView",t.bufferView).then((function(e){u=!0;var i=new Blob([e],{type:t.mimeType});return h=s.createObjectURL(i)}))),Promise.resolve(h).then((function(e){var t=o.manager.getHandler(e);return t||(t=c[i.MSFT_TEXTURE_DDS]?r.extensions[i.MSFT_TEXTURE_DDS].ddsLoader:n),new Promise((function(i,r){t.load(O(e,o.path),i,void 0,r)}))})).then((function(e){!0===u&&s.revokeObjectURL(h),e.flipY=!1,void 0!==l.name&&(e.name=l.name),t.mimeType in P&&(e.format=P[t.mimeType]);var i=(a.samplers||{})[l.sampler]||{};return e.magFilter=x[i.magFilter]||p.LinearFilter,e.minFilter=x[i.minFilter]||p.LinearMipmapLinearFilter,e.wrapS=T[i.wrapS]||p.RepeatWrapping,e.wrapT=T[i.wrapT]||p.RepeatWrapping,e}))},H.prototype.assignTexture=function(e,t,r){var a=this;return this.getDependency("texture",r.index).then((function(o){if(!o.isCompressedTexture)switch(t){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":o.format=p.RGBFormat}if(a.extensions[i.KHR_TEXTURE_TRANSFORM]){var n=void 0!==r.extensions?r.extensions[i.KHR_TEXTURE_TRANSFORM]:void 0;n&&(o=a.extensions[i.KHR_TEXTURE_TRANSFORM].extendTexture(o,n))}e[t]=o}))},H.prototype.assignFinalMaterial=function(e){var t=e.geometry,r=e.material,a=this.extensions,o=void 0!==t.attributes.tangent,n=void 0!==t.attributes.color,s=void 0===t.attributes.normal,l=!0===e.isSkinnedMesh,c=Object.keys(t.morphAttributes).length>0,h=c&&void 0!==t.morphAttributes.normal;if(e.isPoints){var u="PointsMaterial:"+r.uuid,d=this.cache.get(u);d||(d=new p.PointsMaterial,p.Material.prototype.copy.call(d,r),d.color.copy(r.color),d.map=r.map,d.lights=!1,d.sizeAttenuation=!1,this.cache.add(u,d)),r=d}else if(e.isLine){u="LineBasicMaterial:"+r.uuid;var f=this.cache.get(u);f||(f=new p.LineBasicMaterial,p.Material.prototype.copy.call(f,r),f.color.copy(r.color),f.lights=!1,this.cache.add(u,f)),r=f}if(o||n||s||l||c){u="ClonedMaterial:"+r.uuid+":";r.isGLTFSpecularGlossinessMaterial&&(u+="specular-glossiness:"),l&&(u+="skinning:"),o&&(u+="vertex-tangents:"),n&&(u+="vertex-colors:"),s&&(u+="flat-shading:"),c&&(u+="morph-targets:"),h&&(u+="morph-normals:");var g=this.cache.get(u);g||(g=r.isGLTFSpecularGlossinessMaterial?a[i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].cloneMaterial(r):r.clone(),l&&(g.skinning=!0),o&&(g.vertexTangents=!0),n&&(g.vertexColors=p.VertexColors),s&&(g.flatShading=!0),c&&(g.morphTargets=!0),h&&(g.morphNormals=!0),this.cache.add(u,g)),r=g}r.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&(console.log("THREE.GLTFLoader: Duplicating UVs to support aoMap."),t.addAttribute("uv2",new p.BufferAttribute(t.attributes.uv.array,2))),r.isGLTFSpecularGlossinessMaterial&&(e.onBeforeRender=a[i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].refreshUniforms),e.material=r},H.prototype.loadMaterial=function(e){var t,r=this.json,a=this.extensions,o=r.materials[e],n={},s=o.extensions||{},l=[];if(s[i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var c=a[i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=c.getMaterialType(),l.push(c.extendParams(n,o,this))}else if(s[i.KHR_MATERIALS_UNLIT]){var h=a[i.KHR_MATERIALS_UNLIT];t=h.getMaterialType(),l.push(h.extendParams(n,o,this))}else{t=p.MeshStandardMaterial;var u=o.pbrMetallicRoughness||{};if(n.color=new p.Color(1,1,1),n.opacity=1,Array.isArray(u.baseColorFactor)){var d=u.baseColorFactor;n.color.fromArray(d),n.opacity=d[3]}void 0!==u.baseColorTexture&&l.push(this.assignTexture(n,"map",u.baseColorTexture)),n.metalness=void 0!==u.metallicFactor?u.metallicFactor:1,n.roughness=void 0!==u.roughnessFactor?u.roughnessFactor:1,void 0!==u.metallicRoughnessTexture&&(l.push(this.assignTexture(n,"metalnessMap",u.metallicRoughnessTexture)),l.push(this.assignTexture(n,"roughnessMap",u.metallicRoughnessTexture)))}!0===o.doubleSided&&(n.side=p.DoubleSide);var f=o.alphaMode||C;return f===R?n.transparent=!0:(n.transparent=!1,f===k&&(n.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&t!==p.MeshBasicMaterial&&(l.push(this.assignTexture(n,"normalMap",o.normalTexture)),n.normalScale=new p.Vector2(1,1),void 0!==o.normalTexture.scale&&n.normalScale.set(o.normalTexture.scale,o.normalTexture.scale)),void 0!==o.occlusionTexture&&t!==p.MeshBasicMaterial&&(l.push(this.assignTexture(n,"aoMap",o.occlusionTexture)),void 0!==o.occlusionTexture.strength&&(n.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&t!==p.MeshBasicMaterial&&(n.emissive=(new p.Color).fromArray(o.emissiveFactor)),void 0!==o.emissiveTexture&&t!==p.MeshBasicMaterial&&l.push(this.assignTexture(n,"emissiveMap",o.emissiveTexture)),Promise.all(l).then((function(){var e;return e=t===p.ShaderMaterial?a[i.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(n):new t(n),void 0!==o.name&&(e.name=o.name),e.map&&(e.map.encoding=p.sRGBEncoding),e.emissiveMap&&(e.emissiveMap.encoding=p.sRGBEncoding),e.specularMap&&(e.specularMap.encoding=p.sRGBEncoding),F(e,o),o.extensions&&U(a,e,o),e}))},H.prototype.loadGeometries=function(e){var t=this,r=this.extensions,a=this.primitiveCache;function o(e){return r[i.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(i){return V(i,e,t)}))}for(var n,s,l=[],c=0,h=e.length;c<h;c++){var u,d=e[c],f=(s=void 0,(s=(n=d).extensions&&n.extensions[i.KHR_DRACO_MESH_COMPRESSION])?"draco:"+s.bufferView+":"+s.indices+":"+B(s.attributes):n.indices+":"+B(n.attributes)+":"+n.mode),g=a[f];if(g)l.push(g.promise);else u=d.extensions&&d.extensions[i.KHR_DRACO_MESH_COMPRESSION]?o(d):V(new p.BufferGeometry,d,t),a[f]={primitive:d,promise:u},l.push(u)}return Promise.all(l)},H.prototype.loadMesh=function(e){for(var t=this,i=this.json.meshes[e],r=i.primitives,a=[],o=0,n=r.length;o<n;o++){var s=void 0===r[o].material?g=g||new p.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:p.FrontSide}):this.getDependency("material",r[o].material);a.push(s)}return Promise.all(a).then((function(a){return t.loadGeometries(r).then((function(o){for(var n=[],s=0,l=o.length;s<l;s++){var c,h=o[s],u=r[s],d=a[s];if(u.mode===b||u.mode===A||u.mode===E||void 0===u.mode)!0!==(c=!0===i.isSkinnedMesh?new p.SkinnedMesh(h,d):new p.Mesh(h,d)).isSkinnedMesh||c.geometry.attributes.skinWeight.normalized||c.normalizeSkinWeights(),u.mode===A?c.drawMode=p.TriangleStripDrawMode:u.mode===E&&(c.drawMode=p.TriangleFanDrawMode);else if(u.mode===v)c=new p.LineSegments(h,d);else if(u.mode===_)c=new p.Line(h,d);else if(u.mode===y)c=new p.LineLoop(h,d);else{if(u.mode!==m)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+u.mode);c=new p.Points(h,d)}Object.keys(c.geometry.morphAttributes).length>0&&D(c,i),c.name=i.name||"mesh_"+e,o.length>1&&(c.name+="_"+s),F(c,i),t.assignFinalMaterial(c),n.push(c)}if(1===n.length)return n[0];var f=new p.Group;for(s=0,l=n.length;s<l;s++)f.add(n[s]);return f}))}))},H.prototype.loadCamera=function(e){var t,i=this.json.cameras[e],r=i[i.type];if(r)return"perspective"===i.type?t=new p.PerspectiveCamera(p.Math.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===i.type&&(t=new p.OrthographicCamera(r.xmag/-2,r.xmag/2,r.ymag/2,r.ymag/-2,r.znear,r.zfar)),void 0!==i.name&&(t.name=i.name),F(t,i),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")},H.prototype.loadSkin=function(e){var t=this.json.skins[e],i={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(i):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return i.inverseBindMatrices=e,i}))},H.prototype.loadAnimation=function(e){for(var t=this.json.animations[e],i=[],r=[],a=[],o=[],n=[],s=0,l=t.channels.length;s<l;s++){var c=t.channels[s],h=t.samplers[c.sampler],u=c.target,d=void 0!==u.node?u.node:u.id,g=void 0!==t.parameters?t.parameters[h.input]:h.input,m=void 0!==t.parameters?t.parameters[h.output]:h.output;i.push(this.getDependency("node",d)),r.push(this.getDependency("accessor",g)),a.push(this.getDependency("accessor",m)),o.push(h),n.push(u)}return Promise.all([Promise.all(i),Promise.all(r),Promise.all(a),Promise.all(o),Promise.all(n)]).then((function(i){for(var r=i[0],a=i[1],o=i[2],n=i[3],s=i[4],l=[],c=0,h=r.length;c<h;c++){var u=r[c],d=a[c],g=o[c],m=n[c],v=s[c];if(void 0!==u){var y;switch(u.updateMatrix(),u.matrixAutoUpdate=!0,S[v.path]){case S.weights:y=p.NumberKeyframeTrack;break;case S.rotation:y=p.QuaternionKeyframeTrack;break;case S.position:case S.scale:default:y=p.VectorKeyframeTrack}var _=u.name?u.name:u.uuid,b=void 0!==m.interpolation?M[m.interpolation]:p.InterpolateLinear,A=[];S[v.path]===S.weights?u.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&A.push(e.name?e.name:e.uuid)})):A.push(_);var E=g.array;if(g.normalized){var w;if(E.constructor===Int8Array)w=1/127;else if(E.constructor===Uint8Array)w=1/255;else if(E.constructor==Int16Array)w=1/32767;else{if(E.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");w=1/65535}for(var x=new Float32Array(E.length),T=0,I=E.length;T<I;T++)x[T]=E[T]*w;E=x}for(T=0,I=A.length;T<I;T++){var L=new y(A[T]+"."+S[v.path],d.array,E,b);"CUBICSPLINE"===m.interpolation&&(L.createInterpolant=function(e){return new f(this.times,this.values,this.getValueSize()/3,e)},L.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(L)}}}var C=void 0!==t.name?t.name:"animation_"+e;return new p.AnimationClip(C,void 0,l)}))},H.prototype.loadNode=function(e){var t,r=this.json,a=this.extensions,o=this,n=r.meshReferences,s=r.meshUses,l=r.nodes[e];return(t=[],void 0!==l.mesh&&t.push(o.getDependency("mesh",l.mesh).then((function(e){var t;if(n[l.mesh]>1){var i=s[l.mesh]++;(t=e.clone()).name+="_instance_"+i,t.onBeforeRender=e.onBeforeRender;for(var r=0,a=t.children.length;r<a;r++)t.children[r].name+="_instance_"+i,t.children[r].onBeforeRender=e.children[r].onBeforeRender}else t=e;return void 0!==l.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,i=l.weights.length;t<i;t++)e.morphTargetInfluences[t]=l.weights[t]})),t}))),void 0!==l.camera&&t.push(o.getDependency("camera",l.camera)),l.extensions&&l.extensions[i.KHR_LIGHTS_PUNCTUAL]&&void 0!==l.extensions[i.KHR_LIGHTS_PUNCTUAL].light&&t.push(o.getDependency("light",l.extensions[i.KHR_LIGHTS_PUNCTUAL].light)),Promise.all(t)).then((function(e){var t;if((t=!0===l.isBone?new p.Bone:e.length>1?new p.Group:1===e.length?e[0]:new p.Object3D)!==e[0])for(var i=0,r=e.length;i<r;i++)t.add(e[i]);if(void 0!==l.name&&(t.userData.name=l.name,t.name=p.PropertyBinding.sanitizeNodeName(l.name)),F(t,l),l.extensions&&U(a,t,l),void 0!==l.matrix){var o=new p.Matrix4;o.fromArray(l.matrix),t.applyMatrix(o)}else void 0!==l.translation&&t.position.fromArray(l.translation),void 0!==l.rotation&&t.quaternion.fromArray(l.rotation),void 0!==l.scale&&t.scale.fromArray(l.scale);return t}))},H.prototype.loadScene=function(){function e(t,i,r,a){var o=r.nodes[t];return a.getDependency("node",t).then((function(e){return void 0===o.skin?e:a.getDependency("skin",o.skin).then((function(e){for(var i=[],r=0,o=(t=e).joints.length;r<o;r++)i.push(a.getDependency("node",t.joints[r]));return Promise.all(i)})).then((function(i){return e.traverse((function(e){if(e.isMesh){for(var r=[],a=[],o=0,n=i.length;o<n;o++){var s=i[o];if(s){r.push(s);var l=new p.Matrix4;void 0!==t.inverseBindMatrices&&l.fromArray(t.inverseBindMatrices.array,16*o),a.push(l)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[o])}e.bind(new p.Skeleton(r,a),e.matrixWorld)}})),e}));var t})).then((function(t){i.add(t);var n=[];if(o.children)for(var s=o.children,l=0,c=s.length;l<c;l++){var h=s[l];n.push(e(h,t,r,a))}return Promise.all(n)}))}return function(t){var i=this.json,r=this.extensions,a=this.json.scenes[t],o=new p.Scene;void 0!==a.name&&(o.name=a.name),F(o,a),a.extensions&&U(r,o,a);for(var n=a.nodes||[],s=[],l=0,c=n.length;l<c;l++)s.push(e(n[l],o,i,this));return Promise.all(s).then((function(){return o}))}}(),e}(),le=function(){var e=/^[og]\s*(.+)?/,t=/^mtllib /,i=/^usemtl /;function r(){var e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var i=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var i=this._finalize(!1);i&&(i.inherited||i.groupCount<=0)&&this.materials.splice(i.index,1);var r={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==i?i.smooth:this.smooth,groupStart:void 0!==i?i.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(r),r},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var i=this.materials.length-1;i>=0;i--)this.materials[i].groupCount<=0&&this.materials.splice(i,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},i&&i.name&&"function"==typeof i.clone){var r=i.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var i=parseInt(e,10);return 3*(i>=0?i-1:i+t/3)},parseNormalIndex:function(e,t){var i=parseInt(e,10);return 3*(i>=0?i-1:i+t/3)},parseUVIndex:function(e,t){var i=parseInt(e,10);return 2*(i>=0?i-1:i+t/2)},addVertex:function(e,t,i){var r=this.vertices,a=this.object.geometry.vertices;a.push(r[e+0],r[e+1],r[e+2]),a.push(r[t+0],r[t+1],r[t+2]),a.push(r[i+0],r[i+1],r[i+2])},addVertexPoint:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){var r=this.normals,a=this.object.geometry.normals;a.push(r[e+0],r[e+1],r[e+2]),a.push(r[t+0],r[t+1],r[t+2]),a.push(r[i+0],r[i+1],r[i+2])},addColor:function(e,t,i){var r=this.colors,a=this.object.geometry.colors;a.push(r[e+0],r[e+1],r[e+2]),a.push(r[t+0],r[t+1],r[t+2]),a.push(r[i+0],r[i+1],r[i+2])},addUV:function(e,t,i){var r=this.uvs,a=this.object.geometry.uvs;a.push(r[e+0],r[e+1]),a.push(r[t+0],r[t+1]),a.push(r[i+0],r[i+1])},addUVLine:function(e){var t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,i,r,a,o,n,s,l){var c=this.vertices.length,h=this.parseVertexIndex(e,c),u=this.parseVertexIndex(t,c),p=this.parseVertexIndex(i,c);if(this.addVertex(h,u,p),void 0!==r&&""!==r){var d=this.uvs.length;h=this.parseUVIndex(r,d),u=this.parseUVIndex(a,d),p=this.parseUVIndex(o,d),this.addUV(h,u,p)}if(void 0!==n&&""!==n){var f=this.normals.length;h=this.parseNormalIndex(n,f),u=n===s?h:this.parseNormalIndex(s,f),p=n===l?h:this.parseNormalIndex(l,f),this.addNormal(h,u,p)}this.colors.length>0&&this.addColor(h,u,p)},addPointGeometry:function(e){this.object.geometry.type="Points";for(var t=this.vertices.length,i=0,r=e.length;i<r;i++)this.addVertexPoint(this.parseVertexIndex(e[i],t))},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var i=this.vertices.length,r=this.uvs.length,a=0,o=e.length;a<o;a++)this.addVertexLine(this.parseVertexIndex(e[a],i));var n=0;for(o=t.length;n<o;n++)this.addUVLine(this.parseUVIndex(t[n],r))}};return e.startObject("",!1),e}function a(e){p.Loader.call(this,e),this.materials=null}return a.prototype=Object.assign(Object.create(p.Loader.prototype),{constructor:a,load:function(e,t,i,r){var a=this,o=new p.FileLoader(a.manager);o.setPath(this.path),o.load(e,(function(e){t(a.parse(e))}),i,r)},setMaterials:function(e){return this.materials=e,this},parse:function(a){console.time("OBJLoader");var o=new r;-1!==a.indexOf("\r\n")&&(a=a.replace(/\r\n/g,"\n")),-1!==a.indexOf("\\\n")&&(a=a.replace(/\\\n/g,""));for(var n=a.split("\n"),s="",l="",c=[],h="function"==typeof"".trimLeft,u=0,d=n.length;u<d;u++)if(s=n[u],0!==(s=h?s.trimLeft():s.trim()).length&&"#"!==(l=s.charAt(0)))if("v"===l){var f=s.split(/\s+/);switch(f[0]){case"v":o.vertices.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3])),f.length>=7&&o.colors.push(parseFloat(f[4]),parseFloat(f[5]),parseFloat(f[6]));break;case"vn":o.normals.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3]));break;case"vt":o.uvs.push(parseFloat(f[1]),parseFloat(f[2]))}}else if("f"===l){for(var g=s.substr(1).trim().split(/\s+/),m=[],v=0,y=g.length;v<y;v++){var _=g[v];if(_.length>0){var b=_.split("/");m.push(b)}}var A=m[0];for(v=1,y=m.length-1;v<y;v++){var E=m[v],w=m[v+1];o.addFace(A[0],E[0],w[0],A[1],E[1],w[1],A[2],E[2],w[2])}}else if("l"===l){var x=s.substring(1).trim().split(" "),T=[],I=[];if(-1===s.indexOf("/"))T=x;else for(var L=0,S=x.length;L<S;L++){var M=x[L].split("/");""!==M[0]&&T.push(M[0]),""!==M[1]&&I.push(M[1])}o.addLineGeometry(T,I)}else if("p"===l){var C=s.substr(1).trim().split(" ");o.addPointGeometry(C)}else if(null!==(c=e.exec(s))){var k=(" "+c[0].substr(1).trim()).substr(1);o.startObject(k)}else if(i.test(s))o.object.startMaterial(s.substring(7).trim(),o.materialLibraries);else if(t.test(s))o.materialLibraries.push(s.substring(7).trim());else{if("s"!==l){if("\0"===s)continue;throw new Error('THREE.OBJLoader: Unexpected line: "'+s+'"')}if((c=s.split(" ")).length>1){var R=c[1].trim().toLowerCase();o.object.smooth="0"!==R&&"off"!==R}else o.object.smooth=!0;(G=o.object.currentMaterial())&&(G.smooth=o.object.smooth)}o.finalize();var P=new p.Group;P.materialLibraries=[].concat(o.materialLibraries);for(u=0,d=o.objects.length;u<d;u++){var O=o.objects[u],U=O.geometry,F=O.materials,D="Line"===U.type,B="Points"===U.type,N=!1;if(0!==U.vertices.length){var H=new p.BufferGeometry;H.addAttribute("position",new p.Float32BufferAttribute(U.vertices,3)),U.normals.length>0?H.addAttribute("normal",new p.Float32BufferAttribute(U.normals,3)):H.computeVertexNormals(),U.colors.length>0&&(N=!0,H.addAttribute("color",new p.Float32BufferAttribute(U.colors,3))),U.uvs.length>0&&H.addAttribute("uv",new p.Float32BufferAttribute(U.uvs,2));for(var V,$=[],W=0,z=F.length;W<z;W++){var j=F[W],G=void 0;if(null!==this.materials)if(G=this.materials.create(j.name),!D||!G||G instanceof p.LineBasicMaterial){if(B&&G&&!(G instanceof p.PointsMaterial)){var X=new p.PointsMaterial({size:10,sizeAttenuation:!1});p.Material.prototype.copy.call(X,G),X.color.copy(G.color),X.map=G.map,X.lights=!1,G=X}}else{var Y=new p.LineBasicMaterial;p.Material.prototype.copy.call(Y,G),Y.color.copy(G.color),Y.lights=!1,G=Y}G||((G=D?new p.LineBasicMaterial:B?new p.PointsMaterial({size:1,sizeAttenuation:!1}):new p.MeshPhongMaterial).name=j.name),G.flatShading=!j.smooth,G.vertexColors=N?p.VertexColors:p.NoColors,$.push(G)}if($.length>1){for(W=0,z=F.length;W<z;W++){j=F[W];H.addGroup(j.groupStart,j.groupCount,W)}V=D?new p.LineSegments(H,$):B?new p.Points(H,$):new p.Mesh(H,$)}else V=D?new p.LineSegments(H,$[0]):B?new p.Points(H,$[0]):new p.Mesh(H,$[0]);V.name=O.name,P.add(V)}}return console.timeEnd("OBJLoader"),P}}),a}(),ce=function(e){p.Loader.call(this,e)};function he(){}function ue(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t,this.encoder=new he}function pe(){}function de(){}ce.prototype=Object.assign(Object.create(p.Loader.prototype),{constructor:ce,load:function(e,t,i,r){var a=this,o=""===this.path?p.LoaderUtils.extractUrlBase(e):this.path,n=new p.FileLoader(this.manager);n.setPath(this.path),n.load(e,(function(e){t(a.parse(e,o))}),i,r)},setMaterialOptions:function(e){return this.materialOptions=e,this},parse:function(e,t){for(var i=e.split("\n"),r={},a=/\s+/,o={},n=0;n<i.length;n++){var s=i[n];if(0!==(s=s.trim()).length&&"#"!==s.charAt(0)){var l=s.indexOf(" "),c=l>=0?s.substring(0,l):s;c=c.toLowerCase();var h=l>=0?s.substring(l+1):"";if(h=h.trim(),"newmtl"===c)r={name:h},o[h]=r;else if("ka"===c||"kd"===c||"ks"===c||"ke"===c){var u=h.split(a,3);r[c]=[parseFloat(u[0]),parseFloat(u[1]),parseFloat(u[2])]}else r[c]=h}}var p=new ce.MaterialCreator(this.resourcePath||t,this.materialOptions);return p.setCrossOrigin(this.crossOrigin),p.setManager(this.manager),p.setMaterials(o),p}}),(ce.MaterialCreator=function(e,t){this.baseUrl=e||"",this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:p.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:p.RepeatWrapping}).prototype={constructor:ce.MaterialCreator,crossOrigin:"anonymous",setCrossOrigin:function(e){return this.crossOrigin=e,this},setManager:function(e){this.manager=e},setMaterials:function(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(e){if(!this.options)return e;var t={};for(var i in e){var r=e[i],a={};for(var o in t[i]=a,r){var n=!0,s=r[o],l=o.toLowerCase();switch(l){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(s=[s[0]/255,s[1]/255,s[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===s[0]&&0===s[1]&&0===s[2]&&(n=!1)}n&&(a[l]=s)}}return t},preload:function(){for(var e in this.materialsInfo)this.create(e)},getIndex:function(e){return this.nameLookup[e]},getAsArray:function(){var e=0;for(var t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray},create:function(e){return void 0===this.materials[e]&&this.createMaterial_(e),this.materials[e]},createMaterial_:function(e){var t=this,i=this.materialsInfo[e],r={name:e,side:this.side};function a(e,i){if(!r[e]){var a,o,n=t.getTextureParams(i,r),s=t.loadTexture((a=t.baseUrl,"string"!=typeof(o=n.url)||""===o?"":/^https?:\/\//i.test(o)?o:a+o));s.repeat.copy(n.scale),s.offset.copy(n.offset),s.wrapS=t.wrap,s.wrapT=t.wrap,r[e]=s}}for(var o in i){var n,s=i[o];if(""!==s)switch(o.toLowerCase()){case"kd":r.color=(new p.Color).fromArray(s);break;case"ks":r.specular=(new p.Color).fromArray(s);break;case"ke":r.emissive=(new p.Color).fromArray(s);break;case"map_kd":a("map",s);break;case"map_ks":a("specularMap",s);break;case"map_ke":a("emissiveMap",s);break;case"norm":a("normalMap",s);break;case"map_bump":case"bump":a("bumpMap",s);break;case"map_d":a("alphaMap",s),r.transparent=!0;break;case"ns":r.shininess=parseFloat(s);break;case"d":(n=parseFloat(s))<1&&(r.opacity=n,r.transparent=!0);break;case"tr":n=parseFloat(s),this.options&&this.options.invertTrProperty&&(n=1-n),n>0&&(r.opacity=1-n,r.transparent=!0)}}return this.materials[e]=new p.MeshPhongMaterial(r),this.materials[e]},getTextureParams:function(e,t){var i,r={scale:new p.Vector2(1,1),offset:new p.Vector2(0,0)},a=e.split(/\s+/);return(i=a.indexOf("-bm"))>=0&&(t.bumpScale=parseFloat(a[i+1]),a.splice(i,2)),(i=a.indexOf("-s"))>=0&&(r.scale.set(parseFloat(a[i+1]),parseFloat(a[i+2])),a.splice(i,4)),(i=a.indexOf("-o"))>=0&&(r.offset.set(parseFloat(a[i+1]),parseFloat(a[i+2])),a.splice(i,4)),r.url=a.join(" ").trim(),r},loadTexture:function(e,t,i,r,a){var o,n=e.split("\\").pop();console.log("fixedUrl",n);var s=void 0!==this.manager?this.manager:p.DefaultLoadingManager,l=s.getHandler(n);if(console.log("MTLLoader: url?",e),null===l){var c=new p.TextureLoader(s),h=new ae(s);l=".tga"===e.slice(-4).toLowerCase()?h:c}return l.setCrossOrigin&&l.setCrossOrigin(this.crossOrigin),o=l.load(n,i,r,a),void 0!==t&&(o.mapping=t),o}},he.prototype.s2u=function(e){for(var t=this.s2uTable,i="",r=0;r<e.length;){var a=e[r++];if(!(a>=0&&a<=126||a>=161&&a<=223)&&r<e.length&&(a=a<<8|e[r++]),void 0===t[a])throw"unknown char code "+a+".";i+=String.fromCharCode(t[a])}return i},he.prototype.s2uTable={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:21,22:22,23:23,24:24,25:25,26:26,27:27,28:28,29:29,30:30,31:31,32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:92,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:126,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:65340,33120:65374,33121:8741,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:65293,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:65504,33170:65505,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:65506,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34624:9312,34625:9313,34626:9314,34627:9315,34628:9316,34629:9317,34630:9318,34631:9319,34632:9320,34633:9321,34634:9322,34635:9323,34636:9324,34637:9325,34638:9326,34639:9327,34640:9328,34641:9329,34642:9330,34643:9331,34644:8544,34645:8545,34646:8546,34647:8547,34648:8548,34649:8549,34650:8550,34651:8551,34652:8552,34653:8553,34655:13129,34656:13076,34657:13090,34658:13133,34659:13080,34660:13095,34661:13059,34662:13110,34663:13137,34664:13143,34665:13069,34666:13094,34667:13091,34668:13099,34669:13130,34670:13115,34671:13212,34672:13213,34673:13214,34674:13198,34675:13199,34676:13252,34677:13217,34686:13179,34688:12317,34689:12319,34690:8470,34691:13261,34692:8481,34693:12964,34694:12965,34695:12966,34696:12967,34697:12968,34698:12849,34699:12850,34700:12857,34701:13182,34702:13181,34703:13180,34704:8786,34705:8801,34706:8747,34707:8750,34708:8721,34709:8730,34710:8869,34711:8736,34712:8735,34713:8895,34714:8757,34715:8745,34716:8746,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35e3:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36e3:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37e3:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38e3:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39e3:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,4e4:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58e3:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59e3:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,6e4:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081,60736:32394,60737:35100,60738:37704,60739:37512,60740:34012,60741:20425,60742:28859,60743:26161,60744:26824,60745:37625,60746:26363,60747:24389,60748:20008,60749:20193,60750:20220,60751:20224,60752:20227,60753:20281,60754:20310,60755:20370,60756:20362,60757:20378,60758:20372,60759:20429,60760:20544,60761:20514,60762:20479,60763:20510,60764:20550,60765:20592,60766:20546,60767:20628,60768:20724,60769:20696,60770:20810,60771:20836,60772:20893,60773:20926,60774:20972,60775:21013,60776:21148,60777:21158,60778:21184,60779:21211,60780:21248,60781:21255,60782:21284,60783:21362,60784:21395,60785:21426,60786:21469,60787:64014,60788:21660,60789:21642,60790:21673,60791:21759,60792:21894,60793:22361,60794:22373,60795:22444,60796:22472,60797:22471,60798:64015,60800:64016,60801:22686,60802:22706,60803:22795,60804:22867,60805:22875,60806:22877,60807:22883,60808:22948,60809:22970,60810:23382,60811:23488,60812:29999,60813:23512,60814:23532,60815:23582,60816:23718,60817:23738,60818:23797,60819:23847,60820:23891,60821:64017,60822:23874,60823:23917,60824:23992,60825:23993,60826:24016,60827:24353,60828:24372,60829:24423,60830:24503,60831:24542,60832:24669,60833:24709,60834:24714,60835:24798,60836:24789,60837:24864,60838:24818,60839:24849,60840:24887,60841:24880,60842:24984,60843:25107,60844:25254,60845:25589,60846:25696,60847:25757,60848:25806,60849:25934,60850:26112,60851:26133,60852:26171,60853:26121,60854:26158,60855:26142,60856:26148,60857:26213,60858:26199,60859:26201,60860:64018,60861:26227,60862:26265,60863:26272,60864:26290,60865:26303,60866:26362,60867:26382,60868:63785,60869:26470,60870:26555,60871:26706,60872:26560,60873:26625,60874:26692,60875:26831,60876:64019,60877:26984,60878:64020,60879:27032,60880:27106,60881:27184,60882:27243,60883:27206,60884:27251,60885:27262,60886:27362,60887:27364,60888:27606,60889:27711,60890:27740,60891:27782,60892:27759,60893:27866,60894:27908,60895:28039,60896:28015,60897:28054,60898:28076,60899:28111,60900:28152,60901:28146,60902:28156,60903:28217,60904:28252,60905:28199,60906:28220,60907:28351,60908:28552,60909:28597,60910:28661,60911:28677,60912:28679,60913:28712,60914:28805,60915:28843,60916:28943,60917:28932,60918:29020,60919:28998,60920:28999,60921:64021,60922:29121,60923:29182,60924:29361,60992:29374,60993:29476,60994:64022,60995:29559,60996:29629,60997:29641,60998:29654,60999:29667,61e3:29650,61001:29703,61002:29685,61003:29734,61004:29738,61005:29737,61006:29742,61007:29794,61008:29833,61009:29855,61010:29953,61011:30063,61012:30338,61013:30364,61014:30366,61015:30363,61016:30374,61017:64023,61018:30534,61019:21167,61020:30753,61021:30798,61022:30820,61023:30842,61024:31024,61025:64024,61026:64025,61027:64026,61028:31124,61029:64027,61030:31131,61031:31441,61032:31463,61033:64028,61034:31467,61035:31646,61036:64029,61037:32072,61038:32092,61039:32183,61040:32160,61041:32214,61042:32338,61043:32583,61044:32673,61045:64030,61046:33537,61047:33634,61048:33663,61049:33735,61050:33782,61051:33864,61052:33972,61053:34131,61054:34137,61056:34155,61057:64031,61058:34224,61059:64032,61060:64033,61061:34823,61062:35061,61063:35346,61064:35383,61065:35449,61066:35495,61067:35518,61068:35551,61069:64034,61070:35574,61071:35667,61072:35711,61073:36080,61074:36084,61075:36114,61076:36214,61077:64035,61078:36559,61079:64036,61080:64037,61081:36967,61082:37086,61083:64038,61084:37141,61085:37159,61086:37338,61087:37335,61088:37342,61089:37357,61090:37358,61091:37348,61092:37349,61093:37382,61094:37392,61095:37386,61096:37434,61097:37440,61098:37436,61099:37454,61100:37465,61101:37457,61102:37433,61103:37479,61104:37543,61105:37495,61106:37496,61107:37607,61108:37591,61109:37593,61110:37584,61111:64039,61112:37589,61113:37600,61114:37587,61115:37669,61116:37665,61117:37627,61118:64040,61119:37662,61120:37631,61121:37661,61122:37634,61123:37744,61124:37719,61125:37796,61126:37830,61127:37854,61128:37880,61129:37937,61130:37957,61131:37960,61132:38290,61133:63964,61134:64041,61135:38557,61136:38575,61137:38707,61138:38715,61139:38723,61140:38733,61141:38735,61142:38737,61143:38741,61144:38999,61145:39013,61146:64042,61147:64043,61148:39207,61149:64044,61150:39326,61151:39502,61152:39641,61153:39644,61154:39797,61155:39794,61156:39823,61157:39857,61158:39867,61159:39936,61160:40304,61161:40299,61162:64045,61163:40473,61164:40657,61167:8560,61168:8561,61169:8562,61170:8563,61171:8564,61172:8565,61173:8566,61174:8567,61175:8568,61176:8569,61177:65506,61178:65508,61179:65287,61180:65282,61504:57344,61505:57345,61506:57346,61507:57347,61508:57348,61509:57349,61510:57350,61511:57351,61512:57352,61513:57353,61514:57354,61515:57355,61516:57356,61517:57357,61518:57358,61519:57359,61520:57360,61521:57361,61522:57362,61523:57363,61524:57364,61525:57365,61526:57366,61527:57367,61528:57368,61529:57369,61530:57370,61531:57371,61532:57372,61533:57373,61534:57374,61535:57375,61536:57376,61537:57377,61538:57378,61539:57379,61540:57380,61541:57381,61542:57382,61543:57383,61544:57384,61545:57385,61546:57386,61547:57387,61548:57388,61549:57389,61550:57390,61551:57391,61552:57392,61553:57393,61554:57394,61555:57395,61556:57396,61557:57397,61558:57398,61559:57399,61560:57400,61561:57401,61562:57402,61563:57403,61564:57404,61565:57405,61566:57406,61568:57407,61569:57408,61570:57409,61571:57410,61572:57411,61573:57412,61574:57413,61575:57414,61576:57415,61577:57416,61578:57417,61579:57418,61580:57419,61581:57420,61582:57421,61583:57422,61584:57423,61585:57424,61586:57425,61587:57426,61588:57427,61589:57428,61590:57429,61591:57430,61592:57431,61593:57432,61594:57433,61595:57434,61596:57435,61597:57436,61598:57437,61599:57438,61600:57439,61601:57440,61602:57441,61603:57442,61604:57443,61605:57444,61606:57445,61607:57446,61608:57447,61609:57448,61610:57449,61611:57450,61612:57451,61613:57452,61614:57453,61615:57454,61616:57455,61617:57456,61618:57457,61619:57458,61620:57459,61621:57460,61622:57461,61623:57462,61624:57463,61625:57464,61626:57465,61627:57466,61628:57467,61629:57468,61630:57469,61631:57470,61632:57471,61633:57472,61634:57473,61635:57474,61636:57475,61637:57476,61638:57477,61639:57478,61640:57479,61641:57480,61642:57481,61643:57482,61644:57483,61645:57484,61646:57485,61647:57486,61648:57487,61649:57488,61650:57489,61651:57490,61652:57491,61653:57492,61654:57493,61655:57494,61656:57495,61657:57496,61658:57497,61659:57498,61660:57499,61661:57500,61662:57501,61663:57502,61664:57503,61665:57504,61666:57505,61667:57506,61668:57507,61669:57508,61670:57509,61671:57510,61672:57511,61673:57512,61674:57513,61675:57514,61676:57515,61677:57516,61678:57517,61679:57518,61680:57519,61681:57520,61682:57521,61683:57522,61684:57523,61685:57524,61686:57525,61687:57526,61688:57527,61689:57528,61690:57529,61691:57530,61692:57531,61760:57532,61761:57533,61762:57534,61763:57535,61764:57536,61765:57537,61766:57538,61767:57539,61768:57540,61769:57541,61770:57542,61771:57543,61772:57544,61773:57545,61774:57546,61775:57547,61776:57548,61777:57549,61778:57550,61779:57551,61780:57552,61781:57553,61782:57554,61783:57555,61784:57556,61785:57557,61786:57558,61787:57559,61788:57560,61789:57561,61790:57562,61791:57563,61792:57564,61793:57565,61794:57566,61795:57567,61796:57568,61797:57569,61798:57570,61799:57571,61800:57572,61801:57573,61802:57574,61803:57575,61804:57576,61805:57577,61806:57578,61807:57579,61808:57580,61809:57581,61810:57582,61811:57583,61812:57584,61813:57585,61814:57586,61815:57587,61816:57588,61817:57589,61818:57590,61819:57591,61820:57592,61821:57593,61822:57594,61824:57595,61825:57596,61826:57597,61827:57598,61828:57599,61829:57600,61830:57601,61831:57602,61832:57603,61833:57604,61834:57605,61835:57606,61836:57607,61837:57608,61838:57609,61839:57610,61840:57611,61841:57612,61842:57613,61843:57614,61844:57615,61845:57616,61846:57617,61847:57618,61848:57619,61849:57620,61850:57621,61851:57622,61852:57623,61853:57624,61854:57625,61855:57626,61856:57627,61857:57628,61858:57629,61859:57630,61860:57631,61861:57632,61862:57633,61863:57634,61864:57635,61865:57636,61866:57637,61867:57638,61868:57639,61869:57640,61870:57641,61871:57642,61872:57643,61873:57644,61874:57645,61875:57646,61876:57647,61877:57648,61878:57649,61879:57650,61880:57651,61881:57652,61882:57653,61883:57654,61884:57655,61885:57656,61886:57657,61887:57658,61888:57659,61889:57660,61890:57661,61891:57662,61892:57663,61893:57664,61894:57665,61895:57666,61896:57667,61897:57668,61898:57669,61899:57670,61900:57671,61901:57672,61902:57673,61903:57674,61904:57675,61905:57676,61906:57677,61907:57678,61908:57679,61909:57680,61910:57681,61911:57682,61912:57683,61913:57684,61914:57685,61915:57686,61916:57687,61917:57688,61918:57689,61919:57690,61920:57691,61921:57692,61922:57693,61923:57694,61924:57695,61925:57696,61926:57697,61927:57698,61928:57699,61929:57700,61930:57701,61931:57702,61932:57703,61933:57704,61934:57705,61935:57706,61936:57707,61937:57708,61938:57709,61939:57710,61940:57711,61941:57712,61942:57713,61943:57714,61944:57715,61945:57716,61946:57717,61947:57718,61948:57719,62016:57720,62017:57721,62018:57722,62019:57723,62020:57724,62021:57725,62022:57726,62023:57727,62024:57728,62025:57729,62026:57730,62027:57731,62028:57732,62029:57733,62030:57734,62031:57735,62032:57736,62033:57737,62034:57738,62035:57739,62036:57740,62037:57741,62038:57742,62039:57743,62040:57744,62041:57745,62042:57746,62043:57747,62044:57748,62045:57749,62046:57750,62047:57751,62048:57752,62049:57753,62050:57754,62051:57755,62052:57756,62053:57757,62054:57758,62055:57759,62056:57760,62057:57761,62058:57762,62059:57763,62060:57764,62061:57765,62062:57766,62063:57767,62064:57768,62065:57769,62066:57770,62067:57771,62068:57772,62069:57773,62070:57774,62071:57775,62072:57776,62073:57777,62074:57778,62075:57779,62076:57780,62077:57781,62078:57782,62080:57783,62081:57784,62082:57785,62083:57786,62084:57787,62085:57788,62086:57789,62087:57790,62088:57791,62089:57792,62090:57793,62091:57794,62092:57795,62093:57796,62094:57797,62095:57798,62096:57799,62097:57800,62098:57801,62099:57802,62100:57803,62101:57804,62102:57805,62103:57806,62104:57807,62105:57808,62106:57809,62107:57810,62108:57811,62109:57812,62110:57813,62111:57814,62112:57815,62113:57816,62114:57817,62115:57818,62116:57819,62117:57820,62118:57821,62119:57822,62120:57823,62121:57824,62122:57825,62123:57826,62124:57827,62125:57828,62126:57829,62127:57830,62128:57831,62129:57832,62130:57833,62131:57834,62132:57835,62133:57836,62134:57837,62135:57838,62136:57839,62137:57840,62138:57841,62139:57842,62140:57843,62141:57844,62142:57845,62143:57846,62144:57847,62145:57848,62146:57849,62147:57850,62148:57851,62149:57852,62150:57853,62151:57854,62152:57855,62153:57856,62154:57857,62155:57858,62156:57859,62157:57860,62158:57861,62159:57862,62160:57863,62161:57864,62162:57865,62163:57866,62164:57867,62165:57868,62166:57869,62167:57870,62168:57871,62169:57872,62170:57873,62171:57874,62172:57875,62173:57876,62174:57877,62175:57878,62176:57879,62177:57880,62178:57881,62179:57882,62180:57883,62181:57884,62182:57885,62183:57886,62184:57887,62185:57888,62186:57889,62187:57890,62188:57891,62189:57892,62190:57893,62191:57894,62192:57895,62193:57896,62194:57897,62195:57898,62196:57899,62197:57900,62198:57901,62199:57902,62200:57903,62201:57904,62202:57905,62203:57906,62204:57907,62272:57908,62273:57909,62274:57910,62275:57911,62276:57912,62277:57913,62278:57914,62279:57915,62280:57916,62281:57917,62282:57918,62283:57919,62284:57920,62285:57921,62286:57922,62287:57923,62288:57924,62289:57925,62290:57926,62291:57927,62292:57928,62293:57929,62294:57930,62295:57931,62296:57932,62297:57933,62298:57934,62299:57935,62300:57936,62301:57937,62302:57938,62303:57939,62304:57940,62305:57941,62306:57942,62307:57943,62308:57944,62309:57945,62310:57946,62311:57947,62312:57948,62313:57949,62314:57950,62315:57951,62316:57952,62317:57953,62318:57954,62319:57955,62320:57956,62321:57957,62322:57958,62323:57959,62324:57960,62325:57961,62326:57962,62327:57963,62328:57964,62329:57965,62330:57966,62331:57967,62332:57968,62333:57969,62334:57970,62336:57971,62337:57972,62338:57973,62339:57974,62340:57975,62341:57976,62342:57977,62343:57978,62344:57979,62345:57980,62346:57981,62347:57982,62348:57983,62349:57984,62350:57985,62351:57986,62352:57987,62353:57988,62354:57989,62355:57990,62356:57991,62357:57992,62358:57993,62359:57994,62360:57995,62361:57996,62362:57997,62363:57998,62364:57999,62365:58e3,62366:58001,62367:58002,62368:58003,62369:58004,62370:58005,62371:58006,62372:58007,62373:58008,62374:58009,62375:58010,62376:58011,62377:58012,62378:58013,62379:58014,62380:58015,62381:58016,62382:58017,62383:58018,62384:58019,62385:58020,62386:58021,62387:58022,62388:58023,62389:58024,62390:58025,62391:58026,62392:58027,62393:58028,62394:58029,62395:58030,62396:58031,62397:58032,62398:58033,62399:58034,62400:58035,62401:58036,62402:58037,62403:58038,62404:58039,62405:58040,62406:58041,62407:58042,62408:58043,62409:58044,62410:58045,62411:58046,62412:58047,62413:58048,62414:58049,62415:58050,62416:58051,62417:58052,62418:58053,62419:58054,62420:58055,62421:58056,62422:58057,62423:58058,62424:58059,62425:58060,62426:58061,62427:58062,62428:58063,62429:58064,62430:58065,62431:58066,62432:58067,62433:58068,62434:58069,62435:58070,62436:58071,62437:58072,62438:58073,62439:58074,62440:58075,62441:58076,62442:58077,62443:58078,62444:58079,62445:58080,62446:58081,62447:58082,62448:58083,62449:58084,62450:58085,62451:58086,62452:58087,62453:58088,62454:58089,62455:58090,62456:58091,62457:58092,62458:58093,62459:58094,62460:58095,62528:58096,62529:58097,62530:58098,62531:58099,62532:58100,62533:58101,62534:58102,62535:58103,62536:58104,62537:58105,62538:58106,62539:58107,62540:58108,62541:58109,62542:58110,62543:58111,62544:58112,62545:58113,62546:58114,62547:58115,62548:58116,62549:58117,62550:58118,62551:58119,62552:58120,62553:58121,62554:58122,62555:58123,62556:58124,62557:58125,62558:58126,62559:58127,62560:58128,62561:58129,62562:58130,62563:58131,62564:58132,62565:58133,62566:58134,62567:58135,62568:58136,62569:58137,62570:58138,62571:58139,62572:58140,62573:58141,62574:58142,62575:58143,62576:58144,62577:58145,62578:58146,62579:58147,62580:58148,62581:58149,62582:58150,62583:58151,62584:58152,62585:58153,62586:58154,62587:58155,62588:58156,62589:58157,62590:58158,62592:58159,62593:58160,62594:58161,62595:58162,62596:58163,62597:58164,62598:58165,62599:58166,62600:58167,62601:58168,62602:58169,62603:58170,62604:58171,62605:58172,62606:58173,62607:58174,62608:58175,62609:58176,62610:58177,62611:58178,62612:58179,62613:58180,62614:58181,62615:58182,62616:58183,62617:58184,62618:58185,62619:58186,62620:58187,62621:58188,62622:58189,62623:58190,62624:58191,62625:58192,62626:58193,62627:58194,62628:58195,62629:58196,62630:58197,62631:58198,62632:58199,62633:58200,62634:58201,62635:58202,62636:58203,62637:58204,62638:58205,62639:58206,62640:58207,62641:58208,62642:58209,62643:58210,62644:58211,62645:58212,62646:58213,62647:58214,62648:58215,62649:58216,62650:58217,62651:58218,62652:58219,62653:58220,62654:58221,62655:58222,62656:58223,62657:58224,62658:58225,62659:58226,62660:58227,62661:58228,62662:58229,62663:58230,62664:58231,62665:58232,62666:58233,62667:58234,62668:58235,62669:58236,62670:58237,62671:58238,62672:58239,62673:58240,62674:58241,62675:58242,62676:58243,62677:58244,62678:58245,62679:58246,62680:58247,62681:58248,62682:58249,62683:58250,62684:58251,62685:58252,62686:58253,62687:58254,62688:58255,62689:58256,62690:58257,62691:58258,62692:58259,62693:58260,62694:58261,62695:58262,62696:58263,62697:58264,62698:58265,62699:58266,62700:58267,62701:58268,62702:58269,62703:58270,62704:58271,62705:58272,62706:58273,62707:58274,62708:58275,62709:58276,62710:58277,62711:58278,62712:58279,62713:58280,62714:58281,62715:58282,62716:58283,62784:58284,62785:58285,62786:58286,62787:58287,62788:58288,62789:58289,62790:58290,62791:58291,62792:58292,62793:58293,62794:58294,62795:58295,62796:58296,62797:58297,62798:58298,62799:58299,62800:58300,62801:58301,62802:58302,62803:58303,62804:58304,62805:58305,62806:58306,62807:58307,62808:58308,62809:58309,62810:58310,62811:58311,62812:58312,62813:58313,62814:58314,62815:58315,62816:58316,62817:58317,62818:58318,62819:58319,62820:58320,62821:58321,62822:58322,62823:58323,62824:58324,62825:58325,62826:58326,62827:58327,62828:58328,62829:58329,62830:58330,62831:58331,62832:58332,62833:58333,62834:58334,62835:58335,62836:58336,62837:58337,62838:58338,62839:58339,62840:58340,62841:58341,62842:58342,62843:58343,62844:58344,62845:58345,62846:58346,62848:58347,62849:58348,62850:58349,62851:58350,62852:58351,62853:58352,62854:58353,62855:58354,62856:58355,62857:58356,62858:58357,62859:58358,62860:58359,62861:58360,62862:58361,62863:58362,62864:58363,62865:58364,62866:58365,62867:58366,62868:58367,62869:58368,62870:58369,62871:58370,62872:58371,62873:58372,62874:58373,62875:58374,62876:58375,62877:58376,62878:58377,62879:58378,62880:58379,62881:58380,62882:58381,62883:58382,62884:58383,62885:58384,62886:58385,62887:58386,62888:58387,62889:58388,62890:58389,62891:58390,62892:58391,62893:58392,62894:58393,62895:58394,62896:58395,62897:58396,62898:58397,62899:58398,62900:58399,62901:58400,62902:58401,62903:58402,62904:58403,62905:58404,62906:58405,62907:58406,62908:58407,62909:58408,62910:58409,62911:58410,62912:58411,62913:58412,62914:58413,62915:58414,62916:58415,62917:58416,62918:58417,62919:58418,62920:58419,62921:58420,62922:58421,62923:58422,62924:58423,62925:58424,62926:58425,62927:58426,62928:58427,62929:58428,62930:58429,62931:58430,62932:58431,62933:58432,62934:58433,62935:58434,62936:58435,62937:58436,62938:58437,62939:58438,62940:58439,62941:58440,62942:58441,62943:58442,62944:58443,62945:58444,62946:58445,62947:58446,62948:58447,62949:58448,62950:58449,62951:58450,62952:58451,62953:58452,62954:58453,62955:58454,62956:58455,62957:58456,62958:58457,62959:58458,62960:58459,62961:58460,62962:58461,62963:58462,62964:58463,62965:58464,62966:58465,62967:58466,62968:58467,62969:58468,62970:58469,62971:58470,62972:58471,63040:58472,63041:58473,63042:58474,63043:58475,63044:58476,63045:58477,63046:58478,63047:58479,63048:58480,63049:58481,63050:58482,63051:58483,63052:58484,63053:58485,63054:58486,63055:58487,63056:58488,63057:58489,63058:58490,63059:58491,63060:58492,63061:58493,63062:58494,63063:58495,63064:58496,63065:58497,63066:58498,63067:58499,63068:58500,63069:58501,63070:58502,63071:58503,63072:58504,63073:58505,63074:58506,63075:58507,63076:58508,63077:58509,63078:58510,63079:58511,63080:58512,63081:58513,63082:58514,63083:58515,63084:58516,63085:58517,63086:58518,63087:58519,63088:58520,63089:58521,63090:58522,63091:58523,63092:58524,63093:58525,63094:58526,63095:58527,63096:58528,63097:58529,63098:58530,63099:58531,63100:58532,63101:58533,63102:58534,63104:58535,63105:58536,63106:58537,63107:58538,63108:58539,63109:58540,63110:58541,63111:58542,63112:58543,63113:58544,63114:58545,63115:58546,63116:58547,63117:58548,63118:58549,63119:58550,63120:58551,63121:58552,63122:58553,63123:58554,63124:58555,63125:58556,63126:58557,63127:58558,63128:58559,63129:58560,63130:58561,63131:58562,63132:58563,63133:58564,63134:58565,63135:58566,63136:58567,63137:58568,63138:58569,63139:58570,63140:58571,63141:58572,63142:58573,63143:58574,63144:58575,63145:58576,63146:58577,63147:58578,63148:58579,63149:58580,63150:58581,63151:58582,63152:58583,63153:58584,63154:58585,63155:58586,63156:58587,63157:58588,63158:58589,63159:58590,63160:58591,63161:58592,63162:58593,63163:58594,63164:58595,63165:58596,63166:58597,63167:58598,63168:58599,63169:58600,63170:58601,63171:58602,63172:58603,63173:58604,63174:58605,63175:58606,63176:58607,63177:58608,63178:58609,63179:58610,63180:58611,63181:58612,63182:58613,63183:58614,63184:58615,63185:58616,63186:58617,63187:58618,63188:58619,63189:58620,63190:58621,63191:58622,63192:58623,63193:58624,63194:58625,63195:58626,63196:58627,63197:58628,63198:58629,63199:58630,63200:58631,63201:58632,63202:58633,63203:58634,63204:58635,63205:58636,63206:58637,63207:58638,63208:58639,63209:58640,63210:58641,63211:58642,63212:58643,63213:58644,63214:58645,63215:58646,63216:58647,63217:58648,63218:58649,63219:58650,63220:58651,63221:58652,63222:58653,63223:58654,63224:58655,63225:58656,63226:58657,63227:58658,63228:58659,63296:58660,63297:58661,63298:58662,63299:58663,63300:58664,63301:58665,63302:58666,63303:58667,63304:58668,63305:58669,63306:58670,63307:58671,63308:58672,63309:58673,63310:58674,63311:58675,63312:58676,63313:58677,63314:58678,63315:58679,63316:58680,63317:58681,63318:58682,63319:58683,63320:58684,63321:58685,63322:58686,63323:58687,63324:58688,63325:58689,63326:58690,63327:58691,63328:58692,63329:58693,63330:58694,63331:58695,63332:58696,63333:58697,63334:58698,63335:58699,63336:58700,63337:58701,63338:58702,63339:58703,63340:58704,63341:58705,63342:58706,63343:58707,63344:58708,63345:58709,63346:58710,63347:58711,63348:58712,63349:58713,63350:58714,63351:58715,63352:58716,63353:58717,63354:58718,63355:58719,63356:58720,63357:58721,63358:58722,63360:58723,63361:58724,63362:58725,63363:58726,63364:58727,63365:58728,63366:58729,63367:58730,63368:58731,63369:58732,63370:58733,63371:58734,63372:58735,63373:58736,63374:58737,63375:58738,63376:58739,63377:58740,63378:58741,63379:58742,63380:58743,63381:58744,63382:58745,63383:58746,63384:58747,63385:58748,63386:58749,63387:58750,63388:58751,63389:58752,63390:58753,63391:58754,63392:58755,63393:58756,63394:58757,63395:58758,63396:58759,63397:58760,63398:58761,63399:58762,63400:58763,63401:58764,63402:58765,63403:58766,63404:58767,63405:58768,63406:58769,63407:58770,63408:58771,63409:58772,63410:58773,63411:58774,63412:58775,63413:58776,63414:58777,63415:58778,63416:58779,63417:58780,63418:58781,63419:58782,63420:58783,63421:58784,63422:58785,63423:58786,63424:58787,63425:58788,63426:58789,63427:58790,63428:58791,63429:58792,63430:58793,63431:58794,63432:58795,63433:58796,63434:58797,63435:58798,63436:58799,63437:58800,63438:58801,63439:58802,63440:58803,63441:58804,63442:58805,63443:58806,63444:58807,63445:58808,63446:58809,63447:58810,63448:58811,63449:58812,63450:58813,63451:58814,63452:58815,63453:58816,63454:58817,63455:58818,63456:58819,63457:58820,63458:58821,63459:58822,63460:58823,63461:58824,63462:58825,63463:58826,63464:58827,63465:58828,63466:58829,63467:58830,63468:58831,63469:58832,63470:58833,63471:58834,63472:58835,63473:58836,63474:58837,63475:58838,63476:58839,63477:58840,63478:58841,63479:58842,63480:58843,63481:58844,63482:58845,63483:58846,63484:58847,63552:58848,63553:58849,63554:58850,63555:58851,63556:58852,63557:58853,63558:58854,63559:58855,63560:58856,63561:58857,63562:58858,63563:58859,63564:58860,63565:58861,63566:58862,63567:58863,63568:58864,63569:58865,63570:58866,63571:58867,63572:58868,63573:58869,63574:58870,63575:58871,63576:58872,63577:58873,63578:58874,63579:58875,63580:58876,63581:58877,63582:58878,63583:58879,63584:58880,63585:58881,63586:58882,63587:58883,63588:58884,63589:58885,63590:58886,63591:58887,63592:58888,63593:58889,63594:58890,63595:58891,63596:58892,63597:58893,63598:58894,63599:58895,63600:58896,63601:58897,63602:58898,63603:58899,63604:58900,63605:58901,63606:58902,63607:58903,63608:58904,63609:58905,63610:58906,63611:58907,63612:58908,63613:58909,63614:58910,63616:58911,63617:58912,63618:58913,63619:58914,63620:58915,63621:58916,63622:58917,63623:58918,63624:58919,63625:58920,63626:58921,63627:58922,63628:58923,63629:58924,63630:58925,63631:58926,63632:58927,63633:58928,63634:58929,63635:58930,63636:58931,63637:58932,63638:58933,63639:58934,63640:58935,63641:58936,63642:58937,63643:58938,63644:58939,63645:58940,63646:58941,63647:58942,63648:58943,63649:58944,63650:58945,63651:58946,63652:58947,63653:58948,63654:58949,63655:58950,63656:58951,63657:58952,63658:58953,63659:58954,63660:58955,63661:58956,63662:58957,63663:58958,63664:58959,63665:58960,63666:58961,63667:58962,63668:58963,63669:58964,63670:58965,63671:58966,63672:58967,63673:58968,63674:58969,63675:58970,63676:58971,63677:58972,63678:58973,63679:58974,63680:58975,63681:58976,63682:58977,63683:58978,63684:58979,63685:58980,63686:58981,63687:58982,63688:58983,63689:58984,63690:58985,63691:58986,63692:58987,63693:58988,63694:58989,63695:58990,63696:58991,63697:58992,63698:58993,63699:58994,63700:58995,63701:58996,63702:58997,63703:58998,63704:58999,63705:59e3,63706:59001,63707:59002,63708:59003,63709:59004,63710:59005,63711:59006,63712:59007,63713:59008,63714:59009,63715:59010,63716:59011,63717:59012,63718:59013,63719:59014,63720:59015,63721:59016,63722:59017,63723:59018,63724:59019,63725:59020,63726:59021,63727:59022,63728:59023,63729:59024,63730:59025,63731:59026,63732:59027,63733:59028,63734:59029,63735:59030,63736:59031,63737:59032,63738:59033,63739:59034,63740:59035,64064:8560,64065:8561,64066:8562,64067:8563,64068:8564,64069:8565,64070:8566,64071:8567,64072:8568,64073:8569,64074:8544,64075:8545,64076:8546,64077:8547,64078:8548,64079:8549,64080:8550,64081:8551,64082:8552,64083:8553,64084:65506,64085:65508,64086:65287,64087:65282,64088:12849,64089:8470,64090:8481,64091:8757,64092:32394,64093:35100,64094:37704,64095:37512,64096:34012,64097:20425,64098:28859,64099:26161,64100:26824,64101:37625,64102:26363,64103:24389,64104:20008,64105:20193,64106:20220,64107:20224,64108:20227,64109:20281,64110:20310,64111:20370,64112:20362,64113:20378,64114:20372,64115:20429,64116:20544,64117:20514,64118:20479,64119:20510,64120:20550,64121:20592,64122:20546,64123:20628,64124:20724,64125:20696,64126:20810,64128:20836,64129:20893,64130:20926,64131:20972,64132:21013,64133:21148,64134:21158,64135:21184,64136:21211,64137:21248,64138:21255,64139:21284,64140:21362,64141:21395,64142:21426,64143:21469,64144:64014,64145:21660,64146:21642,64147:21673,64148:21759,64149:21894,64150:22361,64151:22373,64152:22444,64153:22472,64154:22471,64155:64015,64156:64016,64157:22686,64158:22706,64159:22795,64160:22867,64161:22875,64162:22877,64163:22883,64164:22948,64165:22970,64166:23382,64167:23488,64168:29999,64169:23512,64170:23532,64171:23582,64172:23718,64173:23738,64174:23797,64175:23847,64176:23891,64177:64017,64178:23874,64179:23917,64180:23992,64181:23993,64182:24016,64183:24353,64184:24372,64185:24423,64186:24503,64187:24542,64188:24669,64189:24709,64190:24714,64191:24798,64192:24789,64193:24864,64194:24818,64195:24849,64196:24887,64197:24880,64198:24984,64199:25107,64200:25254,64201:25589,64202:25696,64203:25757,64204:25806,64205:25934,64206:26112,64207:26133,64208:26171,64209:26121,64210:26158,64211:26142,64212:26148,64213:26213,64214:26199,64215:26201,64216:64018,64217:26227,64218:26265,64219:26272,64220:26290,64221:26303,64222:26362,64223:26382,64224:63785,64225:26470,64226:26555,64227:26706,64228:26560,64229:26625,64230:26692,64231:26831,64232:64019,64233:26984,64234:64020,64235:27032,64236:27106,64237:27184,64238:27243,64239:27206,64240:27251,64241:27262,64242:27362,64243:27364,64244:27606,64245:27711,64246:27740,64247:27782,64248:27759,64249:27866,64250:27908,64251:28039,64252:28015,64320:28054,64321:28076,64322:28111,64323:28152,64324:28146,64325:28156,64326:28217,64327:28252,64328:28199,64329:28220,64330:28351,64331:28552,64332:28597,64333:28661,64334:28677,64335:28679,64336:28712,64337:28805,64338:28843,64339:28943,64340:28932,64341:29020,64342:28998,64343:28999,64344:64021,64345:29121,64346:29182,64347:29361,64348:29374,64349:29476,64350:64022,64351:29559,64352:29629,64353:29641,64354:29654,64355:29667,64356:29650,64357:29703,64358:29685,64359:29734,64360:29738,64361:29737,64362:29742,64363:29794,64364:29833,64365:29855,64366:29953,64367:30063,64368:30338,64369:30364,64370:30366,64371:30363,64372:30374,64373:64023,64374:30534,64375:21167,64376:30753,64377:30798,64378:30820,64379:30842,64380:31024,64381:64024,64382:64025,64384:64026,64385:31124,64386:64027,64387:31131,64388:31441,64389:31463,64390:64028,64391:31467,64392:31646,64393:64029,64394:32072,64395:32092,64396:32183,64397:32160,64398:32214,64399:32338,64400:32583,64401:32673,64402:64030,64403:33537,64404:33634,64405:33663,64406:33735,64407:33782,64408:33864,64409:33972,64410:34131,64411:34137,64412:34155,64413:64031,64414:34224,64415:64032,64416:64033,64417:34823,64418:35061,64419:35346,64420:35383,64421:35449,64422:35495,64423:35518,64424:35551,64425:64034,64426:35574,64427:35667,64428:35711,64429:36080,64430:36084,64431:36114,64432:36214,64433:64035,64434:36559,64435:64036,64436:64037,64437:36967,64438:37086,64439:64038,64440:37141,64441:37159,64442:37338,64443:37335,64444:37342,64445:37357,64446:37358,64447:37348,64448:37349,64449:37382,64450:37392,64451:37386,64452:37434,64453:37440,64454:37436,64455:37454,64456:37465,64457:37457,64458:37433,64459:37479,64460:37543,64461:37495,64462:37496,64463:37607,64464:37591,64465:37593,64466:37584,64467:64039,64468:37589,64469:37600,64470:37587,64471:37669,64472:37665,64473:37627,64474:64040,64475:37662,64476:37631,64477:37661,64478:37634,64479:37744,64480:37719,64481:37796,64482:37830,64483:37854,64484:37880,64485:37937,64486:37957,64487:37960,64488:38290,64489:63964,64490:64041,64491:38557,64492:38575,64493:38707,64494:38715,64495:38723,64496:38733,64497:38735,64498:38737,64499:38741,64500:38999,64501:39013,64502:64042,64503:64043,64504:39207,64505:64044,64506:39326,64507:39502,64508:39641,64576:39644,64577:39797,64578:39794,64579:39823,64580:39857,64581:39867,64582:39936,64583:40304,64584:40299,64585:64045,64586:40473,64587:40657},ue.prototype={constructor:ue,getInt8:function(){var e=this.dv.getInt8(this.offset);return this.offset+=1,e},getInt8Array:function(e){for(var t=[],i=0;i<e;i++)t.push(this.getInt8());return t},getUint8:function(){var e=this.dv.getUint8(this.offset);return this.offset+=1,e},getUint8Array:function(e){for(var t=[],i=0;i<e;i++)t.push(this.getUint8());return t},getInt16:function(){var e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e},getInt16Array:function(e){for(var t=[],i=0;i<e;i++)t.push(this.getInt16());return t},getUint16:function(){var e=this.dv.getUint16(this.offset,this.littleEndian);return this.offset+=2,e},getUint16Array:function(e){for(var t=[],i=0;i<e;i++)t.push(this.getUint16());return t},getInt32:function(){var e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e},getInt32Array:function(e){for(var t=[],i=0;i<e;i++)t.push(this.getInt32());return t},getUint32:function(){var e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e},getUint32Array:function(e){for(var t=[],i=0;i<e;i++)t.push(this.getUint32());return t},getFloat32:function(){var e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e},getFloat32Array:function(e){for(var t=[],i=0;i<e;i++)t.push(this.getFloat32());return t},getFloat64:function(){var e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e},getFloat64Array:function(e){for(var t=[],i=0;i<e;i++)t.push(this.getFloat64());return t},getIndex:function(e,t){switch(e){case 1:return!0===t?this.getUint8():this.getInt8();case 2:return!0===t?this.getUint16():this.getInt16();case 4:return this.getInt32();default:throw"unknown number type "+e+" exception."}},getIndexArray:function(e,t,i){for(var r=[],a=0;a<t;a++)r.push(this.getIndex(e,i));return r},getChars:function(e){for(var t="";e>0;){var i=this.getUint8();if(e--,0===i)break;t+=String.fromCharCode(i)}for(;e>0;)this.getUint8(),e--;return t},getSjisStringsAsUnicode:function(e){for(var t=[];e>0;){var i=this.getUint8();if(e--,0===i)break;t.push(i)}for(;e>0;)this.getUint8(),e--;return this.encoder.s2u(new Uint8Array(t))},getUnicodeStrings:function(e){for(var t="";e>0;){var i=this.getUint16();if(e-=2,0===i)break;t+=String.fromCharCode(i)}for(;e>0;)this.getUint8(),e--;return t},getTextBuffer:function(){var e=this.getUint32();return this.getUnicodeStrings(e)}},pe.prototype={constructor:pe,leftToRightVector3:function(e){e[2]=-e[2]},leftToRightQuaternion:function(e){e[0]=-e[0],e[1]=-e[1]},leftToRightEuler:function(e){e[0]=-e[0],e[1]=-e[1]},leftToRightIndexOrder:function(e){var t=e[2];e[2]=e[0],e[0]=t},leftToRightVector3Range:function(e,t){var i=-t[2];t[2]=-e[2],e[2]=i},leftToRightEulerRange:function(e,t){var i=-t[0],r=-t[1];t[0]=-e[0],t[1]=-e[1],e[0]=i,e[1]=r}},de.prototype.parsePmd=function(e,t){var i={},r=new ue(e);i.metadata={},i.metadata.format="pmd",i.metadata.coordinateSystem="left";var a;return function(){var e=i.metadata;if(e.magic=r.getChars(3),"Pmd"!==e.magic)throw"PMD file magic is not Pmd, but "+e.magic;e.version=r.getFloat32(),e.modelName=r.getSjisStringsAsUnicode(20),e.comment=r.getSjisStringsAsUnicode(256)}(),function(){var e,t=i.metadata;t.vertexCount=r.getUint32(),i.vertices=[];for(var a=0;a<t.vertexCount;a++)i.vertices.push((e=void 0,(e={}).position=r.getFloat32Array(3),e.normal=r.getFloat32Array(3),e.uv=r.getFloat32Array(2),e.skinIndices=r.getUint16Array(2),e.skinWeights=[r.getUint8()/100],e.skinWeights.push(1-e.skinWeights[0]),e.edgeFlag=r.getUint8(),e))}(),function(){var e,t=i.metadata;t.faceCount=r.getUint32()/3,i.faces=[];for(var a=0;a<t.faceCount;a++)i.faces.push((e=void 0,(e={}).indices=r.getUint16Array(3),e))}(),function(){var e,t=i.metadata;t.materialCount=r.getUint32(),i.materials=[];for(var a=0;a<t.materialCount;a++)i.materials.push((e=void 0,(e={}).diffuse=r.getFloat32Array(4),e.shininess=r.getFloat32(),e.specular=r.getFloat32Array(3),e.ambient=r.getFloat32Array(3),e.toonIndex=r.getInt8(),e.edgeFlag=r.getUint8(),e.faceCount=r.getUint32()/3,e.fileName=r.getSjisStringsAsUnicode(20),e))}(),function(){var e,t=i.metadata;t.boneCount=r.getUint16(),i.bones=[];for(var a=0;a<t.boneCount;a++)i.bones.push((e=void 0,(e={}).name=r.getSjisStringsAsUnicode(20),e.parentIndex=r.getInt16(),e.tailIndex=r.getInt16(),e.type=r.getUint8(),e.ikIndex=r.getInt16(),e.position=r.getFloat32Array(3),e))}(),function(){var e=function(){var e={};e.target=r.getUint16(),e.effector=r.getUint16(),e.linkCount=r.getUint8(),e.iteration=r.getUint16(),e.maxAngle=r.getFloat32(),e.links=[];for(var t=0;t<e.linkCount;t++){var i={};i.index=r.getUint16(),e.links.push(i)}return e},t=i.metadata;t.ikCount=r.getUint16(),i.iks=[];for(var a=0;a<t.ikCount;a++)i.iks.push(e())}(),function(){var e=function(){var e={};e.name=r.getSjisStringsAsUnicode(20),e.elementCount=r.getUint32(),e.type=r.getUint8(),e.elements=[];for(var t=0;t<e.elementCount;t++)e.elements.push({index:r.getUint32(),position:r.getFloat32Array(3)});return e},t=i.metadata;t.morphCount=r.getUint16(),i.morphs=[];for(var a=0;a<t.morphCount;a++)i.morphs.push(e())}(),function(){var e,t=i.metadata;t.morphFrameCount=r.getUint8(),i.morphFrames=[];for(var a=0;a<t.morphFrameCount;a++)i.morphFrames.push((e=void 0,(e={}).index=r.getUint16(),e))}(),function(){var e,t=i.metadata;t.boneFrameNameCount=r.getUint8(),i.boneFrameNames=[];for(var a=0;a<t.boneFrameNameCount;a++)i.boneFrameNames.push((e=void 0,(e={}).name=r.getSjisStringsAsUnicode(50),e))}(),function(){var e,t=i.metadata;t.boneFrameCount=r.getUint32(),i.boneFrames=[];for(var a=0;a<t.boneFrameCount;a++)i.boneFrames.push((e=void 0,(e={}).boneIndex=r.getInt16(),e.frameIndex=r.getUint8(),e))}(),(a=i.metadata).englishCompatibility=r.getUint8(),a.englishCompatibility>0&&(a.englishModelName=r.getSjisStringsAsUnicode(20),a.englishComment=r.getSjisStringsAsUnicode(256)),function(){var e=i.metadata;if(0!==e.englishCompatibility){i.englishBoneNames=[];for(var t=0;t<e.boneCount;t++)i.englishBoneNames.push((a=void 0,(a={}).name=r.getSjisStringsAsUnicode(20),a));var a}}(),function(){var e=i.metadata;if(0!==e.englishCompatibility){i.englishMorphNames=[];for(var t=0;t<e.morphCount-1;t++)i.englishMorphNames.push((a=void 0,(a={}).name=r.getSjisStringsAsUnicode(20),a));var a}}(),function(){var e=i.metadata;if(0!==e.englishCompatibility){i.englishBoneFrameNames=[];for(var t=0;t<e.boneFrameNameCount;t++)i.englishBoneFrameNames.push((a=void 0,(a={}).name=r.getSjisStringsAsUnicode(50),a));var a}}(),function(){var e;i.toonTextures=[];for(var t=0;t<10;t++)i.toonTextures.push((e=void 0,(e={}).fileName=r.getSjisStringsAsUnicode(100),e))}(),function(){var e,t=i.metadata;t.rigidBodyCount=r.getUint32(),i.rigidBodies=[];for(var a=0;a<t.rigidBodyCount;a++)i.rigidBodies.push((e=void 0,(e={}).name=r.getSjisStringsAsUnicode(20),e.boneIndex=r.getInt16(),e.groupIndex=r.getUint8(),e.groupTarget=r.getUint16(),e.shapeType=r.getUint8(),e.width=r.getFloat32(),e.height=r.getFloat32(),e.depth=r.getFloat32(),e.position=r.getFloat32Array(3),e.rotation=r.getFloat32Array(3),e.weight=r.getFloat32(),e.positionDamping=r.getFloat32(),e.rotationDamping=r.getFloat32(),e.restitution=r.getFloat32(),e.friction=r.getFloat32(),e.type=r.getUint8(),e))}(),function(){var e,t=i.metadata;t.constraintCount=r.getUint32(),i.constraints=[];for(var a=0;a<t.constraintCount;a++)i.constraints.push((e=void 0,(e={}).name=r.getSjisStringsAsUnicode(20),e.rigidBodyIndex1=r.getUint32(),e.rigidBodyIndex2=r.getUint32(),e.position=r.getFloat32Array(3),e.rotation=r.getFloat32Array(3),e.translationLimitation1=r.getFloat32Array(3),e.translationLimitation2=r.getFloat32Array(3),e.rotationLimitation1=r.getFloat32Array(3),e.rotationLimitation2=r.getFloat32Array(3),e.springPosition=r.getFloat32Array(3),e.springRotation=r.getFloat32Array(3),e))}(),!0===t&&this.leftToRightModel(i),i},de.prototype.parsePmx=function(e,t){var i={},r=new ue(e);i.metadata={},i.metadata.format="pmx",i.metadata.coordinateSystem="left";return function(){var e=i.metadata;if(e.magic=r.getChars(4),"PMX "!==e.magic)throw"PMX file magic is not PMX , but "+e.magic;if(e.version=r.getFloat32(),2!==e.version&&2.1!==e.version)throw"PMX version "+e.version+" is not supported.";e.headerSize=r.getUint8(),e.encoding=r.getUint8(),e.additionalUvNum=r.getUint8(),e.vertexIndexSize=r.getUint8(),e.textureIndexSize=r.getUint8(),e.materialIndexSize=r.getUint8(),e.boneIndexSize=r.getUint8(),e.morphIndexSize=r.getUint8(),e.rigidBodyIndexSize=r.getUint8(),e.modelName=r.getTextBuffer(),e.englishModelName=r.getTextBuffer(),e.comment=r.getTextBuffer(),e.englishComment=r.getTextBuffer()}(),function(){var e=function(){var e={};e.position=r.getFloat32Array(3),e.normal=r.getFloat32Array(3),e.uv=r.getFloat32Array(2),e.auvs=[];for(var a=0;a<i.metadata.additionalUvNum;a++)e.auvs.push(r.getFloat32Array(4));e.type=r.getUint8();var o=t.boneIndexSize;if(0===e.type)e.skinIndices=r.getIndexArray(o,1),e.skinWeights=[1];else if(1===e.type)e.skinIndices=r.getIndexArray(o,2),e.skinWeights=r.getFloat32Array(1),e.skinWeights.push(1-e.skinWeights[0]);else if(2===e.type)e.skinIndices=r.getIndexArray(o,4),e.skinWeights=r.getFloat32Array(4);else{if(3!==e.type)throw"unsupport bone type "+e.type+" exception.";e.skinIndices=r.getIndexArray(o,2),e.skinWeights=r.getFloat32Array(1),e.skinWeights.push(1-e.skinWeights[0]),e.skinC=r.getFloat32Array(3),e.skinR0=r.getFloat32Array(3),e.skinR1=r.getFloat32Array(3),e.type=1}return e.edgeRatio=r.getFloat32(),e},t=i.metadata;t.vertexCount=r.getUint32(),i.vertices=[];for(var a=0;a<t.vertexCount;a++)i.vertices.push(e())}(),function(){var e,t=i.metadata;t.faceCount=r.getUint32()/3,i.faces=[];for(var a=0;a<t.faceCount;a++)i.faces.push((e=void 0,(e={}).indices=r.getIndexArray(t.vertexIndexSize,3,!0),e))}(),function(){var e=i.metadata;e.textureCount=r.getUint32(),i.textures=[];for(var t=0;t<e.textureCount;t++)i.textures.push(r.getTextBuffer())}(),function(){var e=function(){var e={};if(e.name=r.getTextBuffer(),e.englishName=r.getTextBuffer(),e.diffuse=r.getFloat32Array(4),e.specular=r.getFloat32Array(3),e.shininess=r.getFloat32(),e.ambient=r.getFloat32Array(3),e.flag=r.getUint8(),e.edgeColor=r.getFloat32Array(4),e.edgeSize=r.getFloat32(),e.textureIndex=r.getIndex(i.metadata.textureIndexSize),e.envTextureIndex=r.getIndex(i.metadata.textureIndexSize),e.envFlag=r.getUint8(),e.toonFlag=r.getUint8(),0===e.toonFlag)e.toonIndex=r.getIndex(i.metadata.textureIndexSize);else{if(1!==e.toonFlag)throw"unknown toon flag "+e.toonFlag+" exception.";e.toonIndex=r.getInt8()}return e.comment=r.getTextBuffer(),e.faceCount=r.getUint32()/3,e},t=i.metadata;t.materialCount=r.getUint32(),i.materials=[];for(var a=0;a<t.materialCount;a++)i.materials.push(e())}(),function(){var e=function(){var e={};if(e.name=r.getTextBuffer(),e.englishName=r.getTextBuffer(),e.position=r.getFloat32Array(3),e.parentIndex=r.getIndex(i.metadata.boneIndexSize),e.transformationClass=r.getUint32(),e.flag=r.getUint16(),1&e.flag?e.connectIndex=r.getIndex(i.metadata.boneIndexSize):e.offsetPosition=r.getFloat32Array(3),256&e.flag||512&e.flag){var t={};t.isLocal=0!=(128&e.flag),t.affectRotation=0!=(256&e.flag),t.affectPosition=0!=(512&e.flag),t.parentIndex=r.getIndex(i.metadata.boneIndexSize),t.ratio=r.getFloat32(),e.grant=t}if(1024&e.flag&&(e.fixAxis=r.getFloat32Array(3)),2048&e.flag&&(e.localXVector=r.getFloat32Array(3),e.localZVector=r.getFloat32Array(3)),8192&e.flag&&(e.key=r.getUint32()),32&e.flag){var a={};a.effector=r.getIndex(i.metadata.boneIndexSize),a.target=null,a.iteration=r.getUint32(),a.maxAngle=r.getFloat32(),a.linkCount=r.getUint32(),a.links=[];for(var o=0;o<a.linkCount;o++){var n={};n.index=r.getIndex(i.metadata.boneIndexSize),n.angleLimitation=r.getUint8(),1===n.angleLimitation&&(n.lowerLimitationAngle=r.getFloat32Array(3),n.upperLimitationAngle=r.getFloat32Array(3)),a.links.push(n)}e.ik=a}return e},t=i.metadata;t.boneCount=r.getUint32(),i.bones=[];for(var a=0;a<t.boneCount;a++)i.bones.push(e())}(),function(){var e=function(){var e={};e.name=r.getTextBuffer(),e.englishName=r.getTextBuffer(),e.panel=r.getUint8(),e.type=r.getUint8(),e.elementCount=r.getUint32(),e.elements=[];for(var t=0;t<e.elementCount;t++){if(0===e.type)(a={}).index=r.getIndex(i.metadata.morphIndexSize),a.ratio=r.getFloat32(),e.elements.push(a);else if(1===e.type){(a={}).index=r.getIndex(i.metadata.vertexIndexSize,!0),a.position=r.getFloat32Array(3),e.elements.push(a)}else if(2===e.type){(a={}).index=r.getIndex(i.metadata.boneIndexSize),a.position=r.getFloat32Array(3),a.rotation=r.getFloat32Array(4),e.elements.push(a)}else if(3===e.type){(a={}).index=r.getIndex(i.metadata.vertexIndexSize,!0),a.uv=r.getFloat32Array(4),e.elements.push(a)}else if(4===e.type);else if(5===e.type);else if(6===e.type);else if(7===e.type);else if(8===e.type){var a;(a={}).index=r.getIndex(i.metadata.materialIndexSize),a.type=r.getUint8(),a.diffuse=r.getFloat32Array(4),a.specular=r.getFloat32Array(3),a.shininess=r.getFloat32(),a.ambient=r.getFloat32Array(3),a.edgeColor=r.getFloat32Array(4),a.edgeSize=r.getFloat32(),a.textureColor=r.getFloat32Array(4),a.sphereTextureColor=r.getFloat32Array(4),a.toonColor=r.getFloat32Array(4),e.elements.push(a)}}return e},t=i.metadata;t.morphCount=r.getUint32(),i.morphs=[];for(var a=0;a<t.morphCount;a++)i.morphs.push(e())}(),function(){var e=function(){var e={};e.name=r.getTextBuffer(),e.englishName=r.getTextBuffer(),e.type=r.getUint8(),e.elementCount=r.getUint32(),e.elements=[];for(var t=0;t<e.elementCount;t++){var a={};a.target=r.getUint8(),a.index=0===a.target?r.getIndex(i.metadata.boneIndexSize):r.getIndex(i.metadata.morphIndexSize),e.elements.push(a)}return e},t=i.metadata;t.frameCount=r.getUint32(),i.frames=[];for(var a=0;a<t.frameCount;a++)i.frames.push(e())}(),function(){var e,t=i.metadata;t.rigidBodyCount=r.getUint32(),i.rigidBodies=[];for(var a=0;a<t.rigidBodyCount;a++)i.rigidBodies.push((e=void 0,(e={}).name=r.getTextBuffer(),e.englishName=r.getTextBuffer(),e.boneIndex=r.getIndex(i.metadata.boneIndexSize),e.groupIndex=r.getUint8(),e.groupTarget=r.getUint16(),e.shapeType=r.getUint8(),e.width=r.getFloat32(),e.height=r.getFloat32(),e.depth=r.getFloat32(),e.position=r.getFloat32Array(3),e.rotation=r.getFloat32Array(3),e.weight=r.getFloat32(),e.positionDamping=r.getFloat32(),e.rotationDamping=r.getFloat32(),e.restitution=r.getFloat32(),e.friction=r.getFloat32(),e.type=r.getUint8(),e))}(),function(){var e,t=i.metadata;t.constraintCount=r.getUint32(),i.constraints=[];for(var a=0;a<t.constraintCount;a++)i.constraints.push((e=void 0,(e={}).name=r.getTextBuffer(),e.englishName=r.getTextBuffer(),e.type=r.getUint8(),e.rigidBodyIndex1=r.getIndex(i.metadata.rigidBodyIndexSize),e.rigidBodyIndex2=r.getIndex(i.metadata.rigidBodyIndexSize),e.position=r.getFloat32Array(3),e.rotation=r.getFloat32Array(3),e.translationLimitation1=r.getFloat32Array(3),e.translationLimitation2=r.getFloat32Array(3),e.rotationLimitation1=r.getFloat32Array(3),e.rotationLimitation2=r.getFloat32Array(3),e.springPosition=r.getFloat32Array(3),e.springRotation=r.getFloat32Array(3),e))}(),!0===t&&this.leftToRightModel(i),i},de.prototype.parseVmd=function(e,t){var i={},r=new ue(e);i.metadata={},i.metadata.coordinateSystem="left";return function(){var e=i.metadata;if(e.magic=r.getChars(30),"Vocaloid Motion Data 0002"!==e.magic)throw"VMD file magic is not Vocaloid Motion Data 0002, but "+e.magic;e.name=r.getSjisStringsAsUnicode(20)}(),function(){var e,t=i.metadata;t.motionCount=r.getUint32(),i.motions=[];for(var a=0;a<t.motionCount;a++)i.motions.push((e=void 0,(e={}).boneName=r.getSjisStringsAsUnicode(15),e.frameNum=r.getUint32(),e.position=r.getFloat32Array(3),e.rotation=r.getFloat32Array(4),e.interpolation=r.getUint8Array(64),e))}(),function(){var e,t=i.metadata;t.morphCount=r.getUint32(),i.morphs=[];for(var a=0;a<t.morphCount;a++)i.morphs.push((e=void 0,(e={}).morphName=r.getSjisStringsAsUnicode(15),e.frameNum=r.getUint32(),e.weight=r.getFloat32(),e))}(),function(){var e,t=i.metadata;t.cameraCount=r.getUint32(),i.cameras=[];for(var a=0;a<t.cameraCount;a++)i.cameras.push((e=void 0,(e={}).frameNum=r.getUint32(),e.distance=r.getFloat32(),e.position=r.getFloat32Array(3),e.rotation=r.getFloat32Array(3),e.interpolation=r.getUint8Array(24),e.fov=r.getUint32(),e.perspective=r.getUint8(),e))}(),!0===t&&this.leftToRightVmd(i),i},de.prototype.parseVpd=function(e,t){var i={metadata:{}};i.metadata.coordinateSystem="left",i.bones=[];var r=e.replace(/\/\/\w*(\r|\n|\r\n)/g,"").split(/\r|\n|\r\n/);function a(){throw"the file seems not vpd file."}return"Vocaloid Pose Data file"!==r[0]&&a(),r.length<4&&a(),i.metadata.parentFile=r[2],i.metadata.boneCount=parseInt(r[3]),function(){for(var e=/^\s*(Bone[0-9]+)\s*\{\s*(.*)$/,t=/^\s*(-?[0-9]+\.[0-9]+)\s*,\s*(-?[0-9]+\.[0-9]+)\s*,\s*(-?[0-9]+\.[0-9]+)\s*;/,o=/^\s*(-?[0-9]+\.[0-9]+)\s*,\s*(-?[0-9]+\.[0-9]+)\s*,\s*(-?[0-9]+\.[0-9]+)\s*,\s*(-?[0-9]+\.[0-9]+)\s*;/,n=/^\s*}/,s=i.bones,l=null,c=null,h=null,u=4;u<r.length;u++){var p,d=r[u];null!==(p=d.match(e))&&(null!==l&&a(),l=p[2]),null!==(p=d.match(t))&&(null!==c&&a(),c=[parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3])]),null!==(p=d.match(o))&&(null!==h&&a(),h=[parseFloat(p[1]),parseFloat(p[2]),parseFloat(p[3]),parseFloat(p[4])]),null!==(p=d.match(n))&&(null!==l&&null!==c&&null!==h||a(),s.push({name:l,translation:c,quaternion:h}),l=null,c=null,h=null)}null===l&&null===c&&null===h||a()}(),!0===t&&this.leftToRightVpd(i),i},de.prototype.mergeVmds=function(e){var t={metadata:{}};t.metadata.name=e[0].metadata.name,t.metadata.coordinateSystem=e[0].metadata.coordinateSystem,t.metadata.motionCount=0,t.metadata.morphCount=0,t.metadata.cameraCount=0,t.motions=[],t.morphs=[],t.cameras=[];for(var i=0;i<e.length;i++){var r=e[i];t.metadata.motionCount+=r.metadata.motionCount,t.metadata.morphCount+=r.metadata.morphCount,t.metadata.cameraCount+=r.metadata.cameraCount;for(var a=0;a<r.metadata.motionCount;a++)t.motions.push(r.motions[a]);for(a=0;a<r.metadata.morphCount;a++)t.morphs.push(r.morphs[a]);for(a=0;a<r.metadata.cameraCount;a++)t.cameras.push(r.cameras[a])}return t},de.prototype.leftToRightModel=function(e){if("right"!==e.metadata.coordinateSystem){e.metadata.coordinateSystem="right";for(var t=new pe,i=0;i<e.metadata.vertexCount;i++)t.leftToRightVector3(e.vertices[i].position),t.leftToRightVector3(e.vertices[i].normal);for(i=0;i<e.metadata.faceCount;i++)t.leftToRightIndexOrder(e.faces[i].indices);for(i=0;i<e.metadata.boneCount;i++)t.leftToRightVector3(e.bones[i].position);for(i=0;i<e.metadata.morphCount;i++){var r=e.morphs[i];if("pmx"!==e.metadata.format||1===r.type)for(var a=0;a<r.elements.length;a++)t.leftToRightVector3(r.elements[a].position)}for(i=0;i<e.metadata.rigidBodyCount;i++)t.leftToRightVector3(e.rigidBodies[i].position),t.leftToRightEuler(e.rigidBodies[i].rotation);for(i=0;i<e.metadata.constraintCount;i++)t.leftToRightVector3(e.constraints[i].position),t.leftToRightEuler(e.constraints[i].rotation),t.leftToRightVector3Range(e.constraints[i].translationLimitation1,e.constraints[i].translationLimitation2),t.leftToRightEulerRange(e.constraints[i].rotationLimitation1,e.constraints[i].rotationLimitation2)}},de.prototype.leftToRightVmd=function(e){if("right"!==e.metadata.coordinateSystem){e.metadata.coordinateSystem="right";for(var t=new pe,i=0;i<e.metadata.motionCount;i++)t.leftToRightVector3(e.motions[i].position),t.leftToRightQuaternion(e.motions[i].rotation);for(i=0;i<e.metadata.cameraCount;i++)t.leftToRightVector3(e.cameras[i].position),t.leftToRightEuler(e.cameras[i].rotation)}},de.prototype.leftToRightVpd=function(e){if("right"!==e.metadata.coordinateSystem){e.metadata.coordinateSystem="right";for(var t=new pe,i=0;i<e.bones.length;i++)t.leftToRightVector3(e.bones[i].translation),t.leftToRightQuaternion(e.bones[i].quaternion)}};var fe={CharsetEncoder:he,Parser:de},ge=function(){function e(e){p.Loader.call(this,e),this.loader=new p.FileLoader(this.manager),this.parser=null,this.meshBuilder=new i(this.manager),this.animationBuilder=new o,this.modelFormat=null}e.prototype=Object.assign(Object.create(p.Loader.prototype),{constructor:e,setAnimationPath:function(e){return this.animationPath=e,this},load:function(e,t,i,r){var a,o=this.meshBuilder.setCrossOrigin(this.crossOrigin);a=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:p.LoaderUtils.extractUrlBase(e);var n=this.modelFormat;console.log("modelExtension",n),"pmd"===n||"pmx"===n?this["pmd"===n?"loadPMD":"loadPMX"](e,(function(e){t(o.build(e,a,i,r))}),i,r):r&&r(new Error("THREE.MMDLoader: Unknown model file extension ."+n+"."))},loadAnimation:function(e,t,i,r,a){var o=this.animationBuilder;this.loadVMD(e,(function(e){i(t.isCamera?o.buildCameraAnimation(e):o.build(e,t))}),r,a)},loadWithAnimation:function(e,t,i,r,a){var o=this;this.load(e,(function(e){o.loadAnimation(t,e,(function(t){i({mesh:e,animation:t})}),r,a)}),r,a)},loadPMD:function(e,t,i,r){var a=this._getParser();this.loader.setMimeType(void 0).setPath(this.path).setResponseType("arraybuffer").load(e,(function(e){t(a.parsePmd(e,!0))}),i,r)},loadPMX:function(e,t,i,r){var a=this._getParser();this.loader.setMimeType(void 0).setPath(this.path).setResponseType("arraybuffer").load(e,(function(e){t(a.parsePmx(e,!0)),console.log("parser.parsePmx(buffer, true)",a.parsePmx(e,!0))}),i,r)},loadVMD:function(e,t,i,r){var a=Array.isArray(e)?e:[e],o=[],n=a.length,s=this._getParser();this.loader.setMimeType(void 0).setPath(this.animationPath).setResponseType("arraybuffer");for(var l=0,c=a.length;l<c;l++)this.loader.load(a[l],(function(e){o.push(s.parseVmd(e,!0)),o.length===n&&t(s.mergeVmds(o))}),i,r)},loadVPD:function(e,t,i,r,a){var o=this._getParser();this.loader.setMimeType(t?void 0:"text/plain; charset=shift_jis").setPath(this.animationPath).setResponseType("text").load(e,(function(e){i(o.parseVpd(e,!0))}),r,a)},_extractExtension:function(e){var t=e.lastIndexOf(".");return t<0?"":e.slice(t+1)},_getParser:function(){if(null===this.parser){if(void 0===fe)throw new Error("THREE.MMDLoader: Import MMDParser https://github.com/takahirox/mmd-parser");this.parser=new fe.Parser}return this.parser}});var t=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAN0lEQVRYR+3WQREAMBACsZ5/bWiiMvgEBTt5cW37hjsBBAgQIECAwFwgyfYPCCBAgAABAgTWAh8aBHZBl14e8wAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAOUlEQVRYR+3WMREAMAwDsYY/yoDI7MLwIiP40+RJklfcCCBAgAABAgTqArfb/QMCCBAgQIAAgbbAB3z/e0F3js2cAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAN0lEQVRYR+3WQREAMBACsZ5/B5ilMvgEBTt5cW37hjsBBAgQIECAwFwgyfYPCCBAgAABAgTWAh81dWyx0gFwKAAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAOklEQVRYR+3WoREAMAwDsWb/UQtCy9wxTOQJ/oQ8SXKKGwEECBAgQIBAXeDt7f4BAQQIECBAgEBb4AOz8Hzx7WLY4wAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABPUlEQVRYR+1XwW7CMAy1+f9fZOMysSEOEweEOPRNdm3HbdOyIhAcklPrOs/PLy9RygBALxzcCDQFmgJNgaZAU6Ap0BR4PwX8gsRMVLssMRH5HcpzJEaWL7EVg9F1IHRlyqQohgVr4FGUlUcMJSjcUlDw0zvjeun70cLWmneoyf7NgBTQSniBTQQSuJAZsOnnaczjIMb5hCiuHKxokCrJfVnrctyZL0PkJAJe1HMil4nxeyi3Ypfn1kX51jpPvo/JeCNC4PhVdHdJw2XjBR8brF8PEIhNVn12AgP7uHsTBguBn53MUZCqv7Lp07Pn5k1Ro+uWmUNn7D+M57rtk7aG0Vo73xyF/fbFf0bPJjDXngnGocDTdFhygZjwUQrMNrDcmZlQT50VJ/g/UwNyHpu778+yW+/ksOz/BFo54P4AsUXMfRq7XWsAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACMElEQVRYR+2Xv4pTQRTGf2dubhLdICiii2KnYKHVolhauKWPoGAnNr6BD6CvIVaihYuI2i1ia0BY0MZGRHQXjZj/mSPnnskfNWiWZUlzJ5k7M2cm833nO5Mziej2DWWJRUoCpQKlAntSQCqgw39/iUWAGmh37jrRnVsKlgpiqmkoGVABA7E57fvY+pJDdgKqF6HzFCSADkDq+F6AHABtQ+UMVE5D7zXod7fFNhTEckTbj5XQgHzNN+5tQvc5NG7C6BNkp6D3EmpXHDR+dQAjFLchW3VS9rlw3JBh+B7ys5Cf9z0GW1C/7P32AyBAOAz1q4jGliIH3YPuBnSfQX4OGreTIgEYQb/pBDtPnEQ4CivXYPAWBk13oHrB54yA9QuSn2H4AcKRpEILDt0BUzj+RLR1V5EqjD66NPRBVpLcQwjHoHYJOhsQv6U4mnzmrIXJCFr4LDwm/xBUoboG9XX4cc9VKdYoSA2yk5NQLJaKDUjTBoveG3Z2TElTxwjNK4M3LEZgUdDdruvcXzKBpStgp2NPiWi3ks9ZXxIoFVi+AvHLdc9TqtjL3/aYjpPlrzOcEnK62Szhimdd7xX232zFDTgtxezOu3WNMRLjiKgjtOhHVMd1loynVHvOgjuIIJMaELEqhJAV/RCSLbWTcfPFakFgFlALTRRvx+ok6Hlp/Q+v3fmx90bMyUzaEAhmM3KvHlXTL5DxnbGf/1M8RNNACLL5MNtPxP/mypJAqcDSFfgFhpYqWUzhTEAAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII="];function i(e){this.geometryBuilder=new r,this.materialBuilder=new a(e)}function r(){}function a(e){this.manager=e,this.textureLoader=new p.TextureLoader(this.manager),this.tgaLoader=null}function o(){}function n(e,t,i,r,a){p.Interpolant.call(this,e,t,i,r),this.interpolationParams=a}return i.prototype={constructor:i,crossOrigin:"anonymous",setCrossOrigin:function(e){return this.crossOrigin=e,this},build:function(e,t,i,r){var a=this.geometryBuilder.build(e),o=this.materialBuilder.setCrossOrigin(this.crossOrigin).setResourcePath(t).build(e,a,i,r),n=new p.SkinnedMesh(a,o),s=new p.Skeleton(function(e){var t,i,r,a,o=e.geometry,n=[];if(o&&void 0!==o.bones){for(r=0,a=o.bones.length;r<a;r++)i=o.bones[r],t=new p.Bone,n.push(t),t.name=i.name,t.position.fromArray(i.pos),t.quaternion.fromArray(i.rotq),void 0!==i.scl&&t.scale.fromArray(i.scl);for(r=0,a=o.bones.length;r<a;r++)-1!==(i=o.bones[r]).parent&&null!==i.parent&&void 0!==n[i.parent]?n[i.parent].add(n[r]):e.add(n[r])}return e.updateMatrixWorld(!0),n}(n));return n.bind(s),n}},r.prototype={constructor:r,build:function(e){for(var t=[],i=[],r=[],a=[],o=[],n=[],s=[],l=[],c=[],h=[],u=[],d=[],f=[],g=[],m=0,v={},y=0;y<e.metadata.vertexCount;y++){for(var _=e.vertices[y],b=0,A=_.position.length;b<A;b++)t.push(_.position[b]);for(b=0,A=_.normal.length;b<A;b++)r.push(_.normal[b]);for(b=0,A=_.uv.length;b<A;b++)i.push(_.uv[b]);for(b=0;b<4;b++)s.push(_.skinIndices.length-1>=b?_.skinIndices[b]:0);for(b=0;b<4;b++)l.push(_.skinWeights.length-1>=b?_.skinWeights[b]:0)}for(y=0;y<e.metadata.faceCount;y++){var E=e.faces[y];for(b=0,A=E.indices.length;b<A;b++)a.push(E.indices[b])}for(y=0;y<e.metadata.materialCount;y++){var w=e.materials[y];o.push({offset:3*m,count:3*w.faceCount}),m+=w.faceCount}for(y=0;y<e.metadata.rigidBodyCount;y++){var x=e.rigidBodies[y],T=v[x.boneIndex];T=void 0===T?x.type:Math.max(x.type,T),v[x.boneIndex]=T}for(y=0;y<e.metadata.boneCount;y++){-1!==(W={parent:(P=e.bones[y]).parentIndex,name:P.name,pos:P.position.slice(0,3),rotq:[0,0,0,1],scl:[1,1,1],rigidBodyType:void 0!==v[y]?v[y]:-1}).parent&&(W.pos[0]-=e.bones[W.parent].position[0],W.pos[1]-=e.bones[W.parent].position[1],W.pos[2]-=e.bones[W.parent].position[2]),n.push(W)}if("pmd"===e.metadata.format)for(y=0;y<e.metadata.ikCount;y++){var I={target:(L=e.iks[y]).target,effector:L.effector,iteration:L.iteration,maxAngle:4*L.maxAngle,links:[]};for(b=0,A=L.links.length;b<A;b++){(S={}).index=L.links[b].index,S.enabled=!0,e.bones[S.index].name.indexOf("")>=0&&(S.limitation=new p.Vector3(1,0,0)),I.links.push(S)}u.push(I)}else for(y=0;y<e.metadata.boneCount;y++){var L;if(void 0!==(L=e.bones[y].ik)){for(I={target:y,effector:L.effector,iteration:L.iteration,maxAngle:L.maxAngle,links:[]},b=0,A=L.links.length;b<A;b++){var S;if((S={}).index=L.links[b].index,S.enabled=!0,1===L.links[b].angleLimitation){var M=L.links[b].lowerLimitationAngle,C=L.links[b].upperLimitationAngle,k=-C[0],R=-C[1];C[0]=-M[0],C[1]=-M[1],M[0]=k,M[1]=R,S.rotationMin=(new p.Vector3).fromArray(M),S.rotationMax=(new p.Vector3).fromArray(C)}I.links.push(S)}u.push(I)}}if("pmx"===e.metadata.format){for(y=0;y<e.metadata.boneCount;y++){var P,O=(P=e.bones[y]).grant;if(void 0!==O){I={index:y,parentIndex:O.parentIndex,ratio:O.ratio,isLocal:O.isLocal,affectRotation:O.affectRotation,affectPosition:O.affectPosition,transformationClass:P.transformationClass};d.push(I)}}d.sort((function(e,t){return e.transformationClass-t.transformationClass}))}function U(t,i,r){for(var a=0;a<i.elementCount;a++){var o,n=i.elements[a];o="pmd"===e.metadata.format?e.morphs[0].elements[n.index].index:n.index,t.array[3*o+0]+=n.position[0]*r,t.array[3*o+1]+=n.position[1]*r,t.array[3*o+2]+=n.position[2]*r}}for(y=0;y<e.metadata.morphCount;y++){var F=e.morphs[y],D={name:F.name},B=new p.Float32BufferAttribute(3*e.metadata.vertexCount,3);B.name=F.name;for(b=0;b<3*e.metadata.vertexCount;b++)B.array[b]=t[b];if("pmd"===e.metadata.format)0!==y&&U(B,F,1);else if(0===F.type)for(b=0;b<F.elementCount;b++){var N=e.morphs[F.elements[b].index],H=F.elements[b].ratio;1===N.type&&U(B,N,H)}else 1===F.type?U(B,F,1):2===F.type||3===F.type||4===F.type||5===F.type||6===F.type||7===F.type||F.type;c.push(D),h.push(B)}for(y=0;y<e.metadata.rigidBodyCount;y++){var V=e.rigidBodies[y];D={};for(var $ in V)D[$]=V[$];if("pmx"===e.metadata.format&&-1!==D.boneIndex){var W=e.bones[D.boneIndex];D.position[0]-=W.position[0],D.position[1]-=W.position[1],D.position[2]-=W.position[2]}f.push(D)}for(y=0;y<e.metadata.constraintCount;y++){var z=e.constraints[y];D={};for(var $ in z)D[$]=z[$];var j=f[D.rigidBodyIndex1],G=f[D.rigidBodyIndex2];0!==j.type&&2===G.type&&-1!==j.boneIndex&&-1!==G.boneIndex&&e.bones[G.boneIndex].parentIndex===j.boneIndex&&(G.type=1),g.push(D)}var X=new p.BufferGeometry;X.addAttribute("position",new p.Float32BufferAttribute(t,3)),X.addAttribute("normal",new p.Float32BufferAttribute(r,3)),X.addAttribute("uv",new p.Float32BufferAttribute(i,2)),X.addAttribute("skinIndex",new p.Uint16BufferAttribute(s,4)),X.addAttribute("skinWeight",new p.Float32BufferAttribute(l,4)),X.setIndex(a);y=0;for(var Y=o.length;y<Y;y++)X.addGroup(o[y].offset,o[y].count,y);return X.bones=n,X.morphTargets=c,X.morphAttributes.position=h,X.userData.MMD={bones:n,iks:u,grants:d,rigidBodies:f,constraints:g,format:e.metadata.format},X.computeBoundingSphere(),X}},a.prototype={constructor:a,crossOrigin:"anonymous",resourcePath:void 0,setCrossOrigin:function(e){return this.crossOrigin=e,this},setResourcePath:function(e){return this.resourcePath=e,this},build:function(e,t){var i=[],r={};this.textureLoader.setCrossOrigin(this.crossOrigin);for(var a=0;a<e.metadata.materialCount;a++){var o=e.materials[a],n={userData:{}};if(void 0!==o.name&&(n.name=o.name),n.color=(new p.Color).fromArray(o.diffuse),n.opacity=o.diffuse[3],n.specular=(new p.Color).fromArray(o.specular),n.emissive=(new p.Color).fromArray(o.ambient),n.shininess=Math.max(o.shininess,1e-4),n.transparent=1!==n.opacity,n.skinning=t.bones.length>0,n.morphTargets=t.morphTargets.length>0,n.lights=!0,n.fog=!0,n.blending=p.CustomBlending,n.blendSrc=p.SrcAlphaFactor,n.blendDst=p.OneMinusSrcAlphaFactor,n.blendSrcAlpha=p.SrcAlphaFactor,n.blendDstAlpha=p.DstAlphaFactor,"pmx"===e.metadata.format&&1==(1&o.flag)?n.side=p.DoubleSide:n.side=1===n.opacity?p.FrontSide:p.DoubleSide,"pmd"===e.metadata.format){if(o.fileName){var s=o.fileName.split("*");if(n.map=this._loadTexture(s[0],r),s.length>1){var l=s[1].slice(-4).toLowerCase();n.envMap=this._loadTexture(s[1],r,{sphericalReflectionMapping:!0}),n.combine=".sph"===l?p.MultiplyOperation:p.AddOperation}}var c=-1===o.toonIndex?"toon00.bmp":e.toonTextures[o.toonIndex].fileName;n.gradientMap=this._loadTexture(c,r,{isToonTexture:!0,isDefaultToonTexture:this._isDefaultToonTexture(c)}),n.userData.outlineParameters={thickness:1===o.edgeFlag?.003:0,color:[0,0,0],alpha:1,visible:1===o.edgeFlag}}else{var h;-1!==o.textureIndex&&(n.map=this._loadTexture(e.textures[o.textureIndex],r)),-1===o.envTextureIndex||1!==o.envFlag&&2!=o.envFlag||(n.envMap=this._loadTexture(e.textures[o.envTextureIndex],r,{sphericalReflectionMapping:!0}),n.combine=1===o.envFlag?p.MultiplyOperation:p.AddOperation),-1===o.toonIndex||0!==o.toonFlag?(c="toon"+("0"+(o.toonIndex+1)).slice(-2)+".bmp",h=!0):(c=e.textures[o.toonIndex],h=!1),n.gradientMap=this._loadTexture(c,r,{isToonTexture:!0,isDefaultToonTexture:h}),n.userData.outlineParameters={thickness:o.edgeSize/300,color:o.edgeColor.slice(0,3),alpha:o.edgeColor[3],visible:0!=(16&o.flag)&&o.edgeSize>0}}void 0!==n.map&&(n.transparent||this._checkImageTransparency(n.map,t,a),n.emissive.multiplyScalar(.2)),i.push(new p.MeshToonMaterial(n))}if("pmx"===e.metadata.format){function u(e,t){for(var i=0,r=e.length;i<r;i++){var a=e[i];if(-1!==a.index){var o=t[a.index];o.opacity!==a.diffuse[3]&&(o.transparent=!0)}}}a=0;for(var d=e.morphs.length;a<d;a++){var f=e.morphs[a],g=f.elements;if(0===f.type)for(var m=0,v=g.length;m<v;m++){var y=e.morphs[g[m].index];8===y.type&&u(y.elements,i)}else 8===f.type&&u(g,i)}}return i},_getTGALoader:function(){if(null===this.tgaLoader){if(void 0===ae)throw new Error("THREE.MMDLoader: Import TGALoader");this.tgaLoader=new ae(this.manager)}return this.tgaLoader},_isDefaultToonTexture:function(e){return 10===e.length&&/toon(10|0[0-9])\.bmp/.test(e)},_loadTexture:function(e,i,r,a,o){var n,s=this;if(!0===(r=r||{}).isDefaultToonTexture){var l;try{l=parseInt(e.match("toon([0-9]{2}).bmp$")[1])}catch(t){console.warn("THREE.MMDLoader: "+e+" seems like a not right default texture path. Using toon00.bmp instead."),l=0}n=t[l]}else n=this.resourcePath+e.split("\\").pop(),console.log("this.resourcePath",this.resourcePath,"filePath",e,"fullPath",n);if(console.log("textures[fullPath]",i[n]),void 0!==i[n])return i[n];var c=this.manager.getHandler(n);null===c&&(c=".tga"===e.slice(-4).toLowerCase()?this._getTGALoader():this.textureLoader);var h=c.load(n,(function(e){!0===r.isToonTexture&&(e.image=s._getRotatedImage(e.image),e.magFilter=p.NearestFilter,e.minFilter=p.NearestFilter),e.flipY=!1,e.wrapS=p.RepeatWrapping,e.wrapT=p.RepeatWrapping;for(var t=0;t<h.readyCallbacks.length;t++)h.readyCallbacks[t](h);delete h.readyCallbacks}),a,o);return!0===r.sphericalReflectionMapping&&(h.mapping=p.SphericalReflectionMapping),h.readyCallbacks=[],i[n]=h,h},_getRotatedImage:function(e){var t=document.createElement("canvas"),i=t.getContext("2d"),r=e.width,a=e.height;return t.width=r,t.height=a,i.clearRect(0,0,r,a),i.translate(r/2,a/2),i.rotate(.5*Math.PI),i.translate(-r/2,-a/2),i.drawImage(e,0,0),i.getImageData(0,0,r,a)},_checkImageTransparency:function(e,t,i){e.readyCallbacks.push((function(r){function a(e,t){var i=e.width,r=e.height,a=Math.round(t.x*i)%i,o=Math.round(t.y*r)%r;a<0&&(a+=i),o<0&&(o+=r);var n=o*i+a;return e.data[4*n+3]}var o=void 0!==r.image.data?r.image:function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var i=t.getContext("2d");return i.drawImage(e,0,0),i.getImageData(0,0,t.width,t.height)}(r.image),n=t.groups[i];(function(e,t,i){var r=e.width,o=e.height;if(e.data.length/(r*o)!=4)return!1;for(var n=0;n<i.length;n+=3){for(var s={x:0,y:0},l=0;l<3;l++){var c=i[3*n+l],h={x:t[2*c+0],y:t[2*c+1]};if(a(e,h)<253)return!0;s.x+=h.x,s.y+=h.y}if(s.x/=3,s.y/=3,a(e,s)<253)return!0}return!1})(o,t.attributes.uv.array,t.index.array.slice(n.start,n.start+n.count))&&(e.transparent=!0)}))}},o.prototype={constructor:o,build:function(e,t){for(var i=this.buildSkeletalAnimation(e,t).tracks,r=this.buildMorphAnimation(e,t).tracks,a=0,o=r.length;a<o;a++)i.push(r[a]);return new p.AnimationClip("",-1,i)},buildSkeletalAnimation:function(e,t){function i(e,t,i){e.push(t[i+0]/127),e.push(t[i+8]/127),e.push(t[i+4]/127),e.push(t[i+12]/127)}for(var r=[],a={},o=t.skeleton.bones,n={},s=0,l=o.length;s<l;s++)n[o[s].name]=!0;for(s=0;s<e.metadata.motionCount;s++){var c=e.motions[s],h=c.boneName;void 0!==n[h]&&(a[h]=a[h]||[],a[h].push(c))}for(var u in a){var d=a[u];d.sort((function(e,t){return e.frameNum-t.frameNum}));var f=[],g=[],m=[],v=[],y=[],_=t.skeleton.getBoneByName(u).position.toArray();for(s=0,l=d.length;s<l;s++){var b=d[s].frameNum/30,A=d[s].position,E=d[s].rotation,w=d[s].interpolation;f.push(b);for(var x=0;x<3;x++)g.push(_[x]+A[x]);for(x=0;x<4;x++)m.push(E[x]);for(x=0;x<3;x++)i(v,w,x);i(y,w,3)}var T=".bones["+u+"]";r.push(this._createTrack(T+".position",p.VectorKeyframeTrack,f,g,v)),r.push(this._createTrack(T+".quaternion",p.QuaternionKeyframeTrack,f,m,y))}return new p.AnimationClip("",-1,r)},buildMorphAnimation:function(e,t){for(var i=[],r={},a=t.morphTargetDictionary,o=0;o<e.metadata.morphCount;o++){var n=e.morphs[o],s=n.morphName;void 0!==a[s]&&(r[s]=r[s]||[],r[s].push(n))}for(var l in r){var c=r[l];c.sort((function(e,t){return e.frameNum-t.frameNum}));for(var h=[],u=[],d=(o=0,c.length);o<d;o++)h.push(c[o].frameNum/30),u.push(c[o].weight);i.push(new p.NumberKeyframeTrack(".morphTargetInfluences["+a[l]+"]",h,u))}return new p.AnimationClip("",-1,i)},buildCameraAnimation:function(e){function t(e,t){e.push(t.x),e.push(t.y),e.push(t.z)}function i(e,t,i){e.push(t[4*i+0]/127),e.push(t[4*i+1]/127),e.push(t[4*i+2]/127),e.push(t[4*i+3]/127)}var r=[],a=void 0===e.cameras?[]:e.cameras.slice();a.sort((function(e,t){return e.frameNum-t.frameNum}));for(var o,n,s=[],l=[],c=[],h=[],u=[],d=[],f=[],g=[],m=[],v=new p.Quaternion,y=new p.Euler,_=new p.Vector3,b=new p.Vector3,A=0,E=a.length;A<E;A++){var w=a[A],x=w.frameNum/30,T=w.position,I=w.rotation,L=w.distance,S=w.fov,M=w.interpolation;s.push(x),_.set(0,0,-L),b.set(T[0],T[1],T[2]),y.set(-I[0],-I[1],-I[2]),v.setFromEuler(y),_.add(b),_.applyQuaternion(v),t(l,b),(o=c).push((n=v).x),o.push(n.y),o.push(n.z),o.push(n.w),t(h,_),u.push(S);for(var C=0;C<3;C++)i(d,M,C);i(f,M,3);for(C=0;C<3;C++)i(g,M,4);i(m,M,5)}return(r=[]).push(this._createTrack("target.position",p.VectorKeyframeTrack,s,l,d)),r.push(this._createTrack(".quaternion",p.QuaternionKeyframeTrack,s,c,f)),r.push(this._createTrack(".position",p.VectorKeyframeTrack,s,h,g)),r.push(this._createTrack(".fov",p.NumberKeyframeTrack,s,u,m)),new p.AnimationClip("",-1,r)},_createTrack:function(e,t,i,r,a){if(i.length>2){i=i.slice(),r=r.slice(),a=a.slice();for(var o=r.length/i.length,s=a.length/i.length,l=1,c=2,h=i.length;c<h;c++){for(var u=0;u<o;u++)if(r[l*o+u]!==r[(l-1)*o+u]||r[l*o+u]!==r[c*o+u]){l++;break}if(c>l){i[l]=i[c];for(u=0;u<o;u++)r[l*o+u]=r[c*o+u];for(u=0;u<s;u++)a[l*s+u]=a[c*s+u]}}i.length=l+1,r.length=(l+1)*o,a.length=(l+1)*s}var p=new t(e,i,r);return p.createInterpolant=function(e){return new n(this.times,this.values,this.getValueSize(),e,new Float32Array(a))},p}},n.prototype=Object.assign(Object.create(p.Interpolant.prototype),{constructor:n,interpolate_:function(e,t,i,r){var a=this.resultBuffer,o=this.sampleValues,n=this.valueSize,s=this.interpolationParams,l=e*n,c=l-n,h=r-t<.05?0:(i-t)/(r-t);if(4===n){var u=s[4*e+0],d=s[4*e+1],f=s[4*e+2],g=s[4*e+3],m=this._calculate(u,d,f,g,h);p.Quaternion.slerpFlat(a,0,o,c,o,l,m)}else if(3===n)for(var v=0;v!==n;++v){u=s[12*e+4*v+0],d=s[12*e+4*v+1],f=s[12*e+4*v+2],g=s[12*e+4*v+3],m=this._calculate(u,d,f,g,h);a[v]=o[c+v]*(1-m)+o[l+v]*m}else{u=s[4*e+0],d=s[4*e+1],f=s[4*e+2],g=s[4*e+3],m=this._calculate(u,d,f,g,h);a[0]=o[c]*(1-m)+o[l]*m}return a},_calculate:function(e,t,i,r,a){for(var o,n,s,l=.5,c=l,h=1-c,u=Math,p=0;p<15;p++){var d=(o=3*h*h*c)*e+(n=3*h*c*c)*t+(s=c*c*c)-a;if(u.abs(d)<1e-5)break;l/=2,h=1-(c+=d<0?l:-l)}return o*i+n*r+s}}),e}();var me=((e,t,i)=>{function r(){}function a(e){this.canvasEveWrap=t.getElementById("canvas-eve-wrapper"),this.Loader=new r,this.scenes=e}function n(){this.scenes=[],this.renderer=null,this.canvas=t.getElementById("c-three"),this.Reader=new a(this.scenes)}r.prototype={constructor:r,options:{},MMDLoader(e,t,i,r){const a=this,o=new ge(e);o.modelFormat=r,o.load(i,e=>{a._fit2Scene(t,e,!1),t.add(e)})},FBXLoader(e,t,i){const r=this;new oe(e).load(i,e=>{e.traverse(e=>{e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0,e.material.transparent=!0,e.material.alphaTest=.5)}),r._fit2Scene(t,e,!1),t.add(e)})},MTLLoader(e,t,i,r){const a=this;new ce(e).load(r,r=>{r.preload(),a.OBJLoader(e,t,i,r)})},OBJLoader(e,t,i,r){const a=this,o=new le(e);r&&o.setMaterials(r),o.load(i,e=>{e.traverse(e=>{e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0)}),a._fit2Scene(t,e,!1),t.add(e)})},GLTFLoader(e,t,i){const r=this,a=new se(e),o=new ne(e);o.setDecoderPath("../three-modules/draco/"),a.setDRACOLoader(o),a.load(i,e=>{r._fit2Scene(t,e.scene,!1),t.add(e.scene)})},VRMLoader(e,t,i){const r=this;new se(e).load(i,e=>{d.VRM.from(e).then(e=>{r._fit2Scene(t,e.scene,!0),t.add(e.scene)})})},_fit2Scene(e,t,r){const a=new p.PerspectiveCamera(40,1,.1,2e4),o=(new p.Box3).setFromObject(t),n=o.getCenter(),s=o.getSize();let l=s.y/2/i.sin(a.fov/2*(i.PI/180));s.x>s.y&&(l=s.x/2/i.sin(a.fov/2*(i.PI/180)));let c=o.max.z+l+a.near;r&&(c=-c),a.position.set(n.x,n.y,c),a.far=a.near+300*s.z,a.updateProjectionMatrix(),e.userData.camera=a;const h=new f(e.userData.camera,e.userData.element);h.target.set(0,s.y/2,0),h.enableKeys=!1,h.screenSpacePanning=!0,h.update(),e.userData.controls=h}},a.prototype={constructor:a,options:{DEFAULT_FILE_WIDTH:300},dragOverEvent(e){this._handleDragEvent(e)},dropEvent(e){this._handleDropEvent(e)},_handleDragEvent(e){e.dataTransfer.dropEffect="copy",o("iframe").css("pointer-events","none")},_handleDropEvent(e){let i,r;e.changedTouches?(i=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY):(i=e.clientX,r=e.clientY);const a={left:i-o("#zoom").offset().left,top:r-o("#zoom").offset().top},{files:n}=e.dataTransfer,s={progress:t.getElementById("progress-bar"),fileCount:n.length,eachProg:parseFloat(100/n.length),totalProg:0,iterate:0};if(s.fileCount>0){let e=!1;Array.from(n).forEach(t=>{this._isSupported(t.name)&&(e=!0)}),!0===e&&this._read(n,this.scenes,a,s)}},_read(e,t,i,r){let a,n,s,l,c,h;const u={},d=this._addFileWrap(i),f=this._setScene(d,t);Array.from(e).forEach(e=>{this._isSupported(e.name)?function(e){n=URL.createObjectURL(e),c=p.LoaderUtils.extractUrlBase(n),a=n.replace(c,""),u[a]=e,h=e.name.split(".").pop().toLowerCase(),console.log("blobs",u,"baseURL",c,"rootFilePath",n)}(e):/\.(mtl)$/i.test(e.name)?function(e){l=URL.createObjectURL(e),c=p.LoaderUtils.extractUrlBase(l),s=l.replace(c,""),u[s]=e,console.log("blobs",u)}(e):(u[e.name]=e,console.log("blobs",u))});const g=!("pmx"!==h&&"pmd"!==h),m="fbx"===h,v="obj"===h,y="gltf"===h,_=new p.LoadingManager;switch(_.setURLModifier(e=>{console.log("url",e);const t=g&&!e.match(/base64/),i=y&&!e.match(/draco/);let r;return(t||i||m||v)&&(r=e.replace(c,""),e=URL.createObjectURL(u[r])),console.log("url",e,"fileName",r,"blobs[n]",u[r]),e}),_.onStart=()=>{0===r.iterate&&r.progress.classList.add("loading")},_.onProgress=()=>{r.iterate++,r.iterate<r.fileCount&&(r.totalProg=r.eachProg*r.iterate,r.progress.style.width=`${r.totalProg}%`)},_.onLoad=()=>{r.progress.style.width="100%",setTimeout(()=>{r.progress.classList.remove("loading"),o(".hide-scissor").remove()},1e3)},_.onError=e=>{console.log(`There was an error loading ${e}`)},h){case"obj":s?this.Loader.MTLLoader(_,f,n,l):this.Loader.OBJLoader(_,f,n);break;case"fbx":this.Loader.FBXLoader(_,f,n);break;case"pmx":case"pmd":this.Loader.MMDLoader(_,f,n,h);break;case"gltf":this.Loader.GLTFLoader(_,f,n);break;case"vrm":this.Loader.VRMLoader(_,f,n)}},_isSupported:e=>/\.(obj|fbx|pmx|pmd|gltf|vrm)$/i.test(e),_setScene(e,i){const r=new p.Scene;r.userData.element=t.getElementById(e).getElementsByClassName("eve-main")[0],r.add(new p.HemisphereLight(11184810,4473924));const a=new p.DirectionalLight(16777215,.5);return a.position.set(1,1,1),r.add(a),i.push(r),r},_addFileWrap(e){s.a.NEWFILE_ID+=1,s.a.HIGHEST_Z_INDEX+=1,s.a.CURRENT_ID=s.a.NEWFILE_ID;const i=`<div id ="${s.a.NEWFILE_ID}" class="webgl file-wrap" style="transition: ${s.a.IS_TRANSITION};"><div class="function-wrapper"><div class="thumbtack-wrapper"></div><div class="resize-wrapper"></div><div class="trash-wrapper"></div></div><div class="eve-main"></div></div>`;o("#add-files").append(i);const r=t.createElement("div");o("#add-files").append(r),r.classList.add("hide-scissor"),o(r).css({left:`${e.left*s.a.MOUSE_WHEEL_VAL-this.options.DEFAULT_FILE_WIDTH/2}px`,top:`${e.top*s.a.MOUSE_WHEEL_VAL-this.options.DEFAULT_FILE_WIDTH/2}px`});const a=`#${s.a.NEWFILE_ID}`,n=o(a);return n.css({left:`${e.left*s.a.MOUSE_WHEEL_VAL-this.options.DEFAULT_FILE_WIDTH/2}px`,top:`${e.top*s.a.MOUSE_WHEEL_VAL-this.options.DEFAULT_FILE_WIDTH/2}px`,"z-index":s.a.HIGHEST_Z_INDEX}),o("#toggle-colpick").length>0&&o("#toggle-colpick").hasClass("active")||n.addClass("grab-pointer"),s.a.NEWFILE_ID}};return n.prototype=Object.assign({},{constructor:n,options:{},load(){this.init(),this.animate()},init(){this.renderer=new p.WebGLRenderer({canvas:this.canvas,antialias:!0,alpha:!0}),this.renderer.setClearColor(0,0),this.renderer.setPixelRatio(e.devicePixelRatio),this.renderer.shadowMap.enabled=!0},animate(){const e=this;e._render(),setTimeout(()=>{requestAnimationFrame(()=>{e.animate()})},1e3/120)},_render(){if(this._updateSize(),this.renderer.setScissorTest(!1),this.renderer.clear(!0,!0),this.renderer.setScissorTest(!0),this.scenes[0]){const e=this;this.scenes.forEach(t=>{const{element:i}=t.userData,{controls:r}=t.userData;r&&(r.rotateSpeed=1*s.a.MOUSE_WHEEL_VAL,r.panSpeed=1*s.a.MOUSE_WHEEL_VAL,o(`#${s.a.CURRENT_ID}`).find(".thumbtack-wrapper").hasClass("active")?r.enabled=!0:r.enabled=!1);const a=i.getBoundingClientRect();if(a.bottom<0||a.top>e.renderer.domElement.clientHeight||a.right<0||a.left>e.renderer.domElement.clientWidth)return;const n=a.right-a.left,l=a.bottom-a.top,{left:c}=a,h=e.renderer.domElement.clientHeight-a.bottom;e.renderer.setViewport(c,h,n,l),e.renderer.setScissor(c,h,n,l);const{camera:u}=t.userData;u&&(e.renderer.render(t,u),e.renderer.autoClear=!1)})}},_updateSize(){const e=this.canvas.clientWidth,t=this.canvas.clientHeight;this.canvas.width===e&&this.canvas.height===t||this.renderer.setSize(e,t,!1)}}),n})(window,document,Math);var ve=(()=>{function e(){this.circleRelPosX=0,this.$barCircle=null,this.flgs={move_circle_flg:!1}}return e.prototype=Object.assign({},{constructor:e,options:{BUTTON_FOR_LEFT:0,HEX:"#000000"},load(){this._initColpick()},mouseDownEvent(e){e.button===this.options.BUTTON_FOR_LEFT&&(this._init(e),this._setFlgs(e),this._handleEventMouseDown(e))},mouseUpEvent(){this._resetFlgs()},mouseMoveEvent(e){this._handleEventMouseMove(e)},changeEvent(e){this._handleEventChange(e)},_init(e){(e.target.closest("#red-cir-colpick")||e.target.closest("#green-cir-colpick")||e.target.closest("#blue-cir-colpick"))&&(this.circleRelPosX=e.clientX-o(e.target).offset().left,this.$barCircle=o(e.target))},_setFlgs(e){(e.target.closest("#red-cir-colpick")||e.target.closest("#green-cir-colpick")||e.target.closest("#blue-cir-colpick"))&&(this.flgs.move_circle_flg=!0)},_resetFlgs(){!0===this.flgs.move_circle_flg&&(this.flgs.move_circle_flg=!1)},_handleEventMouseDown(e){if(l.colpick.tools.is_active_flg&&o(e.target).parents(".file-wrap").find("canvas").length>0&&1!==e.button){const t=this._getColor(e),i=r.rgb2hex([t[0],t[1],t[2]]);t[3]>0?(this._updatePalette(i),this._updateRgbBar(t),this._updateRgbInput(t)):this._initColpick()}e.target.closest("#reset-res")&&l.colpick.tools.is_active_flg&&1!==e.button&&this._initColpick()},_handleEventMouseMove(e){!0===this.flgs.move_circle_flg&&this._syncWithBar(e)},_handleEventChange(e){if(e.target.closest("#input-colpick")){const t=this._getHex(e);this._updatePalette(t);const i=r.hex2rgb(t);this._updateRgbInput(i),this._updateRgbBar(i)}if(e.target.closest("#input-r-colpick")||e.target.closest("#input-g-colpick")||e.target.closest("#input-b-colpick")){const e=parseInt(o("#r-colpick input").val(),10),t=parseInt(o("#g-colpick input").val(),10),i=parseInt(o("#b-colpick input").val(),10),a=r.rgb2hex([e,t,i]),n=r.hex2rgb(a);this._updatePalette(a),this._updateRgbBar(n)}},_toggleColpick(){o("#toggle-colpick").toggleClass("active"),l.colpick.tools.is_active_flg?(o("#canvas-eve .file-wrap").removeClass("grab-pointer"),o("#canvas-eve").addClass("spuit-pointer")):(o("#canvas-eve").removeClass("spuit-pointer"),o("#canvas-eve .file-wrap").addClass("grab-pointer"))},_copyHex(){let e=o("#input-colpick").val();e.match(/#/)&&(e=e.split("#").join("")),r.copyTextToClipboard(e)},_getHex(e){let t=o(e.target).val();return t=o(e.target).val().match(/#/)?`#${t.split("#").join("")}`:`#${o(e.target).val()}`},_getColor(e){const t=o(e.target).parents(".file-wrap"),i=t.find("canvas")[0].getContext("2d"),r=e.clientX-t.offset().left,a=e.clientY-t.offset().top;let n=i.getImageData(r*s.a.MOUSE_WHEEL_VAL,a*s.a.MOUSE_WHEEL_VAL,1,1);return t.find(".flipped").length>0&&(n=i.getImageData(t.find("img").width()-r*s.a.MOUSE_WHEEL_VAL,a*s.a.MOUSE_WHEEL_VAL,1,1)),[n.data[0],n.data[1],n.data[2],n.data[3]]},_updatePalette(e){o("#input-colpick").val(e),o("#color-colpick").css("background-color",e)},_updateRgbBar(e){const t=e[0]/255*100,i=e[1]/255*100,r=e[2]/255*100;o("#r-colpick .colbar-colpick").css("width",`${t}%`),o("#g-colpick .colbar-colpick").css("width",`${i}%`),o("#b-colpick .colbar-colpick").css("width",`${r}%`),o("#red-cir-colpick").css("left",`${t}%`),o("#green-cir-colpick").css("left",`${i}%`),o("#blue-cir-colpick").css("left",`${r}%`)},_updateRgbInput(e){o("#r-colpick input").val(e[0]),o("#g-colpick input").val(e[1]),o("#b-colpick input").val(e[2])},_initColpick(){const{HEX:e}=this.options,t=r.hex2rgb(e)[0],i=r.hex2rgb(e)[1],a=r.hex2rgb(e)[2],n=t/255*100,s=i/255*100,l=a/255*100;o("#input-colpick").val(this.options.HEX),o("#color-colpick").css("background-color",e),o("#r-colpick .colbar-colpick").css("width",`${n}%`),o("#g-colpick .colbar-colpick").css("width",`${s}%`),o("#b-colpick .colbar-colpick").css("width",`${l}%`),o("#red-cir-colpick").css("left",`${n}%`),o("#green-cir-colpick").css("left",`${s}%`),o("#blue-cir-colpick").css("left",`${l}%`),o("#r-colpick input").val(t),o("#g-colpick input").val(i),o("#b-colpick input").val(a)},_syncWithBar(e){const t=this.$barCircle.parent();let i=e.clientX-this.circleRelPosX-t.offset().left;const a=(i=i>=-this.$barCircle.width()/2?i>=t.width()-this.$barCircle.width()/2?t.width()-this.$barCircle.width()/2:i:-this.$barCircle.width()/2)+this.$barCircle.width()/2,n=parseInt(a/t.width()*255,10);this.$barCircle.css("left",`${a/t.width()*100}%`),t.find(".colbar-colpick").css("width",`${a/t.width()*100}%`),t.parent().find("input").val(n);const s=parseInt(o("#r-colpick input").val(),10),l=parseInt(o("#g-colpick input").val(),10),c=parseInt(o("#b-colpick input").val(),10),h=r.rgb2hex([s,l,c]);this._updatePalette(h)}}),e})();var ye=(e=>{function t(){}return t.prototype=Object.assign({},{constructor:t,options:{BUTTON_FOR_LEFT:0,BUTTON_FOR_MOUSEWHEEL:1,DEFAULT_FILE_WIDTH:400},mouseDownEvent(e){this._handleEventMouseDown(e)},mouseUpEvent(e){this._handleEventMouseUp(e)},_handleEventMouseDown(e){(e.target.closest(".youtube-util")||e.target.closest(".tab-block-youtube")||e.target.closest(".child-search-youtube"))&&r.iframePointerNone()},_handleEventMouseUp(e){(e.target.closest(".youtube-util")||e.target.closest(".tab-block-youtube")||e.target.closest(".child-search-youtube"))&&r.iframePointerReset(),e.button===this.options.BUTTON_FOR_LEFT&&(e.target.closest(".backspace-icon")&&o(e.target).parent().children("input").val(""),!0===l.ctxmenu.sub.is_youtube_flg&&this._invokeWindow(e),e.target.closest(".youtube-search-button")&&this._treatYoutube(e))},_invokeWindow(t){s.a.NEWFILE_ID+=1,s.a.HIGHEST_Z_INDEX+=1;const i=(e.innerWidth/2-o("#zoom").offset().left)*s.a.MOUSE_WHEEL_VAL-this.options.DEFAULT_FILE_WIDTH/2,r=(e.innerHeight/2-o("#zoom").offset().top)*s.a.MOUSE_WHEEL_VAL-118,a=`width: ${this.options.DEFAULT_FILE_WIDTH}px; top:${r}px; left:${i}px; z-index:${s.a.HIGHEST_Z_INDEX}; transition:${s.a.IS_TRANSITION};`,n=`<div id="${s.a.NEWFILE_ID}" class="grab-pointer file-wrap limit-size" style="${a}">`+' <div class="function-wrapper">   <div class="thumbtack-wrapper"></div>   <div class="resize-wrapper"></div>   <div class="rotate-wrapper"></div>   <div class="flip-wrapper"></div>   <div class="trash-wrapper"></div> </div> <div class="youtube-util">   <div class="youtube-tab">     <ul>       <li class="tab-prefix tab-current tab-curve double" id="new-tab-youtube">         <div class="tab-info">           <div class="tab-name">New window</div>           <div class="close-button"></div>         </div>       </li>     </ul>   </div>   <div class="youtube-search">     <div class="search-box-wrapper">       <input class="ellipsis youtube-search-box" placeholder="Paste a YouTube link" type="text" spellcheck="false">       <div class="backspace-icon"></div>     </div>     <div class="hover-shadow-single youtube-search-button"></div>   </div> </div> <div class="eve-main is-flipped">   <div class="youtube-content"></div> </div></div>';o("#add-files").append(n),l.ctxmenu.sub.is_youtube_flg=!1},_treatYoutube(e){const t=o(e.target);let i,r,a,n,l,c,h;const u=encodeURI(o(e.target).parent().find("input").val()),p=u.match(/^(https?|ftp)(:\/\/[-_.!~*\'()a-zA-Z0-9;\/?:\@&=+\$,%#]+)$/),d=u.match(/youtube/);if(u&&p&&d){(i=u).match(/&/)?(r=`${n=(n=i.split("v=")[1]).split("&")[0]}?rel=0&showinfo=0`,l=null==s.a.YOUTUBE_API_KEY?-1:this._ajaxDataVideo(n),h=!0):i.match(/list=/)?(r=`videoseries?list=${a=i.split("list=")[1]}`,l=null==s.a.YOUTUBE_API_KEY?-1:this._ajaxDataPlaylistItem(a),h=!1):i.match(/v=/)&&(n=i.split("v=")[1],r=`${i.split("v=")[1]}?rel=0&showinfo=0`,l=null==s.a.YOUTUBE_API_KEY?-1:this._ajaxDataVideo(n),h=!0),-1===l?c="The API Key is missing":l.done(e=>{c=h?e.items[0].snippet.title:`Playlist : Enqueued ${e.pageInfo.totalResults} videos`}),t.parents(".file-wrap").find(".tab-name")[0].innerText=c;const e=`<iframe src="https://www.youtube.com/embed/${r}" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`,o=t.parents(".file-wrap");o.find("iframe").length||o.find(".youtube-content").append(e),o.find("iframe").attr("src",`https://www.youtube.com/embed/${r}`)}},_ajaxDataVideo:()=>o.ajax({type:"GET",url:"https://www.googleapis.com/youtube/v3/videos",dataType:"json",data:{part:"snippet",id:id,maxResults:50,key:s.a.YOUTUBE_API_KEY}}),_ajaxDataPlaylistItem:()=>o.ajax({type:"GET",url:"https://www.googleapis.com/youtube/v3/playlistItems",dataType:"json",data:{part:"snippet",playlistId:id,maxResults:50,key:s.a.YOUTUBE_API_KEY}})}),t})(window),_e=i(3),be=i.n(_e);var Ae=((e,t,i)=>{function r(){this.canvasEveWrap=t.getElementById("canvas-eve-wrapper"),this.currentMousePos={x:0,y:0}}return r.prototype=Object.assign({},{constructor:r,options:{SHOW_FILE_DELAY:0,DEFAULT_FILE_WIDTH:300},mouseDownEvent(e){this._updateMousePos(e)},mouseMoveEvent(e){this._updateMousePos(e)},dragOverEvent(e){this._dragOver(e)},dropEvent(e){this._drop(e)},pasteEvent(e){this._paste(e)},_updateMousePos(e){let t,i;e.changedTouches?(t=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY):(t=e.clientX,i=e.clientY),this.currentMousePos.x=t,this.currentMousePos.y=i},_dragOver(e){e.dataTransfer.dropEffect="copy",o("iframe").css("pointer-events","none")},_drop(e){let i,r;e.changedTouches?(i=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY):(i=e.clientX,r=e.clientY);const a={left:i-o("#zoom").offset().left,top:r-o("#zoom").offset().top},{files:n}=e.dataTransfer,s={progress:t.getElementById("progress-bar"),fileCount:n.length,eachProg:100/n.length,totalProg:0,iterate:0};if(s.fileCount>0){let e=!1;if(Array.from(n).forEach(t=>{this._isSupported.checkAll(t.name)||(e=!0)}),!1===e)for(const e in n)this._isSupported.fileReader(n[e].name)?this._fileReader(n[e],a,s):this._isSupported.blobReader(n[e].name)&&this._blobReader(n[e],a,s)}},_paste(e){let i=null;const{items:r}=e.clipboardData||e.originalEvent.clipboardData;for(let e=0;e<r.length;e++)if("file"===r[e].kind){i=r[e].getAsFile();break}if(null==i)return;const{x:a}=this.currentMousePos,{y:n}=this.currentMousePos,s={left:a-o("#zoom").offset().left,top:n-o("#zoom").offset().top},l={progress:t.getElementById("progress-bar"),fileCount:1,eachProg:100,totalProg:0,iterate:0};this._isSupported.fileReader(i.name)?this._fileReader(i,s,l):this._isSupported.blobReader(i.name)&&this._blobReader(i,s,l)},_isSupported:{fileReader:e=>/\.(psd)$/i.test(e),blobReader:e=>/\.(jpe?g|png|gif|svg|bmp)$/i.test(e),checkAll:e=>/\.(jpe?g|png|gif|svg|bmp|psd)$/i.test(e)},_fileReader(e,t,i){const r=this;this._readFile(e,i).then(e=>{r._readerPromise(e,t,i)})},_readFile:(e,t)=>new Promise((r,a)=>{const o=new FileReader;o.onloadstart=()=>{0===t.iterate&&t.progress.classList.add("loading")},o.onprogress=e=>{if(e.lengthComputable){const r=i.round(e.loaded/e.total*t.eachProg);if(r<t.eachProg){const e=r+t.totalProg;t.progress.style.width=`${e}%`}}},o.onload=i=>{t.iterate++,t.iterate<t.fileCount?(t.totalProg=t.eachProg*t.iterate,t.progress.style.width=`${t.totalProg}%`):(t.progress.style.width="100%",setTimeout(()=>{t.progress.classList.remove("loading")},1e3));const a=new Image;if(a.style.cssText="width: 100%;",/\.(psd)$/i.test(e.name)){const e=new be.a(new Uint8Array(i.target.result));e.parse(),a.src=e.image.toBase64()}else a.src=i.target.result;return r(a)},o.onerror=a,/\.(psd)$/i.test(e.name)?o.readAsArrayBuffer(e):o.readAsDataURL(e)}),_blobReader(e,t,i){const r=this;this._readBlob(e,i).then(e=>{r._readerPromise(e,t,i)})},_readBlob:(e,t)=>new Promise((i,r)=>{0===t.iterate&&t.progress.classList.add("loading");const a=new Image;a.style.cssText="width: 100%;",a.src=URL.createObjectURL(e),a.onload=()=>(t.iterate++,t.iterate<t.fileCount?(t.totalProg=t.eachProg*t.iterate,t.progress.style.width=`${t.totalProg}%`):(t.progress.style.width="100%",setTimeout(()=>{t.progress.classList.remove("loading")},1e3)),i(a))}),_readerPromise(e,t,i){s.a.NEWFILE_ID+=1,s.a.HIGHEST_Z_INDEX+=1;const r=`<div id ="${s.a.NEWFILE_ID}" class="file-wrap transparent" style="transition: ${s.a.IS_TRANSITION};"><div class="function-wrapper"><div class="thumbtack-wrapper"></div><div class="resize-wrapper"></div><div class="rotate-wrapper"></div><div class="flip-wrapper"></div><div class="trash-wrapper"></div></div><div class="eve-main is-flipped"><canvas class="canvas-colpick"></canvas></div></div>`;o("#add-files").append(r);const a=e.width,n=e.height/a,l=`#${s.a.NEWFILE_ID}`,c=o(l),h=this.options.DEFAULT_FILE_WIDTH-2;c.find(".canvas-colpick").attr("width",h),c.find(".canvas-colpick").attr("height",h*n),c.find(".canvas-colpick")[0].getContext("2d").drawImage(e,0,0,h,h*n),c.css({left:`${t.left*s.a.MOUSE_WHEEL_VAL-this.options.DEFAULT_FILE_WIDTH/2}px`,top:`${t.top*s.a.MOUSE_WHEEL_VAL-this.options.DEFAULT_FILE_WIDTH*n/2}px`,"z-index":s.a.HIGHEST_Z_INDEX}),o("#toggle-colpick").length>0&&o("#toggle-colpick").hasClass("active")||c.addClass("grab-pointer"),o(`#${s.a.NEWFILE_ID}`).find(".eve-main").prepend(e),i.iterate===i.fileCount&&setTimeout(()=>{o("div").removeClass("transparent")},this.options.SHOW_FILE_DELAY)}}),r})(window,document,Math);var Ee=((e,t,i)=>{function a(){this.$canvasEveWrapper=o("#canvas-eve-wrapper"),this.$selectedArea=null,this.newAreaPos={x:null,y:null},this.newSelectedAreaPos={x:null,y:null},this.endSelectedAreaPos={x:null,y:null},this.flgs={create_selected_area_flg:!1,is_multi_mode_flg:!1}}function n(){this.keyMap={}}function c(){this.MultiSelect=new a,this.AutoAlign=new n,this.file={$fileId:null,fileId:0,fileIdPos:0,fileIdRelPosX:0,fileIdRelPosY:0,fileIdWidth:0,fileIdHeight:0,fileIdRatio:0,fileIdTheta:0,rotatedSize:{width:0,height:0},rotatedCenterPos:{left:0,top:0}},this.multiFile={},this.tmp={ro:{left_top_initRad:null,right_top_initRad:null,right_bottom_initRad:null,left_bottom_initRad:null,left_top_pos:null,right_top_pos:null,right_bottom_pos:null,left_bottom_pos:null}},this.resizeBox='<div class="re-left-top"></div><div class="re-right-top"></div><div class="re-right-bottom"></div><div class="re-left-bottom"></div>',this.rotateBox='<div class="ro-left-top"></div><div class="ro-right-top"></div><div class="ro-right-bottom"></div><div class="ro-left-bottom"></div>'}a.prototype={constructor:a,options:{BUTTON_FOR_LEFT:0},mouseDownEvent(e){e.button===this.options.BUTTON_FOR_LEFT&&(this._handleMultiMode(e),e.target.closest("#reset-res")&&(this._setFlgs(),this._createSelectedArea(e)))},mouseUpEvent(){this._resetFlgs(),null!==this.$selectedArea&&this._releaseSelectedArea()},mouseMoveEvent(e){!0===this.flgs.create_selected_area_flg&&this._updateSelectedArea(e)},_handleMultiMode(e){let t=o(e.target).parents(".file-wrap");0===t.length&&(t=o(e.target)),1!==t.find(".multi").length&&!1===l.ui.is_ui_flg&&(l.canvas.select.is_multi_flg=!1)},_setFlgs(){this.flgs.create_selected_area_flg=!0},_resetFlgs(){!0===this.flgs.create_selected_area_flg&&(this.flgs.create_selected_area_flg=!1)},_createSelectedArea(e){const i=e.clientX,r=e.clientY,a=t.createElement("div");a.id="selected-area",a.style.left=`${i}px`,a.style.top=`${r}px`,a.style.zIndex=1,this.newAreaPos.x=i,this.newAreaPos.y=r,this.$selectedArea=o(a),this.$canvasEveWrapper.append(a)},_updateSelectedArea(e){const{$selectedArea:t}=this,i=this.newAreaPos.x,r=this.newAreaPos.y,a=e.clientX,o=e.clientY,n=a-i,s=o-r,l=n>0?n:-n,c=s>0?s:-s,h=n>0?i:i-l,u=s>0?r:r-c;this.newSelectedAreaPos.x=n>0?i:a,this.newSelectedAreaPos.y=s>0?r:o,this.endSelectedAreaPos.x=n>0?a:i,this.endSelectedAreaPos.y=s>0?o:r,t.css({left:`${h}px`,top:`${u}px`,width:`${l}px`,height:`${c}px`})},_releaseSelectedArea(){this.$selectedArea.remove(),this.$selectedArea=null,this._evaluateArea(),this._initVal()},_evaluateArea(){const e=o(".file-wrap"),t=e.length;let i,r,a,n,c,h,u;const p={startX:this.newSelectedAreaPos.x,startY:this.newSelectedAreaPos.y,endX:this.endSelectedAreaPos.x,endY:this.endSelectedAreaPos.y};let d=!1,f=0;for(let g=0;g<t;g++)if(i=e[g],1===(r=o(i)).parents("#canvas-eve").length){u={startX:a=r.offset().left,startY:n=r.offset().top,endX:c=a+r.width()/s.a.MOUSE_WHEEL_VAL,endY:h=n+r.height()/s.a.MOUSE_WHEEL_VAL},d=r.find(".only-draggable").length>0,!0===this._estimateBounding(p,u)&&!1===d&&(f++,l.canvas.select.is_multi_flg=1!==f,r.prepend(`<div class="selected multi" style="border-width: ${s.a.MOUSE_WHEEL_VAL}px"></div>`))}},_estimateBounding(e,t){const i=this._isInBounding(e,[t.startX,t.startY]),r=this._isInBounding(e,[t.endX,t.startY]),a=this._isInBounding(e,[t.endX,t.endY]),o=this._isInBounding(e,[t.startX,t.endY]),n=this._isInBounding(t,[e.startX,e.startY]),s=this._isInBounding(t,[e.endX,e.startY]),l=this._isInBounding(t,[e.endX,e.endY]),c=this._isInBounding(t,[e.startX,e.endY]);return!!(i||r||a||o||n||s||l||c)||(e.startX<t.startX&&t.endX<e.endX&&t.startY<e.startY&&e.endY<t.endY||t.startX<e.startX&&e.endX<t.endX&&e.startY<t.startY&&t.endY<e.endY)},_isInBounding:(e,t)=>e.startX<t[0]&&t[0]<e.endX&&e.startY<t[1]&&t[1]<e.endY,_initVal(){this.newAreaPos={x:null,y:null},this.newSelectedAreaPos={x:null,y:null},this.endSelectedAreaPos={x:null,y:null}}},n.prototype={constructor:n,options:{THRESHOLD:1e4},keyDownEvent(e){this.keyMap[e.key]=!0,this.keyMap.Control?(this._verticalAlignEntry(e),this._horizontalAlignEntry(e)):this.keyMap={}},keyUpEvent(e){"Control"===e.key&&(this.keyMap.Control=!1)},_initKeyMap(){this.keyMap.ArrowUp=!1,this.keyMap.ArrowDown=!1,this.keyMap.ArrowLeft=!1,this.keyMap.ArrowRight=!1},_verticalAlignEntry(e){const t=this.keyMap.ArrowDown,i=this.keyMap.ArrowUp;(t||i)&&(e.preventDefault(),this._verticalAlign())},_verticalAlign(){const e=o(".file-wrap"),t=e.length;let i=this.options.THRESHOLD,r=-this.options.THRESHOLD;for(let a=0;a<t;a++){const t=o(e[a]);if(1===t.find(".multi").length){const{top:e}=t.offset(),a=e+t.height()/s.a.MOUSE_WHEEL_VAL;i=e<i?e:i,r=a>r?a:r}}const a=this.keyMap.ArrowUp,n=this.keyMap.ArrowDown;a&&this._alignFiles(e,i,"verticalAlignTop"),n&&this._alignFiles(e,r,"verticalAlignBottom"),this._initKeyMap()},_horizontalAlignEntry(e){const t=this.keyMap.ArrowLeft,i=this.keyMap.ArrowRight;(t||i)&&(e.preventDefault(),this._horizontalAlign())},_horizontalAlign(){const e=o(".file-wrap"),t=e.length;let i=this.options.THRESHOLD,r=-this.options.THRESHOLD;for(let a=0;a<t;a++){const t=o(e[a]);if(1===t.find(".multi").length){const{left:e}=t.offset(),a=e+t.width()/s.a.MOUSE_WHEEL_VAL;i=e<i?e:i,r=a>r?a:r}}const a=this.keyMap.ArrowLeft,n=this.keyMap.ArrowRight;a&&this._alignFiles(e,i,"horizontalAlignLeft"),n&&this._alignFiles(e,r,"horizontalAlignRight"),this._initKeyMap()},_alignFiles(e,t,i){const r=e.length;let a,n;for(let l=0;l<r;l++){const c=o(e[l]),h={id:c.attr("id"),width:c.width(),height:c.height(),left:c.offset().left,right:c.offset().left+c.width()/s.a.MOUSE_WHEEL_VAL,top:c.offset().top,bottom:c.offset().top+c.height()/s.a.MOUSE_WHEEL_VAL};let u=!1;if(1===c.find(".multi").length){for(let n=0;n<r;n++){const r=o(e[n]),l={id:r.attr("id"),width:r.width(),height:r.height(),left:r.offset().left,right:r.offset().left+r.width()/s.a.MOUSE_WHEEL_VAL,top:r.offset().top,bottom:r.offset().top+r.height()/s.a.MOUSE_WHEEL_VAL};if(1===r.find(".multi").length&&h.id!==l.id){const e={alignTop:l.bottom<h.top+1,alignBottom:l.top>h.bottom-1,alignLeft:l.right<h.left+1,alignRight:l.left>h.right-1},r=h.left<l.right&&l.right<=h.right,o=h.left<=l.left&&l.left<h.right,n=h.top<l.bottom&&l.bottom<=h.bottom,s=h.top<=l.top&&l.top<h.bottom,c={vertical:l.left<=h.left&&h.right<=l.right,horizontal:l.top<=h.top&&h.bottom<=l.bottom},p={vertical:h.left<=l.left&&l.right<=h.right,horizontal:h.top<=l.top&&l.bottom<=h.bottom};switch(u||(a=t),i){case"verticalAlignTop":e.alignTop&&(r||o||p.vertical||c.vertical)&&(a=l.bottom>a?l.bottom:a,u=!0);break;case"verticalAlignBottom":e.alignBottom&&(r||o||p.vertical||c.vertical)&&(a=l.top<a?l.top:a,u=!0);break;case"horizontalAlignLeft":e.alignLeft&&(n||s||p.horizontal||c.horizontal)&&(a=l.right>a?l.right:a,u=!0);break;case"horizontalAlignRight":e.alignRight&&(n||s||p.horizontal||c.horizontal)&&(a=l.left<a?l.left:a,u=!0)}}}switch(i){case"verticalAlignTop":n=(a-o("#zoom").offset().top)*s.a.MOUSE_WHEEL_VAL,1===c.find(".multi").length&&c.css({top:`${n}px`});break;case"verticalAlignBottom":n=(a-o("#zoom").offset().top)*s.a.MOUSE_WHEEL_VAL-h.height,1===c.find(".multi").length&&c.css({top:`${n}px`});break;case"horizontalAlignLeft":n=(a-o("#zoom").offset().left)*s.a.MOUSE_WHEEL_VAL,1===c.find(".multi").length&&c.css({left:`${n}px`});break;case"horizontalAlignRight":n=(a-o("#zoom").offset().left)*s.a.MOUSE_WHEEL_VAL-h.width,1===c.find(".multi").length&&c.css({left:`${n}px`})}}}}};return c.prototype=Object.assign({},{constructor:c,options:{BUTTON_FOR_LEFT:0,BUTTON_FOR_MIDDLE:1,UPDATE_CANVAS_SIZE_DELAY:150,BRUSH_SIZE:8,ERASER_SIZE:30},mouseDownEvent(e){e.button===this.options.BUTTON_FOR_LEFT&&!1===l.ui.toolbar.is_active_flg&&(l.setFlgs(e),this.MultiSelect.mouseDownEvent(e),!0!==l.canvas.select.is_multi_flg||e.target.closest("#canvas-eve-ui")?this._initSingle(e):this._initMulti(e),"reset-res"===o(e.target)[0].id&&(this._reset(),this._initMultiFile()),this._handleEventMouseDown(e))},mouseUpEvent(){!1===l.ui.toolbar.is_active_flg&&(this._update(),this.MultiSelect.mouseUpEvent(),l.resetFlgs())},mouseMoveEvent(e){this.MultiSelect.mouseMoveEvent(e),this._handleEventMouseMove(e)},mouseWheelEvent(){this._updateUiVal()},keyDownEvent(e){this.AutoAlign.keyDownEvent(e)},keyUpEvent(e){this.AutoAlign.keyUpEvent(e)},_initSingle(e){const t=this;let a=o(e.target).parents(".file-wrap");if(0===a.length&&(a=o(e.target)),a&&a.hasClass("file-wrap")&&(0===a.find(".selected").length&&this._reset(),!1===l.colpick.active_spuit_flg&&(!1===l.config.only_draggable_flg&&(!1!==l.canvas.select.is_multi_flg&&0!==a.find(".selected").length||(0===a.find(".selected").length&&a.prepend('<div class="selected"></div>'),a.find(".resize-wrapper").hasClass("active")&&0===a.find(".re-left-top").length&&a.prepend(t.resizeBox),a.find(".rotate-wrapper").hasClass("active")&&0===a.find(".ro-left-top").length&&a.prepend(t.rotateBox),0===a.find(".thumbtack-icon").length&&a.find(".thumbtack-wrapper").prepend('<div class="thumbtack-icon"></div>'),0===a.find(".resize-icon").length&&a.find(".resize-wrapper").prepend('<div class="resize-icon"></div>'),0===a.find(".rotate-icon").length&&a.find(".rotate-wrapper").prepend('<div class="rotate-icon"></div>'),0===a.find(".flip-icon").length&&a.find(".flip-wrapper").prepend('<div class="flip-icon"></div>'),0===a.find(".trash-icon").length&&a.find(".trash-wrapper").prepend('<div class="trash-icon"></div>')),this._updateUiVal()),!1===l.canvas.drag_flg))){s.a.CURRENT_ID=a.attr("id");const t=this.file;t.fileId=`#${s.a.CURRENT_ID}`,t.$fileId=o(`#${s.a.CURRENT_ID}`),t.fileIdWidth=t.$fileId.outerWidth(),t.fileIdHeight=t.$fileId.outerHeight(),t.fileIdRatio=t.fileIdHeight/t.fileIdWidth,t.fileIdTheta=r.getRotationRad(t.$fileId[0]),t.rotatedSize.width=t.fileIdWidth*i.abs(i.cos(t.fileIdTheta))+t.fileIdHeight*i.abs(i.sin(t.fileIdTheta)),t.rotatedSize.height=t.fileIdHeight*i.abs(i.cos(t.fileIdTheta))+t.fileIdWidth*i.abs(i.sin(t.fileIdTheta)),t.fileIdPos=t.$fileId.offset(),t.fileIdRelPosX=e.clientX-t.fileIdPos.left,t.fileIdRelPosY=e.clientY-t.fileIdPos.top,t.rotatedCenterPos.left=t.$fileId.offset().left+t.rotatedSize.width/2/s.a.MOUSE_WHEEL_VAL,t.rotatedCenterPos.top=t.$fileId.offset().top+t.rotatedSize.height/2/s.a.MOUSE_WHEEL_VAL,this.tmp.ro.left_top_initRad=r.calcRadians(-t.fileIdWidth/2,-t.fileIdHeight/2),this.tmp.ro.right_top_initRad=r.calcRadians(t.fileIdWidth/2,-t.fileIdHeight/2),this.tmp.ro.right_bottom_initRad=r.calcRadians(t.fileIdWidth/2,t.fileIdHeight/2),this.tmp.ro.left_bottom_initRad=r.calcRadians(-t.fileIdWidth/2,t.fileIdHeight/2),s.a.HIGHEST_Z_INDEX+=1,t.$fileId.css("z-index",s.a.HIGHEST_Z_INDEX),l.canvas.drag_flg=!0}},_initMulti(e){const t=o(".file-wrap"),a=t.length;let n=0;for(let c=0;c<a;c++){const a=o(t[c]);if(1===a.find(".selected").length&&!1===l.colpick.active_spuit_flg&&!1===l.canvas.drag_flg){s.a.CURRENT_ID=a.attr("id"),this.multiFile[n]={};const t=this.multiFile[n];t.fileId=`#${s.a.CURRENT_ID}`,t.$fileId=o(`#${s.a.CURRENT_ID}`),t.fileIdWidth=t.$fileId.outerWidth(),t.fileIdHeight=t.$fileId.outerHeight(),t.fileIdRatio=t.fileIdHeight/t.fileIdWidth,t.fileIdTheta=r.getRotationRad(t.$fileId[0]),t.rotatedSize={},t.rotatedSize.width=t.fileIdWidth*i.abs(i.cos(t.fileIdTheta))+t.fileIdHeight*i.abs(i.sin(t.fileIdTheta)),t.rotatedSize.height=t.fileIdHeight*i.abs(i.cos(t.fileIdTheta))+t.fileIdWidth*i.abs(i.sin(t.fileIdTheta)),t.fileIdPos=t.$fileId.offset(),t.fileIdRelPosX=e.clientX-t.fileIdPos.left,t.fileIdRelPosY=e.clientY-t.fileIdPos.top,t.rotatedCenterPos={},t.rotatedCenterPos.left=t.$fileId.offset().left+t.rotatedSize.width/2/s.a.MOUSE_WHEEL_VAL,t.rotatedCenterPos.top=t.$fileId.offset().top+t.rotatedSize.height/2/s.a.MOUSE_WHEEL_VAL,s.a.HIGHEST_Z_INDEX+=1,t.$fileId.css("z-index",s.a.HIGHEST_Z_INDEX),n++}}l.canvas.drag_flg=!0},_initMultiFile(){this.multiFile={}},_reset(){o(".selected").remove(),o(".thumbtack-icon").remove(),o(".resize-icon").remove(),o(".rotate-icon").remove(),o(".flip-icon").remove(),o(".trash-icon").remove(),o(".re-left-top").remove(),o(".re-right-top").remove(),o(".re-right-bottom").remove(),o(".re-left-bottom").remove(),o(".ro-left-top").remove(),o(".ro-right-top").remove(),o(".ro-right-bottom").remove(),o(".ro-left-bottom").remove()},_update(){const e=this.file;null!==e.$fileId&&e.$fileId.find(".canvas-colpick").length>0&&(!0!==l.canvas.re.left_top_flg&&!0!==l.canvas.re.right_top_flg&&!0!==l.canvas.re.right_bottom_flg&&!0!==l.canvas.re.left_bottom_flg||setTimeout(()=>{const t=new Image;t.src=e.$fileId.find("img").attr("src"),t.onload=()=>{e.$fileId.find(".canvas-colpick")[0].getContext("2d").drawImage(t,0,0,e.$fileId.width(),e.$fileId.height())},e.$fileId.find(".canvas-colpick").attr("width",e.$fileId.width()),e.$fileId.find(".canvas-colpick").attr("height",e.$fileId.height())},this.options.UPDATE_CANVAS_SIZE_DELAY))},_handleEventMouseDown(e){const t=this,i=this.file;e.target.closest(".thumbtack-icon")&&(o(e.target).parents(".thumbtack-wrapper").toggleClass("active"),o(e.target).parents(".thumbtack-wrapper").hasClass("active")?(l.canvas.thumbtack_flg=!0,this._updateUiVal()):l.canvas.thumbtack_flg=!1),e.target.closest(".resize-icon")&&(o(e.target).parents(".resize-wrapper").toggleClass("active"),o(e.target).parents(".resize-wrapper").hasClass("active")?i.$fileId.hasClass("ro-left-top")||(i.$fileId.prepend(t.resizeBox),this._updateUiVal()):(i.$fileId.children(".re-left-top").remove(),i.$fileId.children(".re-right-top").remove(),i.$fileId.children(".re-right-bottom").remove(),i.$fileId.children(".re-left-bottom").remove())),e.target.closest(".rotate-icon")&&(o(e.target).parents(".rotate-wrapper").toggleClass("active"),o(e.target).parents(".rotate-wrapper").hasClass("active")?i.$fileId.hasClass("ro-left-top")||(i.$fileId.removeClass("not-rotated"),i.$fileId.prepend(t.rotateBox),this._updateUiVal()):(i.$fileId.addClass("not-rotated"),i.$fileId.children(".ro-left-top").remove(),i.$fileId.children(".ro-right-top").remove(),i.$fileId.children(".ro-right-bottom").remove(),i.$fileId.children(".ro-left-bottom").remove())),e.target.closest(".flip-icon")&&(o(e.target).parents(".flip-wrapper").toggleClass("active"),o(e.target).parents(".flip-wrapper").hasClass("active")?(o(`${i.fileId}`).find(".is-flipped").addClass("flipped"),this._updateUiVal()):o(`${i.fileId}`).find(".is-flipped").removeClass("flipped")),e.target.closest(".trash-icon")&&(o(e.target).parents(".trash-wrapper").toggleClass("active"),o(e.target).parents(".trash-wrapper").hasClass("active")&&o(i.fileId).remove())},_handleEventMouseMove(e){const t=e.clientX-o("#zoom").offset().left,i=e.clientY-o("#zoom").offset().top;!0!==l.canvas.select.is_multi_flg||e.target.closest("#canvas-eve-ui")?this._draggedSingle(e,t,i,l.plain.active_mousewheel_flg):this._draggedMulti(e,t,i,l.plain.active_mousewheel_flg),this._rotate(e,l.plain.active_mousewheel_flg),this._resize(e,l.plain.active_mousewheel_flg)},_draggedSingle(e,t,i,r){const a=this.file;let o,n,c,h;!0===l.config.no_zooming_flg?(o=e.clientX-a.fileIdRelPosX,n=e.clientY-a.fileIdRelPosY,c=(a.rotatedSize.width-a.fileIdWidth)/2+o,h=(a.rotatedSize.height-a.fileIdHeight)/2+n):(o=t-a.fileIdRelPosX,n=i-a.fileIdRelPosY,c=(a.rotatedSize.width-a.fileIdWidth)/2+o*s.a.MOUSE_WHEEL_VAL,h=(a.rotatedSize.height-a.fileIdHeight)/2+n*s.a.MOUSE_WHEEL_VAL),!1===r&&!1===l.canvas.thumbtack_flg&&!1===l.canvas.resize_flg&&!1===l.canvas.rotate_flg&&!0===l.canvas.drag_flg&&(!1===l.colpick.active_spuit_flg&&!1===l.colpick.move_circle_flg&&a.$fileId.css({left:`${c}px`,top:`${h}px`}),a.rotatedCenterPos.left=a.$fileId.offset().left+a.rotatedSize.width/2/s.a.MOUSE_WHEEL_VAL,a.rotatedCenterPos.top=a.$fileId.offset().top+a.rotatedSize.height/2/s.a.MOUSE_WHEEL_VAL)},_draggedMulti(e,t,i,a){const o=r.keysCount(this.multiFile);for(let e=0;e<o;e++){const r=this.multiFile[e],o=t-r.fileIdRelPosX,n=i-r.fileIdRelPosY,c=(r.rotatedSize.width-r.fileIdWidth)/2+o*s.a.MOUSE_WHEEL_VAL,h=(r.rotatedSize.height-r.fileIdHeight)/2+n*s.a.MOUSE_WHEEL_VAL;!1===a&&!1===l.canvas.thumbtack_flg&&!1===l.canvas.resize_flg&&!1===l.canvas.rotate_flg&&!0===l.canvas.drag_flg&&(!1===l.colpick.active_spuit_flg&&!1===l.colpick.move_circle_flg&&r.$fileId.css({left:`${c}px`,top:`${h}px`}),r.rotatedCenterPos.left=r.$fileId.offset().left+r.rotatedSize.width/2/s.a.MOUSE_WHEEL_VAL,r.rotatedCenterPos.top=r.$fileId.offset().top+r.rotatedSize.height/2/s.a.MOUSE_WHEEL_VAL)}},_resize(e,t){const i=this.file;!1===t&&!0===l.canvas.resize_flg&&(!0===l.canvas.re.left_top_flg&&i.$fileId.css({top:`${(i.fileIdPos.top-o("#zoom").offset().top)*s.a.MOUSE_WHEEL_VAL+(i.fileIdHeight-(i.fileIdWidth-(e.clientX-i.fileIdPos.left)*s.a.MOUSE_WHEEL_VAL)*i.fileIdRatio)}px`,left:`${(i.fileIdPos.left-o("#zoom").offset().left)*s.a.MOUSE_WHEEL_VAL+(e.clientX-i.fileIdPos.left)*s.a.MOUSE_WHEEL_VAL}px`,width:`${i.fileIdWidth-(e.clientX-i.fileIdPos.left)*s.a.MOUSE_WHEEL_VAL}px`}),!0===l.canvas.re.right_top_flg&&i.$fileId.css({top:`${(i.fileIdPos.top-o("#zoom").offset().top)*s.a.MOUSE_WHEEL_VAL+(i.fileIdHeight-(e.clientX-i.fileIdPos.left)*s.a.MOUSE_WHEEL_VAL*i.fileIdRatio)}px`,left:`${(i.fileIdPos.left-o("#zoom").offset().left)*s.a.MOUSE_WHEEL_VAL}px`,width:`${(e.clientX-i.fileIdPos.left)*s.a.MOUSE_WHEEL_VAL}px`}),!0===l.canvas.re.right_bottom_flg&&i.$fileId.css({top:`${(i.fileIdPos.top-o("#zoom").offset().top)*s.a.MOUSE_WHEEL_VAL}px`,left:`${(i.fileIdPos.left-o("#zoom").offset().left)*s.a.MOUSE_WHEEL_VAL}px`,width:`${(e.clientX-i.fileIdPos.left)*s.a.MOUSE_WHEEL_VAL}px`}),!0===l.canvas.re.left_bottom_flg&&i.$fileId.css({top:`${(i.fileIdPos.top-o("#zoom").offset().top)*s.a.MOUSE_WHEEL_VAL}px`,left:`${(i.fileIdPos.left-o("#zoom").offset().left+(e.clientX-i.fileIdPos.left))*s.a.MOUSE_WHEEL_VAL}px`,width:`${i.fileIdWidth-(e.clientX-i.fileIdPos.left)*s.a.MOUSE_WHEEL_VAL}px`}))},_rotate(e,t){const i=this.file,a=i.rotatedCenterPos.left,o=i.rotatedCenterPos.top,n=r.calcRadians(e.clientX-a,e.clientY-o);if(!1===t&&!0===l.canvas.rotate_flg){if(!0===l.canvas.ro.left_top_flg){const e=n-this.tmp.ro.left_top_initRad;i.$fileId.css("transform",`rotate(${e}rad)`)}if(!0===l.canvas.ro.right_top_flg){const e=n-this.tmp.ro.right_top_initRad;i.$fileId.css("transform",`rotate(${e}rad)`)}if(!0===l.canvas.ro.right_bottom_flg){const e=n-this.tmp.ro.right_bottom_initRad;i.$fileId.css("transform",`rotate(${e}rad)`)}if(!0===l.canvas.ro.left_bottom_flg){const e=n-this.tmp.ro.left_bottom_initRad;i.$fileId.css("transform",`rotate(${e}rad)`)}}},_updateUiVal(){o("#canvas-eve .selected").css({"border-width":`${s.a.MOUSE_WHEEL_VAL}px`}),o(".thumbtack-icon").css({width:`${30*s.a.MOUSE_WHEEL_VAL}px`,height:`${40*s.a.MOUSE_WHEEL_VAL}px`}),o(".resize-icon").css({width:`${30*s.a.MOUSE_WHEEL_VAL}px`,height:`${30*s.a.MOUSE_WHEEL_VAL}px`}),o(".rotate-icon").css({width:`${30*s.a.MOUSE_WHEEL_VAL}px`,height:`${30*s.a.MOUSE_WHEEL_VAL}px`}),o(".flip-icon").css({width:`${30*s.a.MOUSE_WHEEL_VAL}px`,height:`${26*s.a.MOUSE_WHEEL_VAL}px`}),o(".trash-icon").css({width:`${30*s.a.MOUSE_WHEEL_VAL}px`,height:`${35*s.a.MOUSE_WHEEL_VAL}px`}),o(".function-wrapper").css({right:`${-70*s.a.MOUSE_WHEEL_VAL}px`}),o(".function-wrapper>div:not(:last-of-type)").css({"margin-bottom":`${15*s.a.MOUSE_WHEEL_VAL}px`}),o(".re-left-top, .re-right-top, .re-right-bottom, .re-left-bottom").css({width:`${10*s.a.MOUSE_WHEEL_VAL}px`,height:`${10*s.a.MOUSE_WHEEL_VAL}px`,"border-width":`${1*s.a.MOUSE_WHEEL_VAL}px`}),o(".re-left-top").css({top:`${-6*s.a.MOUSE_WHEEL_VAL}px`,left:`${-6*s.a.MOUSE_WHEEL_VAL}px`}),o(".re-right-top").css({top:`${-6*s.a.MOUSE_WHEEL_VAL}px`,right:`${-6*s.a.MOUSE_WHEEL_VAL}px`}),o(".re-right-bottom").css({bottom:`${-6*s.a.MOUSE_WHEEL_VAL}px`,right:`${-6*s.a.MOUSE_WHEEL_VAL}px`}),o(".re-left-bottom").css({bottom:`${-6*s.a.MOUSE_WHEEL_VAL}px`,left:`${-6*s.a.MOUSE_WHEEL_VAL}px`}),o(".ro-left-top, .ro-right-top, .ro-right-bottom, .ro-left-bottom").css({width:`${20*s.a.MOUSE_WHEEL_VAL}px`,height:`${20*s.a.MOUSE_WHEEL_VAL}px`}),o(".ro-left-top").css({top:`${-30*s.a.MOUSE_WHEEL_VAL}px`,left:`${-30*s.a.MOUSE_WHEEL_VAL}px`}),o(".ro-right-top").css({top:`${-30*s.a.MOUSE_WHEEL_VAL}px`,right:`${-30*s.a.MOUSE_WHEEL_VAL}px`}),o(".ro-right-bottom").css({bottom:`${-30*s.a.MOUSE_WHEEL_VAL}px`,right:`${-30*s.a.MOUSE_WHEEL_VAL}px`}),o(".ro-left-bottom").css({bottom:`${-30*s.a.MOUSE_WHEEL_VAL}px`,left:`${-30*s.a.MOUSE_WHEEL_VAL}px`})}}),c})(window,document,Math);var we=(()=>{function e(){}return e.prototype=Object.assign({},{constructor:e,options:{BUTTON_FOR_LEFT:0,LIST_OF_TOOLS:["#ui-button-hand","#ui-button-pen","#ui-button-eraser","#ui-button-spuit"]},mouseDownEvent(e){e.button===this.options.BUTTON_FOR_LEFT&&this._toggleEntry(e)},_toggleEntry(e){-1!==this.options.LIST_OF_TOOLS.indexOf(`#${e.target.getAttribute("id")}`)&&this._toggleTool(o(e.target))},_toggleTool(e){e.toggleClass("active"),void 0!==this.__$toggleButton&&this.__$toggleButton[0]!==e[0]&&this.__$toggleButton.hasClass("active")&&(this.__$toggleButton.removeClass("active"),this._resetIsActiveFlg(this.__$toggleButton)),e.hasClass("active")&&(this.__$toggleButton=e),this._plain(e),this._colpick(e),this._oekaki(e),l.ui.toolbar.is_active_flg=!!o("#ui-bar-tool li.active").length},_resetIsActiveFlg(e){switch(e.attr("id")){case"ui-button-hand":l.plain.tools.is_active_flg=!1;break;case"ui-button-spuit":l.colpick.tools.is_active_flg=!1;break;case"ui-button-pen":case"ui-button-eraser":l.oekaki.tools.is_active_flg=!1}},_plain(e){const t=e.attr("id");switch(e.hasClass("active")&&"ui-button-hand"===t?o("#canvas-eve").addClass("active-grab-mousewheel"):o("#canvas-eve").removeClass("active-grab-mousewheel"),t){case"ui-button-hand":e.hasClass("active")?l.plain.tools.is_active_flg=!0:l.plain.tools.is_active_flg=!1}},_colpick(e){const t=e.attr("id");switch(e.hasClass("active")&&"ui-button-spuit"===t?(o("#canvas-eve .file-wrap").removeClass("grab-pointer"),o("#canvas-eve").addClass("spuit-pointer")):(o("#canvas-eve").removeClass("spuit-pointer"),o("#canvas-eve .file-wrap").addClass("grab-pointer")),t){case"ui-button-spuit":e.hasClass("active")?l.colpick.tools.is_active_flg=!0:l.colpick.tools.is_active_flg=!1}},_oekaki(e){const t=e.attr("id");switch(e.hasClass("active")&&"ui-button-pen"===t?(o("#canvas-eve").addClass("cursor-pen"),l.oekaki.tools.brush_flg=!0):(o("#canvas-eve").removeClass("cursor-pen"),l.oekaki.tools.brush_flg=!1),e.hasClass("active")&&"ui-button-eraser"===t?(o("#canvas-eve").addClass("cursor-eraser"),l.oekaki.tools.eraser_flg=!0):(o("#canvas-eve").removeClass("cursor-eraser"),l.oekaki.tools.eraser_flg=!1),t){case"ui-button-pen":case"ui-button-eraser":e.hasClass("active")?l.oekaki.tools.is_active_flg=!0:l.oekaki.tools.is_active_flg=!1}}}),e})();var xe=(e=>{function t(){this.$ctxmenuWrapper=o("#ctxmenu-wrapper"),this.$ctxmenu=o("#ctxmenu"),this.$ctxmenuNew=o("#ctxmenu-new"),this.$ctxmenuSub=o("#ctxmenu-sub"),this.timeoutShow=null,this.timeoutHide=null}return t.prototype=Object.assign({},{constructor:t,options:{BUTTON_FOR_LEFT:0,BUTTON_FOR_RIGHT:2,MOUSE_OVER_DELAY:300,TRANSITION_TIME:100},load(){this.mouseEnterEvent(),this.mouseLeaveEvent()},mouseDownEvent(e){e.target.closest("#ctxmenu-wrapper")||(this._initCtxmenu(),this._initCtxmenuSub())},mouseUpEvent(e){e.button!==this.options.BUTTON_FOR_RIGHT||e.target.closest("#canvas-eve-ui")||e.target.closest("#ctxmenu-wrapper")?e.target.closest("#ctxmenu-new")&&this._showCtxmenuSub():this._showCtxmenu(e),e.button===this.options.BUTTON_FOR_LEFT&&e.target.closest("#ctxmenu-sub-youtube")&&(l.ctxmenu.sub.is_youtube_flg=!0)},mouseEnterEvent(){const t=e.getElementById("ctxmenu"),i=e.getElementById("ctxmenu-new"),r=e.getElementById("ctxmenu-sub"),a=this.options.MOUSE_OVER_DELAY;t.onmouseenter=()=>{this.timeoutHide=setTimeout(()=>{this._initCtxmenuSub()},a)},i.onmouseenter=()=>{clearTimeout(this.timeoutHide),this.timeoutShow=setTimeout(()=>{this._showCtxmenuSub()},a)},r.onmouseenter=()=>{clearTimeout(this.timeoutHide)}},mouseLeaveEvent(){const t=e.getElementById("ctxmenu-new"),i=this.options.MOUSE_OVER_DELAY;t.onmouseleave=e=>{clearTimeout(this.timeoutShow),e.relatedTarget.closest("ctxmenu-sub")||(this.timeoutHide=setTimeout(()=>{this._initCtxmenuSub()},i))}},_initCtxmenu(){const{$ctxmenu:e}=this,{$ctxmenuNew:t}=this;e.removeClass("active"),t.removeClass("active")},_initCtxmenuSub(){const{$ctxmenuNew:e}=this,{$ctxmenuSub:t}=this;e.removeClass("active"),t.removeClass("active")},_showCtxmenu(e){const{$ctxmenuWrapper:t}=this,{$ctxmenu:i}=this;t.css({left:`${e.clientX}px`,top:`${e.clientY}px`}),i.addClass("active")},_showCtxmenuSub(){const{$ctxmenuNew:e}=this,{$ctxmenuSub:t}=this;e.addClass("active"),t.addClass("active")}}),t})(document);var Te=(()=>{function e(){this.$uiBarMenu=o("#ui-bar-menu"),this.$menuWrapper=o("#menu-wrapper"),this.$menuFile=o("#menu-file"),this.$menuEdit=o("#menu-edit"),this.$menuWindow=o("#menu-window"),this.$menuFileList=o("#menu-file-list"),this.$menuEditList=o("#menu-edit-list"),this.$menuWindowList=o("#menu-window-list"),this.timeoutShow=null,this.timeoutHide=null,this.__toggleActive={}}return e.prototype=Object.assign({},{constructor:e,options:{BUTTON_FOR_LEFT:0,BUTTON_FOR_RIGHT:2,MOUSE_OVER_DELAY:300,TRANSITION_TIME:100,BAR_BORDER_WIDTH:2},load(){this._setPos(),this.mouseEnterEvent(),this.mouseLeaveEvent()},mouseDownEvent(e){const t=e.target.closest("#menu-file")||e.target.closest("#menu-edit")||e.target.closest("#menu-window");e.button===this.options.BUTTON_FOR_LEFT&&t?this._showMenu(e):e.target.closest("#menu-wrapper")||this._initMenu()},_setPos(){const{$uiBarMenu:e}=this,{$menuFile:t}=this,{$menuEdit:i}=this,{$menuWindow:r}=this,{$menuFileList:a}=this,{$menuEditList:o}=this,{$menuWindowList:n}=this,s=e.height()-this.options.BAR_BORDER_WIDTH;a.css({left:`${t.offset().left}px`,top:`${s}px`}),o.css({left:`${i.offset().left}px`,top:`${s}px`}),n.css({left:`${r.offset().left}px`,top:`${s}px`})},mouseEnterEvent(){},mouseLeaveEvent(){},_initMenu(){const{$menuFile:e}=this,{$menuEdit:t}=this,{$menuWindow:i}=this,{$menuFileList:r}=this,{$menuEditList:a}=this,{$menuWindowList:o}=this;e.removeClass("active"),t.removeClass("active"),i.removeClass("active"),r.removeClass("active"),a.removeClass("active"),o.removeClass("active")},_showMenu(e){const{$menuFile:t}=this,{$menuEdit:i}=this,{$menuWindow:r}=this,{$menuFileList:a}=this,{$menuEditList:o}=this,{$menuWindowList:n}=this;e.target.closest("#menu-file")?this._toggleActive([t,a]):e.target.closest("#menu-edit")?this._toggleActive([i,o]):e.target.closest("#menu-window")&&this._toggleActive([r,n])},_toggleActive(e){for(let t=0;t<2;t++)e[t].toggleClass("active"),void 0!==this.__toggleActive[t]&&this.__toggleActive[t][0]!==e[t][0]&&this.__toggleActive[t].hasClass("active")&&this.__toggleActive[t].removeClass("active"),e[t].hasClass("active")&&(this.__toggleActive[t]=e[t])}}),e})(document);var Ie=(e=>{function t(){}return t.prototype=Object.assign({},{constructor:t,options:{BUTTON_FOR_LEFT:0},load(){this.mouseEnterEvent(),this.mouseLeaveEvent()},mouseDownEvent(){},mouseUpEvent(e){const{target:t}=e,i=o(t.closest(".ui-bar-toolset")),r=o(t.closest(".ui-button-barstate")),a=i.hasClass("active");e.button===this.options.BUTTON_FOR_LEFT&&(a&&1===r.length&&this._toggleState(i),a||this._toggleState(i))},mouseEnterEvent(){e.getElementById("canvas-eve-ui").onmouseenter=()=>{l.ui.is_ui_flg=!0}},mouseLeaveEvent(){e.getElementById("canvas-eve-ui").onmouseleave=()=>{l.ui.is_ui_flg=!1}},_initToolSets(){o(".ui-bar-toolset").removeClass("active")},_toggleState(e){e.toggleClass("active")}}),t})(document);var Le=((e,t)=>{function i(){this.$footer=o("#footer")}return i.prototype=Object.assign({},{constructor:i,options:{},load(){this.eventReady(),this.eventLoad()},eventReady(){function i(){const t=o(e).height(),i=o("#loader-bg, #loader");i.height(t),i.css("display","block")}"loading"!==t.readyState?i():t.addEventListener("DOMContentLoaded",i)},eventLoad(){const t=this;e.addEventListener("load",(function(){const e=o("#loader-bg"),i=o("#loading");setTimeout(()=>{e.fadeOut(800,()=>{e.remove()})},900),setTimeout(()=>{i.fadeOut(300,()=>{i.remove()})},600),o(".file-wrap").css("transition",s.a.IS_TRANSITION),t._fixFooter(),t.eventLoadResize()}))},eventLoadResize(){const t=this;e.addEventListener("resize",(function(){t._fixFooter()}))},_fixFooter(){this.$footer.css({top:`${e.innerHeight-60}px`,left:`${e.innerWidth/2}px`})}}),i})(window,document);(new(((e,t)=>{function i(){this.canvasEveWrap=t.getElementById("canvas-eve-wrapper"),this.Oekaki=new u(t.getElementById("color-oekaki")),this.Three=new me,this.Colpick=new ve,this.Youtube=new ye,this.File=new Ae,this.Zoom=new h(t.getElementById("zoom")),this.Plain=new c(t.getElementById("plain")),this.Canvas=new Ee,this.Toggle=new we,this.Ctxmenu=new xe,this.Menu=new Te,this.Sidebar=new Ie,this.Common=new Le}return i.prototype=Object.assign({},{constructor:i,options:{},load(){this.initEvent(),this.mouseDownEvent(),this.mouseUpEvent(),this.mouseMoveEvent(),this.mouseWheelEvent(),this.contextMenuEvent(),this.changeEvent(),this.dragOverEvent(),this.dropEvent(),this.pasteEvent(),this.keyDownEvent(),this.keyUpEvent()},initEvent(){this.Common.load(),this.Sidebar.load(),this.Menu.load(),this.Ctxmenu.load(),this.Plain.load(),this.Zoom.load(),this.Oekaki.load(),this.Sidebar.load(),this.Three.load(),this.Colpick.load()},mouseDownEvent(){t.addEventListener("mousedown",e=>{this.Menu.mouseDownEvent(e),this.Ctxmenu.mouseDownEvent(e),this.Toggle.mouseDownEvent(e),this.Plain.mouseDownEvent(e),this.File.mouseDownEvent(e),this.Oekaki.mouseDownEvent(e),this.Colpick.mouseDownEvent(e),this.Youtube.mouseDownEvent(e),this.Canvas.mouseDownEvent(e)},!1)},mouseUpEvent(){t.addEventListener("mouseup",e=>{this.Ctxmenu.mouseUpEvent(e),this.Plain.mouseUpEvent(),this.Oekaki.mouseUpEvent(),this.Colpick.mouseUpEvent(),this.Youtube.mouseUpEvent(e),this.Canvas.mouseUpEvent(),this.Sidebar.mouseUpEvent(e)},!1)},mouseMoveEvent(){t.addEventListener("mousemove",e=>{e.preventDefault(),e.stopPropagation(),this.Plain.mouseMoveEvent(e),this.File.mouseMoveEvent(e),this.Oekaki.mouseMoveEvent(e),this.Colpick.mouseMoveEvent(e),this.Canvas.mouseMoveEvent(e)},!1)},mouseWheelEvent(){t.addEventListener("wheel",e=>{this.Zoom.mouseWheelEvent(e),this.Oekaki.mouseWheelEvent(e),this.Canvas.mouseWheelEvent()},!1)},contextMenuEvent(){t.addEventListener("contextmenu",e=>{e.preventDefault()},!1)},changeEvent(){t.addEventListener("change",e=>{this.Colpick.changeEvent(e)},!1)},touchMoveEvent(){e.addEventListener("touchmove",e=>{e.preventDefault()},{passive:!1},!1),e.removeEventListener("touchmove",e=>{e.preventDefault()},{passive:!1},!1)},dragOverEvent(){const e=this;this.canvasEveWrap.addEventListener("dragover",t=>{t.preventDefault(),t.stopPropagation(),e.Three.Reader.dragOverEvent(t),e.File.dragOverEvent(t)},!1)},dropEvent(){const e=this;this.canvasEveWrap.addEventListener("drop",t=>{t.preventDefault(),t.stopPropagation(),e.Three.Reader.dropEvent(t),e.File.dropEvent(t)},!1)},pasteEvent(){const e=this;this.canvasEveWrap.addEventListener("paste",t=>{e.File.pasteEvent(t)},!1)},keyDownEvent(){t.addEventListener("keydown",e=>{this.Canvas.keyDownEvent(e)})},keyUpEvent(){t.addEventListener("keyup",e=>{this.Canvas.keyUpEvent(e)})}}),i})(window,document))).load()}]);